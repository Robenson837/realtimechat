<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Audio Chat Bubble</title>
  <style>
    :root {
      --message-sent: #857ff7;
      --play-btn: #047857; /* verde */
      --progress-bg: rgba(255, 255, 255, 0.3);
      --progress-fill: white;
    }

    body {
      background: #f5f5f5;
      font-family: Arial, sans-serif;
    }

    .chat-bubble {
      max-width: 600px;
      display: flex;
      align-items: center;
      background: var(--message-sent);
      padding: 10px 15px;
      border-radius: 15px;
      margin: 20px;
      color: white;
      position: relative;
    }

    .profile-pic {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      overflow: hidden;
      margin-right: 10px;
    }

    .profile-pic img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .play-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--play-btn);
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      margin-right: 10px;
    }

    .play-btn span {
      width: 0;
      height: 0;
      border-left: 12px solid white;
      border-top: 7px solid transparent;
      border-bottom: 7px solid transparent;
    }

    .progress-container {
      flex: 1;
      position: relative;
      margin-right: 10px;
    }

    .progress-bar {
      width: 100%;
      height: 3px;
      background: var(--progress-bg);
      border-radius: 2px;
      position: relative;
    }

    .progress {
      height: 100%;
      width: 0%;
      background: var(--progress-fill);
      border-radius: 2px;
    }

    .time {
      font-size: 12px;
      margin-left: 5px;
    }

    .sent-time {
      position: absolute;
      bottom: 5px;
      right: 10px;
      font-size: 12px;
      opacity: 0.8;
    }
  </style>
</head>
<body>

<div class="chat-bubble">
  <div class="profile-pic">
    <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="profile">
  </div>
  <div class="play-btn" id="playBtn">
    <span></span>
  </div>
  <div class="progress-container">
    <div class="progress-bar">
      <div class="progress" id="progress"></div>
    </div>
    <div class="time" id="currentTime">0:00</div>
  </div>
  <div class="sent-time">12:32 PM</div>
  <audio id="audio" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"></audio>
</div>

<script>
  const playBtn = document.getElementById("playBtn");
  const audio = document.getElementById("audio");
  const progress = document.getElementById("progress");
  const currentTimeEl = document.getElementById("currentTime");

  let isPlaying = false;

  playBtn.addEventListener("click", () => {
    if (isPlaying) {
      audio.pause();
    } else {
      audio.play();
    }
  });

  audio.addEventListener("play", () => {
    isPlaying = true;
    playBtn.innerHTML = '<span style="border:none;width:12px;height:12px;background:white"></span>';
  });

  audio.addEventListener("pause", () => {
    isPlaying = false;
    playBtn.innerHTML = '<span></span>';
  });

  audio.addEventListener("timeupdate", () => {
    const progressPercent = (audio.currentTime / audio.duration) * 100;
    progress.style.width = progressPercent + "%";

    let minutes = Math.floor(audio.currentTime / 60);
    let seconds = Math.floor(audio.currentTime % 60);
    if (seconds < 10) seconds = "0" + seconds;
    currentTimeEl.textContent = `${minutes}:${seconds}`;
  });
</script>

</body>
</html>
