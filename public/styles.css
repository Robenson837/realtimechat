/* Desktop-specific overrides and additional styles for the messaging system */
:root {
    /* Mobile viewport variables for keyboard handling - Desktop specific */
    --app-height: 100vh;
    --header-height: 60px;
    --input-height: 80px;
    
    /* Message specific color override */
    --message-sent: #857ff7;
}

/* Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    line-height: 1.6;
    overflow: hidden;
    height: 100vh;
}

/* Enhanced UX Animations */
@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes fadeInDelayed {
    0%, 30% { opacity: 0; }
    100% { opacity: 1; }
}

@keyframes iconBounce {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

@keyframes iconPulse {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.05); opacity: 0.8; }
}

@keyframes iconSlide {
    0% { transform: translateX(0); }
    100% { transform: translateX(5px); }
}

@keyframes loadingDots {
    0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
    40% { transform: scale(1); opacity: 1; }
}

/* Enhanced Animation Classes */
.slide-in {
    animation: slideIn 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.fade-in-text {
    animation: fadeIn 1s ease-out 0.3s both;
}

.fade-in-delayed {
    animation: fadeInDelayed 1.5s ease-out both;
}

.fade-in-app {
    animation: fadeIn 0.8s ease-out both;
}

.title-animate {
    opacity: 0;
    animation: slideIn 0.7s cubic-bezier(0.4, 0, 0.2, 1) 0.2s forwards;
}

.subtitle-animate {
    opacity: 0;
    animation: slideIn 0.7s cubic-bezier(0.4, 0, 0.2, 1) 0.4s forwards;
}

.pulse-icon {
    animation: pulse 2s infinite;
}

.icon-bounce:hover {
    animation: iconBounce 0.6s ease-in-out;
}

.icon-pulse {
    animation: iconPulse 2s infinite;
}

.hover-lift {
    transition: var(--transition-normal);
}

.hover-lift:hover {
    transform: translateY(-2px);
}

/* Enhanced Button Styles */
.btn-enhanced {
    position: relative;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    transform: translateZ(0);
}

.btn-enhanced:hover {
    transform: translateY(-1px);
    box-shadow: 0 8px 25px rgba(79, 70, 229, 0.3);
}

.btn-enhanced:hover .icon-slide {
    animation: iconSlide 0.3s ease-out forwards;
}

.btn-enhanced:active {
    transform: translateY(0);
}
@media (max-width: 768px) {
    .chat-header .chat-actions {
        display: none !important;
    }
    
    /* Mostrar acciones de chat para m√≥vil */
    .mobile-chat-actions {
        display: flex !important;
        gap: 0 !important;
    }
}
/*
/* Enhanced Loading Screen */
.enhanced-spinner {
    width: 40px;
    height: 40px;
    border: 3px solid rgba(255, 255, 255, 0.3);
    border-top: 3px solid white;
    border-radius: 50%;
    margin: 0 auto 1rem;
    animation: spin 1s linear infinite;
}

.loading-dots {
    display: flex;
    gap: 4px;
    justify-content: center;
    margin-top: 1rem;
}

.loading-dots span {
    width: 6px;
    height: 6px;
    background: white;
    border-radius: 50%;
    animation: loadingDots 1.4s infinite ease-in-out;
}

.loading-dots span:nth-child(2) {
    animation-delay: 0.2s;
}

.loading-dots span:nth-child(3) {
    animation-delay: 0.4s;
}

/* Messages Wrapper for Better Scroll */
.messages-wrapper {
    flex: 1;
    overflow: hidden;
    position: relative;
}

/* Ripple Effect */
@keyframes ripple {
    to {
        transform: scale(4);
        opacity: 0;
    }
}

/* Enhanced Form Transitions */
.form-group {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.form-group:focus-within {
    transform: translateY(-2px);
}

.form-group input:focus + i {
    color: var(--primary-color);
    animation: iconPulse 0.6s ease-out;
}

/* Enhanced Modals */
.modal .modal-content,
.modal .user-profile-modal-content,
.modal .profile-modal-content {
    will-change: transform, opacity;
}

/* Enhanced Loading Text */
.loading-text {
    transition: opacity 0.3s ease-in-out;
}

/* Smooth Scrolling */
html {
    scroll-behavior: smooth;
}

/* Enhanced Contact Items */
.contact-item,
.chat-item {
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    transform: translateZ(0);
    opacity: 1; /* Changed from 0 to 1 for immediate visibility */
    transform: translateY(0); /* Changed from 10px to 0 */
    cursor: pointer; /* Ensure cursor shows they're clickable */
}

/* Immediate loading state for chat items */
.chat-item.chat-loaded {
    opacity: 1;
    transform: translateY(0);
}

.contact-item.contact-loaded:hover,
.chat-item.chat-loaded:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

/* Enhanced Welcome Screen */
.welcome-screen .welcome-content {
    animation: fadeIn 1s ease-out 0.5s both;
}

.feature-item {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.feature-item:hover {
    transform: translateY(-2px);
    color: var(--primary-color);
}

.feature-item i {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.feature-item:hover i {
    transform: scale(1.1);
    color: var(--primary-color);
}

/* Utility Classes */
.hidden { 
    display: none !important; 
}

/* vigichat-style Message Status Icons */
.sending-clock {
    animation: spin 1s linear infinite;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.single-check {
    font-size: 14px;
    transition: color 0.2s ease;
}

.double-check-gray {
    font-size: 14px;
    transition: color 0.3s ease;
}

.double-check-blue {
    font-size: 14px;
    color: #4fc3f7 !important;
    transition: color 0.3s ease;
}

/* Message status transition effects */
.message-status {
    transition: all 0.3s ease;
    margin-left: 0,1rem;
    display: inline-flex;
    align-items: center;
}

/* Location message styles - System colors design */
.message-location {
    max-width: 320px;
    border-radius: 16px;
    overflow: hidden;
    background: white;
    border: 1px solid #E5E5EA;
    box-shadow: 0 4px 16px rgba(0,0,0,0.08);
    transition: all 0.2s ease;
}

.message-location:hover {
    box-shadow: 0 8px 24px rgba(0,0,0,0.12);
    transform: translateY(-1px);
}

.location-map-preview {
    position: relative;
    cursor: pointer;
    overflow: hidden;
    border-radius: 12px 12px 0 0;
}

.location-map-container {
    position: relative;
    width: 100%;
    height: 180px;
}

.location-map-container iframe {
    width: 100%;
    height: 100%;
    border: none;
    display: block;
}

.location-marker-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: none;
    z-index: 1000;
}

.user-location-marker {
    position: relative;
    transition: transform 0.2s ease;
}

.user-location-marker::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-top: 10px solid #007AFF;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
}

.location-marker-pin {
    position: relative;
    animation: locationPulse 2s infinite;
}

.map-overlay-gradient {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 30px;
    background: linear-gradient(to top, rgba(0,0,0,0.1), transparent);
    pointer-events: none;
}

.location-details {
    padding: 16px;
    background: white;
}

.location-address {
    display: flex;
    align-items: flex-start;
    gap: 8px;
}

.address-info {
    flex: 1;
    min-width: 0;
}

.address-main {
    font-weight: 600;
    color: #1C1C1E;
    font-size: 16px;
    line-height: 1.4;
    margin-bottom: 6px;
    word-wrap: break-word;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.address-accuracy {
    font-size: 12px;
    color: #6b7280;
    display: flex;
    align-items: center;
    gap: 4px;
}

.address-accuracy::before {
    content: "üìç";
    font-size: 10px;
}

.location-actions {
    padding: 12px 16px 16px 16px;
    background: #f9fafb;
    display: flex;
    gap: 8px;
}

.location-action-btn {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 10px 12px;
    border: none;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    text-decoration: none;
}

.directions-btn {
    background: #007AFF;
    color: white;
}

.directions-btn:hover {
    background: #0056CC;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 122, 255, 0.25);
}

.view-btn {
    background: #F2F2F7;
    color: #3C3C43;
    border: 1px solid #E5E5EA;
}

.view-btn:hover {
    background: #E5E5EA;
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(60, 60, 67, 0.1);
}

/* Location hover effect */
.location-map-preview:hover .location-marker-pin {
    transform: scale(1.1);
}

/* Pulse animation for location pin */
@keyframes locationPulse {
    0% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.05);
        opacity: 0.8;
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

/* Dark theme adjustments for location */
@media (prefers-color-scheme: dark) {
    .message-location {
        background: #2c2c2c;
        border-color: #444;
    }
    
    .location-details {
        border-color: #444;
    }
    
    .location-text {
        color: #e0e0e0;
    }
    
    .location-actions {
        background: #333;
    }
}

/* vigichat-style checkmarks */
.checkmark {
    font-family: 'Arial', sans-serif;
    font-weight: bold;
    font-size: 14px;
    line-height: 1;
    display: inline-block;
    transition: color 0.3s ease;
}

.checkmark.single {
    color: #9ca3af !important; /* Gray for sent */
}

.checkmark.double {
    color: #9ca3af !important; /* Gray for delivered */
    letter-spacing: -3px; /* Closer overlap for double checkmarks */
}

.checkmark.double.read {
    color: #00bfff !important; /* Bright blue for read */
}

/* Animation for status changes */
.message-status .checkmark {
    animation: checkmarkAppear 0.3s ease-out;
}

@keyframes checkmarkAppear {
    0% {
        opacity: 0;
        transform: scale(0.8);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

/* Additional checkmark styles to ensure proper display */
.message-status .checkmark.single {
    color: #9ca3af !important;
}

.message-status .checkmark.double {
    color: #9ca3af !important;
    letter-spacing: -3px !important;
}

.message-status .checkmark.double.read {
    color: #00bfff !important;
}

/* Online status indicator */
.contact-avatar-container {
    position: relative;
    display: inline-block;
}

.status-indicator {
    position: absolute;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    border: 2px solid white;
    bottom: 2px;
    right: 2px;
    transition: background-color 0.3s ease;
}

.status-indicator.online {
    background-color: #10b981; /* Green for online */
}

.status-indicator.offline {
    background-color: #9ca3af; /* Gray for offline */
}

.status-indicator.away {
    background-color: #f59e0b; /* Yellow for away */
}

.status-indicator.busy {
    background-color: #ef4444; /* Red for busy */
}

/* Enhanced typing indicator */
.typing-indicator {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #10b981;
    font-size: 14px;
    transition: all 0.3s ease;
}

.typing-indicator.typing-active {
    animation: typingPulse 1.5s ease-in-out infinite;
}

.typing-dots {
    display: flex;
    gap: 2px;
}

.typing-dots span {
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background-color: #10b981;
    animation: typingDots 1.4s infinite;
}

.typing-dots span:nth-child(2) {
    animation-delay: 0.2s;
}

.typing-dots span:nth-child(3) {
    animation-delay: 0.4s;
}

@keyframes typingDots {
    0%, 60%, 100% {
        transform: translateY(0);
        opacity: 0.5;
    }
    30% {
        transform: translateY(-8px);
        opacity: 1;
    }
}

@keyframes typingPulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.7;
    }
}

/* vigichat-style status updates */
.message.sending .message-status {
    opacity: 0.7;
}

.message.sent .message-status {
    opacity: 1;
}

.message.delivered .message-status {
    opacity: 1;
}

.message.read .message-status {
    opacity: 1;
}
.sr-only { 
    position: absolute; 
    width: 1px; 
    height: 1px; 
    padding: 0; 
    margin: -1px; 
    overflow: hidden; 
    clip: rect(0, 0, 0, 0); 
    border: 0; 
}

/* Loading Screen */
.loading-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
}

.loading-content {
    text-align: center;
    color: white;
}

.loading-logo {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    margin-bottom: 2rem;
    font-size: 2rem;
    font-weight: 600;
}

.loading-logo i {
    font-size: 3rem;
    color: white;
    animation: pulse 2s infinite;
    font-weight: 900;
    text-shadow: 0 2px 4px rgba(0,0,0,0.3);
}

/* Ensure FontAwesome icons load properly */
.loading-logo i {
    font-weight: 900;
    text-shadow: 0 2px 4px rgba(0,0,0,0.3);
}

.loading-spinner {
    width: 40px;
    height: 40px;
    border: 3px solid rgba(255, 255, 255, 0.3);
    border-top: 3px solid white;
    border-radius: 50%;
    margin: 0 auto 1rem;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

/* Location marker animations */
@keyframes locationPulse {
    0% {
        transform: scale(1);
        box-shadow: 0 6px 20px rgba(0,122,255,0.4);
    }
    50% {
        transform: scale(1.05);
        box-shadow: 0 8px 25px rgba(0,122,255,0.6);
    }
    100% {
        transform: scale(1);
        box-shadow: 0 6px 20px rgba(0,122,255,0.4);
    }
}

@keyframes locationRipple {
    0% {
        transform: scale(1);
        opacity: 0.8;
    }
    100% {
        transform: scale(2.5);
        opacity: 0;
    }
}

/* Location message styles */
.message-location {
    max-width: 300px;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    background: white;
}

.location-map-preview {
    cursor: pointer;
    transition: transform 0.2s ease;
}

.location-map-preview:hover {
    transform: scale(1.02);
}

.location-details {
    padding: 12px 16px;
    background: white;
    border-top: 1px solid #f0f0f0;
}

.location-address {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    margin-bottom: 12px;
}

.address-info {
    flex: 1;
}

.location-actions {
    display: flex;
    gap: 8px;
    padding: 0 16px 16px 16px;
    background: white;
}

.location-action-btn {
    flex: 1;
    padding: 10px 14px;
    border-radius: 10px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    border: none;
    outline: none;
}

.location-action-btn:active {
    transform: scale(0.98);
}

/* Primary button (C√≥mo llegar) */
.location-action-btn.primary {
    background: linear-gradient(135deg, #007AFF 0%, #0056CC 100%);
    color: white;
    box-shadow: 0 2px 8px rgba(0, 122, 255, 0.3);
}

.location-action-btn.primary:hover {
    background: linear-gradient(135deg, #0056CC 0%, #004299 100%);
    box-shadow: 0 4px 12px rgba(0, 122, 255, 0.4);
    transform: translateY(-1px);
}

/* Secondary button (Ver en Maps) */
.location-action-btn.secondary {
    background: rgba(0, 122, 255, 0.1);
    color: #007AFF;
    border: 1px solid rgba(0, 122, 255, 0.3);
}

.location-action-btn.secondary:hover {
    background: rgba(0, 122, 255, 0.15);
    border-color: #007AFF;
    transform: translateY(-1px);
}

.location-action-btn i {
    font-size: 12px;
}

.location-action-btn span {
    font-weight: 600;
}

.map-overlay-gradient {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 60px;
    background: linear-gradient(transparent, rgba(0,0,0,0.1));
    pointer-events: none;
}

/* Conversation Search Functionality */
.conversation-search-container {
    position: absolute;
    right: 140px; /* Positioned to the left of the search button */
    top: 50%;
    transform: translateY(-50%);
    background: white;
    border-radius: 24px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    border: 1px solid var(--gray-200);
    display: flex;
    align-items: center;
    padding: 0;
    opacity: 0;
    visibility: hidden;
    width: 0;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 1000;
    overflow: hidden;
}

.conversation-search-container.active {
    opacity: 1;
    visibility: visible;
    width: 300px;
    padding: 4px;
    margin-top: -330px;
    margin-right: 6px;
}

/* Mobile conversation search bar */
.conversation-search-mobile {
    display: none;
    background: var(--bg-primary);
    border-bottom: 1px solid var(--border-light);
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    padding: 0;
    z-index: 199;
    position: fixed;
    top: 60px; /* Below fixed header */
    left: 0;
    right: 0;
    opacity: 0;
    height: 0;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.conversation-search-mobile.active {
    opacity: 1;
    height: 60px;
    padding: 12px 16px;
}

/* Mobile conversation search input wrapper */
.conversation-search-mobile .conversation-search-input-wrapper {
    display: flex;
    align-items: center;
    flex: 1;
    position: relative;
    background: var(--gray-100);
    border-radius: 20px;
    padding: 8px 16px;
    margin-right: 12px;
}

.conversation-search-mobile #conversation-search-input-mobile {
    flex: 1;
    border: none;
    outline: none;
    background: transparent;
    font-size: 16px;
    color: var(--text-primary);
}

.conversation-search-mobile .conversation-search-results-info {
    font-size: 12px;
    color: var(--text-secondary);
    margin: 0 8px;
    min-width: 40px;
    text-align: center;
}

.conversation-search-mobile .conversation-search-navigation {
    display: flex;
    gap: 4px;
}

.conversation-search-mobile .conversation-search-nav-btn {
    background: var(--primary-color);
    border: none;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    transition: all 0.2s ease;
}

.conversation-search-mobile .conversation-search-nav-btn:hover {
    background: var(--primary-dark);
    transform: scale(1.05);
}

.conversation-search-mobile .conversation-search-nav-btn:disabled {
    background: var(--gray-300);
    cursor: not-allowed;
    transform: none;
}

.conversation-search-mobile .conversation-search-close-btn {
    background: var(--error-color);
    border: none;
    border-radius: 50%;
    width: 36px;
    height: 36px;
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    transition: all 0.2s ease;
}

.conversation-search-mobile .conversation-search-close-btn:hover {
    background: #dc2626;
    transform: scale(1.05);
}

/* Mobile styles for conversation search */
@media (max-width: 768px) {
    .conversation-search-container {
        display: none !important;
    }
    
    .conversation-search-mobile {
        display: flex;
        align-items: center;
    }
    
    /* Adjust messages container when search is active */
    .conversation-search-mobile.active ~ .messages-container {
        padding-top: 60px;
    }
}

/* Desktop styles - show desktop version, hide mobile */
@media (min-width: 769px) {
    .conversation-search-mobile {
        display: none !important;
    }
    
    .conversation-search-container {
        display: flex;
    }
}

/* ============ CALL INTERFACE STYLES ============ */

.call-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
    z-index: 10000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.call-modal.active {
    display: flex;
    opacity: 1;
    visibility: visible;
}

.call-container {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
}

/* Call Header */
.call-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 2rem 2rem 1rem;
    background: rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(10px);
    z-index: 10001;
}

.call-contact-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.call-avatar {
    position: relative;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    overflow: hidden;
    border: 3px solid rgba(255, 255, 255, 0.3);
}

.call-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.call-status-indicator {
    position: absolute;
    bottom: 2px;
    right: 2px;
    width: 16px;
    height: 16px;
    background: var(--success-color);
    border: 2px solid white;
    border-radius: 50%;
    animation: pulse 2s infinite;
}

.call-details {
    color: white;
}

.call-contact-name {
    font-size: 1.5rem;
    font-weight: 600;
    margin: 0;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.call-status {
    font-size: 1rem;
    opacity: 0.8;
    margin: 0.25rem 0 0;
}

.call-duration {
    background: rgba(0, 0, 0, 0.3);
    padding: 0.5rem 1rem;
    border-radius: 20px;
    color: white;
    font-weight: 500;
    font-family: 'Courier New', monospace;
    font-size: 1.1rem;
    backdrop-filter: blur(10px);
}

/* Video Container */
.call-video-container {
    flex: 1;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}

.remote-video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    background: rgba(0, 0, 0, 0.2);
}

.local-video {
    position: absolute;
    top: 2rem;
    right: 2rem;
    width: 150px;
    height: 200px;
    border-radius: 12px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    object-fit: cover;
    background: rgba(0, 0, 0, 0.5);
    z-index: 10001;
    transition: all 0.3s ease;
}

.local-video:hover {
    transform: scale(1.05);
    border-color: rgba(255, 255, 255, 0.5);
}

/* Audio Call Display */
.audio-call-display {
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    text-align: center;
}

.audio-call-display.active {
    display: flex;
}

.audio-avatar {
    position: relative;
    width: 200px;
    height: 200px;
    border-radius: 50%;
    overflow: hidden;
    border: 4px solid rgba(255, 255, 255, 0.3);
    margin-bottom: 2rem;
}

.audio-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.audio-wave-animation {
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 4px;
}

.wave {
    width: 4px;
    height: 20px;
    background: white;
    border-radius: 2px;
    animation: wave 1.5s ease-in-out infinite;
}

.wave:nth-child(2) {
    animation-delay: 0.1s;
}

.wave:nth-child(3) {
    animation-delay: 0.2s;
}

/* Call Controls */
.call-controls {
    padding: 2rem;
    background: rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(20px);
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    align-items: center;
}

.call-controls-row {
    display: flex;
    gap: 1.5rem;
    align-items: center;
    justify-content: center;
}

.call-action-row {
    display: flex;
    justify-content: center;
}

.call-control-btn {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(10px);
    position: relative;
    overflow: hidden;
}

.call-control-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    transition: all 0.3s ease;
    z-index: -1;
}

.call-control-btn:hover::before {
    background: rgba(255, 255, 255, 0.2);
    transform: scale(1.1);
}

.call-control-btn:active {
    transform: scale(0.95);
}

/* Specific button styles */
.audio-btn, .video-btn, .switch-btn, .speaker-btn {
    background: rgba(255, 255, 255, 0.15);
    color: white;
    border: 2px solid rgba(255, 255, 255, 0.3);
}

.audio-btn.muted {
    background: var(--error-color);
    color: white;
    border-color: var(--error-color);
}

.video-btn.disabled {
    background: var(--error-color);
    color: white;
    border-color: var(--error-color);
}

.speaker-btn.active {
    background: var(--success-color);
    color: white;
    border-color: var(--success-color);
}

.end-call-btn {
    width: 80px;
    height: 80px;
    background: var(--error-color);
    color: white;
    font-size: 2rem;
    border: 3px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 8px 25px rgba(239, 68, 68, 0.4);
}

.end-call-btn:hover {
    background: #dc2626;
    transform: scale(1.05);
    box-shadow: 0 12px 35px rgba(239, 68, 68, 0.5);
}

/* Incoming Call Interface */
.incoming-call-interface {
    display: none;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    z-index: 10002;
}

.incoming-call-interface.active {
    display: flex;
}

.incoming-call-info {
    margin-bottom: 3rem;
}

.incoming-call-avatar {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    overflow: hidden;
    margin: 0 auto 2rem;
    border: 4px solid rgba(255, 255, 255, 0.3);
    animation: pulse 2s infinite;
}

.incoming-call-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.incoming-contact-name {
    font-size: 2rem;
    font-weight: 700;
    color: white;
    margin: 0 0 0.5rem;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.incoming-call-type {
    font-size: 1.2rem;
    color: rgba(255, 255, 255, 0.8);
    margin: 0;
}

.incoming-call-actions {
    display: flex;
    gap: 4rem;
    align-items: center;
}

.incoming-call-btn {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    border: 3px solid rgba(255, 255, 255, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(10px);
}

.decline-btn {
    background: var(--error-color);
    color: white;
}

.decline-btn:hover {
    background: #dc2626;
    transform: scale(1.1);
    box-shadow: 0 12px 35px rgba(239, 68, 68, 0.5);
}

.accept-btn {
    background: var(--success-color);
    color: white;
}

.accept-btn:hover {
    background: #059669;
    transform: scale(1.1);
    box-shadow: 0 12px 35px rgba(16, 185, 129, 0.5);
}

/* Animations */
@keyframes pulse {
    0%, 100% {
        opacity: 1;
        transform: scale(1);
    }
    50% {
        opacity: 0.8;
        transform: scale(1.05);
    }
}

@keyframes wave {
    0%, 100% {
        height: 20px;
        opacity: 0.5;
    }
    50% {
        height: 40px;
        opacity: 1;
    }
}

/* Mobile Responsive Design */
@media (max-width: 768px) {
    .call-header {
        padding: 1rem 1rem 0.5rem;
        flex-direction: column;
        gap: 1rem;
        text-align: center;
    }
    
    .call-contact-info {
        flex-direction: column;
        gap: 0.5rem;
    }
    
    .call-avatar {
        width: 80px;
        height: 80px;
    }
    
    .call-contact-name {
        font-size: 1.3rem;
    }
    
    .local-video {
        width: 120px;
        height: 160px;
        top: 1rem;
        right: 1rem;
    }
    
    .audio-avatar {
        width: 150px;
        height: 150px;
    }
    
    .call-controls {
        padding: 1rem;
        gap: 1rem;
    }
    
    .call-controls-row {
        gap: 1rem;
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .call-control-btn {
        width: 50px;
        height: 50px;
        font-size: 1.2rem;
    }
    
    .end-call-btn {
        width: 70px;
        height: 70px;
        font-size: 1.8rem;
    }
    
    .incoming-call-avatar {
        width: 120px;
        height: 120px;
        margin-bottom: 1.5rem;
    }
    
    .incoming-contact-name {
        font-size: 1.5rem;
    }
    
    .incoming-call-actions {
        gap: 3rem;
    }
    
    .incoming-call-btn {
        width: 70px;
        height: 70px;
        font-size: 1.8rem;
    }
}

@media (max-width: 480px) {
    .call-controls-row {
        gap: 0.5rem;
    }
    
    .call-control-btn {
        width: 45px;
        height: 45px;
        font-size: 1rem;
    }
    
    .end-call-btn {
        width: 60px;
        height: 60px;
        font-size: 1.5rem;
    }
    
    .incoming-call-actions {
        gap: 2rem;
    }
    
    .incoming-call-btn {
        width: 60px;
        height: 60px;
        font-size: 1.5rem;
    }
}

/* Dark theme support */
[data-theme="dark"] .call-modal {
    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
}

/* ============ WHATSAPP-STYLE CALL ANIMATIONS ============ */
@keyframes ripple {
    0% {
        transform: scale(0);
        opacity: 1;
    }
    100% {
        transform: scale(4);
        opacity: 0;
    }
}

@keyframes pulse {
    0% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7);
    }
    50% {
        transform: scale(1.05);
        box-shadow: 0 0 0 15px rgba(37, 211, 102, 0);
    }
    100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(37, 211, 102, 0);
    }
}

@keyframes incomingCallPulse {
    0% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7);
    }
    50% {
        transform: scale(1.1);
        box-shadow: 0 0 0 20px rgba(37, 211, 102, 0);
    }
    100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(37, 211, 102, 0);
    }
}

@keyframes buttonFeedback {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(0.95);
    }
    100% {
        transform: scale(1);
    }
}

/* Enhanced call control buttons */
.call-control-btn {
    position: relative;
    overflow: hidden;
    transition: all 0.2s cubic-bezier(0.4, 0.0, 0.2, 1);
}

.call-control-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
}

.call-control-btn:active {
    transform: translateY(0);
    transition: all 0.1s ease;
}

/* Avatar animations */
.call-contact-avatar,
.audio-contact-avatar,
#incoming-contact-avatar {
    transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
}

.call-contact-avatar.connecting,
.audio-contact-avatar.connecting {
    animation: pulse 2s infinite;
}

/* Button state improvements */
.call-control-btn.muted {
    background: rgba(244, 67, 54, 0.9) !important;
    animation: buttonFeedback 0.2s ease;
}

.call-control-btn.disabled {
    background: rgba(158, 158, 158, 0.9) !important;
    animation: buttonFeedback 0.2s ease;
}

.call-control-btn.active {
    background: var(--primary) !important;
    animation: buttonFeedback 0.2s ease;
}

/* ============ CALL HISTORY STYLES ============ */

.call-date-group {
    padding: 1rem 1rem 0.5rem;
}

.date-header {
    text-align: center;
    margin-bottom: 0.5rem;
}

.date-text {
    background: var(--gray-100);
    color: var(--text-secondary);
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 500;
}

.call-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 1rem;
    border-radius: 12px;
    margin: 0.25rem 1rem;
    background: var(--bg-primary);
    border: 1px solid var(--border-light);
    cursor: pointer;
    transition: all 0.2s ease;
}

.call-item:hover {
    background: var(--gray-50);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

.call-contact-info {
    display: flex;
    align-items: center;
    flex: 1;
    gap: 0.75rem;
}

.call-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    overflow: hidden;
    border: 2px solid var(--border-light);
}

.call-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.call-details {
    flex: 1;
    min-width: 0;
}

.call-contact-name {
    font-weight: 600;
    font-size: 1rem;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.call-info {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
}

.call-direction {
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.call-direction i {
    font-size: 0.8rem;
}

.call-direction.incoming i {
    color: var(--success-color);
    transform: rotate(135deg);
}

.call-direction.outgoing i {
    color: var(--primary-color);
    transform: rotate(-45deg);
}

.call-direction.missed i {
    color: var(--error-color);
}

.call-duration-text {
    color: var(--text-tertiary);
    font-size: 0.8rem;
}

.call-actions {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex-shrink: 0;
}

.call-time {
    font-size: 0.8rem;
    color: var(--text-tertiary);
    white-space: nowrap;
}

.call-action-btn {
    width: 40px;
    height: 40px;
    border: none;
    border-radius: 50%;
    background: var(--primary-color);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 0.9rem;
}

.call-action-btn:hover {
    background: var(--primary-dark);
    transform: scale(1.05);
}

.call-action-btn:active {
    transform: scale(0.95);
}

.empty-calls-state {
    text-align: center;
    padding: 3rem 2rem;
    color: var(--text-tertiary);
}

.empty-calls-state i {
    font-size: 3rem;
    margin-bottom: 1rem;
    opacity: 0.5;
}

.empty-calls-state h4 {
    font-size: 1.2rem;
    margin-bottom: 0.5rem;
    color: var(--text-secondary);
}

.empty-calls-state p {
    font-size: 0.9rem;
    max-width: 300px;
    margin: 0 auto;
    line-height: 1.5;
}

/* Mobile responsive */
@media (max-width: 768px) {
    .call-item {
        margin: 0.25rem 0.5rem;
        padding: 0.5rem 0.75rem;
    }
    
    .call-avatar {
        width: 40px;
        height: 40px;
    }
    
    .call-contact-name {
        font-size: 0.9rem;
    }
    
    .call-info {
        font-size: 0.8rem;
    }
    
    .call-action-btn {
        width: 36px;
        height: 36px;
        font-size: 0.8rem;
    }
    
    .call-actions {
        gap: 0.5rem;
    }
    
    .date-text {
        font-size: 0.75rem;
        padding: 0.2rem 0.6rem;
    }
    
    .empty-calls-state {
        padding: 2rem 1rem;
    }
    
    .empty-calls-state i {
        font-size: 2.5rem;
    }
}

/* Dark theme support for call history */
[data-theme="dark"] .call-item {
    background: var(--bg-dark-secondary);
    border-color: #334155;
}

[data-theme="dark"] .call-item:hover {
    background: #475569;
}

[data-theme="dark"] .call-contact-name {
    color: var(--text-dark);
}

[data-theme="dark"] .date-text {
    background: #334155;
    color: var(--text-dark-secondary);
}

[data-theme="dark"] .empty-calls-state {
    color: var(--text-dark-secondary);
}

[data-theme="dark"] .empty-calls-state h4 {
    color: var(--text-dark);
}

/* ============ CALL MESSAGE STYLES IN CONVERSATION ============ */

.call-message {
    background: var(--bg-secondary);
    border: 1px solid var(--border-light);
    border-radius: 12px;
    padding: 12px 16px;
    margin: 8px 0;
    display: flex;
    align-items: center;
    gap: 12px;
    max-width: 280px;
    font-size: 0.9rem;
}

.call-message.sent {
    background: var(--message-sent-bg);
    border-color: var(--primary-color);
    margin-left: auto;
    margin-right: 16px;
}

.call-message.received {
    background: var(--message-received-bg);
    border-color: var(--border-light);
    margin-left: 16px;
    margin-right: auto;
}

.call-message-icon {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    flex-shrink: 0;
}

.call-message-icon.outgoing {
    background: var(--primary-color);
    color: white;
}

.call-message-icon.incoming {
    background: var(--success-color);
    color: white;
}

.call-message-icon.missed {
    background: var(--error-color);
    color: white;
}

.call-message-icon.declined {
    background: var(--error-color);
    color: white;
}

.call-message-content {
    flex: 1;
    min-width: 0;
}

.call-message-type {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 2px;
    display: flex;
    align-items: center;
    gap: 6px;
}

.call-message-type i {
    font-size: 12px;
}

.call-message-status {
    font-size: 0.8rem;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    gap: 4px;
}

.call-message-duration {
    font-size: 0.75rem;
    color: var(--text-tertiary);
    margin-top: 2px;
}

.call-message-actions {
    display: flex;
    gap: 8px;
}

.call-message-action-btn {
    width: 28px;
    height: 28px;
    border: none;
    border-radius: 50%;
    background: var(--primary-color);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 11px;
}

.call-message-action-btn:hover {
    background: var(--primary-dark);
    transform: scale(1.05);
}

.call-message-action-btn.video {
    background: var(--secondary-color);
}

.call-message-action-btn.video:hover {
    background: #0891b2;
}

/* Call message states */
.call-message.calling .call-message-status {
    color: var(--warning-color);
}

.call-message.answered .call-message-status {
    color: var(--success-color);
}

.call-message.missed .call-message-status,
.call-message.declined .call-message-status {
    color: var(--error-color);
}

.call-message.ended .call-message-status {
    color: var(--text-secondary);
}

/* Mobile responsive */
@media (max-width: 768px) {
    .call-message {
        max-width: 260px;
        padding: 10px 12px;
        font-size: 0.85rem;
    }
    
    .call-message-icon {
        width: 28px;
        height: 28px;
        font-size: 12px;
    }
    
    .call-message-action-btn {
        width: 24px;
        height: 24px;
        font-size: 10px;
    }
}

/* Dark theme support */
[data-theme="dark"] .call-message {
    background: var(--bg-dark-secondary);
    border-color: #334155;
}

[data-theme="dark"] .call-message.sent {
    background: #3730a3;
    border-color: var(--primary-color);
}

[data-theme="dark"] .call-message.received {
    background: #1e293b;
    border-color: #334155;
}

[data-theme="dark"] .call-message-type {
    color: var(--text-dark);
}

[data-theme="dark"] .call-message-status {
    color: var(--text-dark-secondary);
}

.conversation-search-input-wrapper {
    display: flex;
    align-items: center;
    flex: 1;
    position: relative;
}

#conversation-search-input {
    flex: 1;
    border: none;
    outline: none;
    padding: 8px 12px;
    font-size: 14px;
    background: transparent;
    color: var(--text-primary);
    min-width: 0;
}

#conversation-search-input::placeholder {
    color: var(--gray-400);
}

.conversation-search-results-info {
    font-size: 12px;
    color: var(--gray-500);
    white-space: nowrap;
    margin-right: 8px;
    min-width: 40px;
    text-align: center;
}

.conversation-search-navigation {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.conversation-search-nav-btn {
    width: 20px;
    height: 16px;
    border: none;
    background: transparent;
    color: var(--gray-500);
    cursor: pointer;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.conversation-search-nav-btn:hover {
    background: var(--gray-100);
    color: var(--primary-color);
}

.conversation-search-nav-btn:disabled {
    color: var(--gray-300);
    cursor: not-allowed;
}

.conversation-search-nav-btn i {
    font-size: 10px;
}

.conversation-search-close-btn {
    width: 28px;
    height: 28px;
    border: none;
    background: var(--gray-100);
    color: var(--gray-600);
    cursor: pointer;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    margin-left: 4px;
    flex-shrink: 0;
}

.conversation-search-close-btn:hover {
    background: var(--gray-200);
    color: var(--gray-800);
}

.conversation-search-close-btn i {
    font-size: 12px;
}

/* Message highlighting for search results */
.message-text .search-highlight {
    background: linear-gradient(120deg, #ffeb3b 0%, #ffc107 100%);
    color: #333;
    padding: 2px 4px;
    border-radius: 3px;
    font-weight: 600;
    box-shadow: 0 1px 3px rgba(255, 193, 7, 0.3);
}

.message-text .search-highlight.current {
    background: linear-gradient(120deg, #ff5722 0%, #f44336 100%);
    color: white;
    animation: searchPulse 1s ease-in-out;
}

@keyframes searchPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

/* Search result message highlighting */
.message.search-result-message {
    animation: messageHighlight 2s ease-in-out;
    background: rgba(0, 122, 255, 0.1);
    border-radius: 12px;
    transition: background-color 2s ease-out;
}

@keyframes messageHighlight {
    0% { background: rgba(0, 122, 255, 0.2); }
    50% { background: rgba(0, 122, 255, 0.1); }
    100% { background: transparent; }
}



/* Keyboard shortcuts info (optional) */
.search-shortcuts {
    position: absolute;
    bottom: -25px;
    right: 0;
    font-size: 10px;
    color: var(--gray-400);
    white-space: nowrap;
}

/* Better focus styles */
#conversation-search-input:focus {
    outline: none;
    background: rgba(0, 122, 255, 0.05);
    border-radius: 8px;
}

/* Search loading state (if needed for future async search) */
.search-loading {
    position: relative;
}

.search-loading::after {
    content: '';
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    width: 16px;
    height: 16px;
    border: 2px solid var(--gray-300);
    border-top: 2px solid var(--primary-color);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

/* Auth Container */
.auth-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.auth-form {
    background: var(--bg-primary);
    border-radius: var(--radius-2xl);
    box-shadow: var(--shadow-xl);
    padding: 2rem;
    width: 90%;
    max-width: 400px;
    animation: slideInUp 0.5s ease-out;
}

.auth-header {
    text-align: center;
    margin-bottom: 2rem;
}

.auth-header .logo {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    margin-bottom: 1rem;
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--primary-color);
}

.auth-header .logo i {
    font-size: 2rem;
    font-weight: 900;
    margin-right: 0.5rem;
}

/* FontAwesome logo icons styling */
.auth-header .logo i {
    font-weight: 900 !important;
    margin-right: 0.5rem;
}

.auth-header h2 {
    color: var(--text-primary);
    margin-bottom: 0.5rem;
    font-size: 1.5rem;
    font-weight: 600;
}

.auth-header p {
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.form-group {
    position: relative;
    margin-bottom: 1rem;
}

.form-group input,
.form-group textarea {
    width: 100%;
    padding: 0.75rem 3rem 0.75rem 2.5rem;
    border: 2px solid var(--border-light);
    border-radius: var(--radius-lg);
    font-size: 0.9rem;
    transition: var(--transition-fast);
    background: var(--bg-primary);
    color: var(--text-primary);
}

.form-group input[type="password"] + .password-toggle,
.form-group input[type="text"] + .password-toggle {
    padding: 0.75rem 3rem 0.75rem 2.5rem;
}

.form-group input:focus,
.form-group textarea:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
}

.form-group i {
    position: absolute;
    left: 0.75rem;
    top: 0.75rem;
    color: var(--text-tertiary);
    font-size: 1rem;
    z-index: 1;
}



.password-toggle{
    position: absolute;
    right: 0.5rem;
    top: 37%;
    transform: translateY(-50%); /* Center vertically relative to input field */
    background: none !important;
    border: none !important;
    outline: none !important; /* Remove focus outline */
    color: var(--text-tertiary);
    cursor: pointer;
    font-size: 1rem;
    width: 2.5rem;
    height: 2.5rem;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition-fast), opacity 0.3s ease, visibility 0.3s ease;
    z-index: 10;
    opacity: 0; /* Oculto por defecto */
    visibility: hidden; /* Completamente oculto */
}

/* Mostrar toggle cuando el form-group tiene contenido */
.form-group.has-content .password-toggle {
    opacity: 1;
    visibility: visible;
}

.password-toggle:hover {
    color: var(--text-secondary);
    background: none !important;
    border: none !important;
}

.password-toggle:active {
    transform: translateY(-50%) scale(0.95); /* Maintain centering while scaling */
}

.password-toggle i {
    pointer-events: none;
}

/* Dark theme support for password toggle */
[data-theme="dark"] .password-toggle:hover {
    background: rgba(255, 255, 255, 0.1);
}

/* Focus styles for accessibility - removed outline */
.password-toggle:focus {
    outline: none !important;
    box-shadow: none !important;
}

/* Ensure proper spacing when password input is focused */
.form-group input[type="password"]:focus + i + .password-toggle,
.form-group input[type="text"]:focus + i + .password-toggle {
    color: var(--primary-color);
}

/* Responsive password toggle for mobile */
@media (max-width: 768px) {
    .password-toggle {
        right: 0.25rem;
        width: 3rem;
        height: 3rem;
        font-size: 1.1rem;
    }
}

/* Better visual feedback for interactive elements */
.form-group input:valid {
    border-color: var(--success-color);
}

.form-group input:invalid:not(:placeholder-shown) {
    border-color: var(--error-color);
}

/* Loading states */
.loading {
    position: relative;
    pointer-events: none;
    opacity: 0.7;
}

.loading::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 20px;
    height: 20px;
    border: 2px solid transparent;
    border-top: 2px solid var(--primary-color);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

/* Better tooltips for better UX */
[title]:hover::after {
    content: attr(title);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: var(--gray-800);
    color: white;
    padding: 0.5rem 0.75rem;
    border-radius: var(--radius-md);
    font-size: 0.8rem;
    white-space: nowrap;
    z-index: var(--z-tooltip);
    margin-bottom: 5px;
}

[title]:hover::before {
    content: "";
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 5px solid transparent;
    border-top-color: var(--gray-800);
    z-index: var(--z-tooltip);
}

/* Better status indicators */
.status-indicator {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-right: 0.5rem;
}

.status-indicator.online {
    background: var(--success-color);
    box-shadow: 0 0 6px var(--success-color);
    animation: pulse-online 2s infinite;
}

.status-indicator.offline {
    background: var(--gray-400);
}

.status-indicator.away {
    background: #ff8c00;
    border: none !important;
    border-radius: 6px !important;
    width: auto !important;
    min-width: 16px !important;
    height: 12px !important;
    padding: 0 4px !important;
}

@keyframes pulse-online {
    0%, 100% { 
        box-shadow: 0 0 6px var(--success-color); 
    }
    50% { 
        box-shadow: 0 0 12px var(--success-color); 
    }
}

.validation-indicator {
    position: absolute;
    right: 0.75rem;
    top: 0.75rem; /* Fixed position relative to input field */
    font-size: 1rem;
    z-index: 5; /* Ensure it stays above input but below password toggle */
    pointer-events: none; /* Prevent interference with input interaction */
}

.validation-indicator.valid {
    color: var(--success-color);
}

.validation-indicator.invalid {
    color: var(--error-color);
}

/* Field error styles */
.field-error {
    color: var(--error-color);
    font-size: 0.75rem;
    margin-top: 0.25rem;
    display: none;
    opacity: 0;
    transition: var(--transition-normal);
}

.field-error.show {
    display: block;
    opacity: 1;
}

.form-group.error input {
    border-color: var(--error-color);
    box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
}

.form-group.error .validation-indicator {
    color: var(--error-color);
}

.password-strength {
    margin-top: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.75rem; /* Espaciado entre barra y texto */
}

.strength-bar {
    flex: 1; /* Ocupa el espacio disponible */
    height: 4px; /* Ligeramente m√°s alta para mejor visibilidad */
    background-color: var(--border-light);
    border-radius: var(--radius-full);
    overflow: hidden;
    min-width: 100px; /* Ancho m√≠nimo para la barra */
}

.strength-bar::before {
    content: '';
    display: block;
    height: 100%;
    width: 0%;
    transition: var(--transition-normal);
    border-radius: var(--radius-full);
}

.strength-bar.weak::before {
    width: 25%;
    background-color: var(--error-color);
}

.strength-bar.fair::before {
    width: 50%;
    background-color: var(--warning-color);
}

.strength-bar.good::before {
    width: 75%;
    background-color: var(--secondary-color);
}

.strength-bar.strong::before {
    width: 100%;
    background-color: var(--success-color);
}

.strength-text {
    font-size: 0.75rem;
    color: var(--text-tertiary);
    white-space: nowrap; /* Evita que se parta en m√∫ltiples l√≠neas */
    min-width: 60px; /* Ancho m√≠nimo para el texto */
    text-align: right; /* Alinea el texto a la derecha */
    font-weight: 500; /* Un poco m√°s destacado */
}

/* Colores din√°micos del texto seg√∫n la fortaleza */
.password-strength.weak .strength-text {
    color: var(--error-color);
}

.password-strength.fair .strength-text {
    color: var(--warning-color);
}

.password-strength.good .strength-text {
    color: var(--secondary-color);
}

.password-strength.strong .strength-text {
    color: var(--success-color);
}

.auth-button {
    width: 100%;
    background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
    color: white;
    border: none;
    border-radius: var(--radius-lg);
    padding: 0.875rem 1rem;
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    transition: var(--transition-fast);
    margin-bottom: 1rem;
}

.auth-button:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-lg);
}

.auth-button:active {
    transform: translateY(0);
}

.auth-button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}

.auth-footer {
    text-align: center;
}

.auth-footer p {
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.auth-footer a {
    color: var(--primary-color);
    text-decoration: none;
    font-weight: 500;
    transition: var(--transition-fast);
}

.auth-footer a:hover {
    color: var(--primary-dark);
}

/* App Container */
.app-container {
    display: flex;
    height: 100vh;
    background: var(--bg-primary);
}

/* Sidebar */
.sidebar {
    width: 380px;
    background: var(--bg-primary);
    border-right: 1px solid var(--border-light);
    display: flex;
    flex-direction: column;
    transition: var(--transition-normal);
}

.sidebar-header {
    padding: 1rem;
    border-bottom: 1px solid var(--border-light);
    display: flex;
    align-items: center;
    gap: 1rem;
}

.user-profile {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex: 1;
    cursor: pointer;
    padding: 0.5rem;
    border-radius: var(--radius-lg);
    transition: var(--transition-fast);
}

/* Eliminado hover del perfil */

.profile-img {
    width: 40px;
    height: 40px;
    border-radius: var(--radius-full);
    object-fit: cover;
}

/* User profile layout - horizontal con notification */
.user-profile {
    display: flex;
    align-items: center;
    gap: 8px;
    position: relative;
}

/* Notification icon container - posici√≥n absoluta para no mover otros elementos */
.notification-icon-container {
    position: absolute;
    left: -45px; /* Posicionado a la izquierda del perfil */
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 1;
    visibility: visible;
    transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), 
                visibility 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 10;
}

/* Ocultar notification container cuando est√° hidden */
.notification-icon-container.hidden {
    opacity: 0;
    visibility: hidden;
    transform: translateY(-50%) scale(0.8);
}

.notification-btn {
    position: relative;
    background: none;
    border: none;
    color: var(--text-color, #ecf0f1);
    font-size: 1.1rem;
    padding: 6px;
    cursor: pointer;
    transition: color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                transform 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.notification-btn:hover {
    color: #ffffff;
    transform: scale(1.05);
}

/* ============================================
   SISTEMA 1: BADGES DE MENSAJES NO LE√çDOS
   ============================================ */
/* Badge num√©rico en campana - muestra cantidad de mensajes no le√≠dos */
.notification-btn .global-unread-badge {
    position: absolute;
    top: -2px;
    right: -2px;
    background: #ef4444; /* Rojo para notificaci√≥n global */
    color: white;
    font-size: 0.7rem;
    font-weight: 600;
    min-width: 16px;
    height: 16px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    line-height: 1;
    z-index: 10;
    border: 1px solid var(--sidebar-bg, #2c3e50);
    animation: pulse-notification 2s infinite;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    transform-origin: center;
}

.global-unread-badge.hidden {
    display: none !important;
}

@keyframes pulse-notification {
    0%, 70%, 100% {
        transform: scale(1);
    }
    35% {
        transform: scale(1.1);
    }
}

.user-info h3 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.125rem;
}

.status-container {
    display: flex;
    align-items: center;
    gap: 0.375rem;
}

.status-indicator {
    width: 8px;
    height: 8px;
    border-radius: var(--radius-full);
    border: 2px solid var(--bg-primary);
}

.status-indicator.online { background-color: var(--success-color); }
.status-indicator.away { 
    background-color: #ff8c00; 
    border: none !important; 
    border-radius: 6px !important;
    width: auto !important;
    min-width: 16px !important;
    height: 12px !important;
    padding: 0 4px !important;
}
.status-indicator.busy { background-color: var(--error-color); }
.status-indicator.offline { background-color: var(--gray-400); }

.status-text {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

/* vigichat-style status text colors (sin efectos) */
.status-text.online,
.status.online,
span.online {
    color: #25d366 !important; /* Color vigichat */
    font-weight: 400 !important; /* Peso normal como vigichat */
}

.status-container .status-text {
    font-size: 0.8rem;
    display: flex;
    align-items: center;
    gap: 0.3rem;
}

.status-container .status-text.online {
    color: #25d366 !important;
    font-weight: 400 !important;
}

/* Consistent online status across components (sin bold) */
#current-user-status.online,
#last-seen.online,
#photo-modal-status.online,
#profile-modal-status.online,
.contact-status.online,
.user-status.online {
    color: #25d366 !important;
    font-weight: 400 !important; /* Normal weight como vigichat */
    display: flex !important;
    align-items: center !important;
    gap: 0.3rem !important;
}

/* Profile modals with vigichat styling */
.profile-status-info .status-text.online,
.profile-status-info span.online {
    color: #25d366 !important;
    font-weight: 400 !important;
    display: flex !important;
    align-items: center !important;
    gap: 0.3rem !important;
}

/* Simple dots for other components (CON animaci√≥n suave) */
.status-text.online::before,
.status.online::before,
span.online::before,
#current-user-status.online::before,
.contact-status.online::before,
.user-status.online::before,
.profile-status-info .status-text.online::before,
.profile-status-info span.online::before {
    content: '' !important;
    display: inline-block !important;
    width: 5px !important;
    height: 5px !important;
    background-color: #25d366 !important; /* Color vigichat */
    border-radius: 50% !important;
    flex-shrink: 0 !important;
    animation: pulse-green 2s infinite !important; /* Animaci√≥n suave mantenida */
}

.sidebar-actions {
    display: flex;
    gap: 0.5rem;
}

.icon-btn {
    width: 36px;
    height: 36px;
    border: none;
    background: transparent !important;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: color 0.2s ease;
    font-size: 1rem;
    position: relative;
}

/* Botones de cabecera del chat sin fondo */
.chat-actions .icon-btn {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
}

.chat-actions .icon-btn:hover {
    background: transparent !important;
    color: var(--primary-color);
    transform: scale(1.1);
}

.chat-actions .icon-btn:active {
    background: transparent !important;
    transform: scale(0.95);
}

/* Acciones de chat para m√≥vil */
.mobile-chat-actions {
    display: none; /* Oculto por defecto, se muestra en m√≥vil */
    gap: 0.5rem;
}

.mobile-search-btn,
.mobile-call-btn,
.mobile-video-btn {
    width: 36px;
    height: 36px;
    border: none;
    background: transparent !important;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 1rem;
}

.mobile-search-btn:hover,
.mobile-call-btn:hover,
.mobile-video-btn:hover {
    color: var(--primary-color);
    transform: scale(1.1);
}

.mobile-search-btn:active,
.mobile-call-btn:active,
.mobile-video-btn:active {
    background: transparent !important;
    transform: scale(0.95);
}

.icon-btn:hover {
    color: var(--text-primary);
}

.icon-btn:active {
    transform: translateY(0);
}

/* Ensure FontAwesome icons are visible and properly styled */
.icon-btn i {
    font-weight: 900 !important;
    color: inherit;
    font-family: 'Font Awesome 6 Free', 'Font Awesome 6 Brands' !important;
}

/* Force FontAwesome solid weight for all fa-solid icons */
.fas, .fa-solid {
    font-weight: 900 !important;
    font-family: 'Font Awesome 6 Free' !important;
}

/* FontAwesome brand icons */
.fab, .fa-brands {
    font-weight: 400 !important;  
    font-family: 'Font Awesome 6 Brands' !important;
}

/* FontAwesome regular icons */
.far, .fa-regular {
    font-weight: 400 !important;
    font-family: 'Font Awesome 6 Free' !important;
}

/* Ensure all icons render properly */
i[class*="fa-"]:before {
    font-style: normal !important;
    font-variant: normal !important;
    text-rendering: auto !important;
    -webkit-font-smoothing: antialiased !important;
}

/* Additional FontAwesome compatibility */
.fa, .fas, .far, .fal, .fab {
    -moz-osx-font-smoothing: grayscale;
    -webkit-font-smoothing: antialiased;
    display: inline-block;
    font-style: normal;
    font-variant: normal;
    text-rendering: auto;
    line-height: 1;
}

/* Specific icon fixes */
.loading-logo .fas,
.auth-header .fas {
    font-size: inherit;
    color: inherit;
}

/* Icon button improvements */
.icon-btn .fas {
    font-size: 1rem;
    line-height: 1;
    vertical-align: middle;
}

/* Duplicado eliminado - usar el icon-btn:hover principal */

/* Main Menu Dropdown */
.main-menu-container {
    position: relative;
}

.main-menu-dropdown {
    position: absolute;
    top: 100%;
    right: 0;
    width: 220px;
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    z-index: 1000;
    padding: 0.5rem 0;
    margin-top: 0.5rem;
    opacity: 0;
    transform: translateY(-10px);
    transition: all 0.2s ease;
    pointer-events: none;
}

.main-menu-dropdown:not(.hidden) {
    opacity: 1;
    transform: translateY(0);
    pointer-events: all;
}

.menu-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    cursor: pointer;
    transition: background 0.2s ease;
    color: var(--text-primary);
}

.menu-item:hover {
    background: var(--bg-secondary);
}

.menu-item i {
    width: 16px;
    text-align: center;
    color: var(--text-secondary);
}

.menu-item span {
    font-size: 0.9rem;
    font-weight: 500;
}

.menu-divider {
    height: 1px;
    background: var(--border-color);
    margin: 0.5rem 0;
}

#logout-menu {
    color: var(--danger-color);
}

#logout-menu:hover {
    background: var(--danger-light);
}

#logout-menu i {
    color: var(--danger-color);
}

/* Search Container */
.search-container {
    padding: 1rem 1.5rem;
    position: relative;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    opacity: 1;
    transform: translateY(0);
}

.search-container.hiding {
    opacity: 0;
    transform: translateY(-10px);
    pointer-events: none;
}

.search-container.showing {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
}

.search-container input {
    width: 100%;
    padding: 0.75rem 2.5rem 0.75rem 2.5rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-full);
    font-size: 0.9rem;
    color: var(--text-primary);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    transform: translateZ(0);
}

.search-container input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1), 0 4px 12px rgba(79, 70, 229, 0.1);
    background: var(--bg-primary);
    transform: translateY(-1px);
}

.search-container input:hover:not(:focus) {
    background: var(--bg-primary);
    /* border-color: var(--border-medium); */
    transform: translateY(-1px);
}

.search-container i {
    position: absolute;
    left: 2.25rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-tertiary);
    font-size: 0.9rem;
}

.clear-search {
    position: absolute;
    right: 2.25rem;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: var(--text-tertiary);
    cursor: pointer;
    font-size: 0.9rem;
    padding: 0.25rem;
    border-radius: var(--radius-md);
    transition: var(--transition-fast);
}

.clear-search:hover {
    color: var(--text-secondary);
    background: var(--bg-tertiary);
}

/* Chat Tabs - Mobile First Design */
.chat-tabs {
    display: flex;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-light);
    position: sticky;
    top: 0;
    z-index: 10;
    flex-shrink: 0;
}

.tab-button {
    flex: 1;
    padding: 1rem 0.75rem;
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    position: relative;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    transform: translateZ(0);
    min-height: 48px;
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
}

.tab-button:hover {
    color: var(--text-primary);
    background: var(--bg-tertiary);
    transform: translateY(-1px);
}

.tab-button.active {
    color: var(--primary-color);
    background: var(--bg-primary);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(79, 70, 229, 0.1);
}

.tab-button.active::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 60%;
    height: 3px;
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    border-radius: 2px 2px 0 0;
    animation: slideInTab 0.3s ease-out;
}

@keyframes slideInTab {
    from {
        width: 0;
        opacity: 0;
    }
    to {
        width: 60%;
        opacity: 1;
    }
}

.unread-badge,
.unread-count {
    background: var(--error-color);
    color: white;
    font-size: 0.75rem;
    font-weight: 600;
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-full);
    min-width: 18px;
    height: 18px;
    text-align: center;
    line-height: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 4px rgba(239, 68, 68, 0.3);
    animation: unreadPulse 2s infinite;
}

@keyframes unreadPulse {
    0%, 100% { 
        transform: scale(1);
        box-shadow: 0 2px 4px rgba(239, 68, 68, 0.3);
    }
    50% { 
        transform: scale(1.05);
        box-shadow: 0 4px 8px rgba(239, 68, 68, 0.4);
    }
}

/* Chat Content */
.chat-content {
    flex: 1;
    overflow: hidden;
    position: relative;
}

.tab-content {
    position: absolute;
    margin-top: 0!important;
    left: 0;
    right: 0;
    bottom: 0;
    overflow-y: auto;
    opacity: 0;
    transform: translateX(10px);
    transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
    pointer-events: none;
    will-change: opacity, transform;
    backface-visibility: hidden;
    height: 100%;
    z-index: 1;
}

/* Asegurar que elementos clickeables dentro del tab-content siempre funcionen */
.tab-content .chat-item,
.tab-content .contact-item,
.tab-content .request-item,
.tab-content .chat-list,
.tab-content .contacts-list,
.tab-content .requests-list {
    pointer-events: auto !important;
    cursor: pointer !important;
    z-index: 200 !important;
}

/* Asegurar que las listas contenedoras permitan eventos */
.tab-content #chat-list,
.tab-content #contacts-list,
.tab-content #requests-list {
    pointer-events: auto !important;
    z-index: 150 !important;
}

/* Asegurar que TODOS los elementos interactivos en tab-content funcionen */
.tab-content button,
.tab-content [data-start-chat],
.tab-content [data-view-profile],
.tab-content [data-avatar-click],
.tab-content [data-contact-menu],
.tab-content .clickable,
.tab-content [role="button"] {
    pointer-events: auto !important;
    cursor: pointer !important;
    z-index: 250 !important;
}

.tab-content.active {
    opacity: 1;
    margin-top: 5px!important;
    transform: translateX(0);
    pointer-events: all !important; /* Force pointer events */
    z-index: 10; /* Ensure active tab is above others */
}

/* REGLA DE EMERGENCIA: Forzar clickeabilidad en TODOS los tab-content */
.tab-content * {
    pointer-events: auto !important;
}

/* Excepto elementos que NO deben ser clickeables */
.tab-content .background,
.tab-content .decoration,
.tab-content .spacer {
    pointer-events: none !important;
}

/* Smooth loading states for content */
.contact-skeleton {
    animation: skeletonLoading 1.5s ease-in-out infinite alternate;
}

.skeleton-avatar {
    background: linear-gradient(90deg, var(--gray-200) 25%, var(--gray-100) 50%, var(--gray-200) 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
}

.skeleton-line {
    background: linear-gradient(90deg, var(--gray-200) 25%, var(--gray-100) 50%, var(--gray-200) 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    height: 14px;
    border-radius: 4px;
    margin-bottom: 8px;
}

.skeleton-line-small {
    background: linear-gradient(90deg, var(--gray-200) 25%, var(--gray-100) 50%, var(--gray-200) 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    height: 12px;
    border-radius: 4px;
    width: 70%;
}

@keyframes shimmer {
    0% {
        background-position: -200% 0;
    }
    100% {
        background-position: 200% 0;
    }
}

@keyframes skeletonLoading {
    0% {
        opacity: 0.6;
    }
    100% {
        opacity: 1;
    }
}

/* Contact loaded animation */
.contact-loaded {
    animation: contactFadeIn 0.3s ease-out;
}

@keyframes contactFadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Chat list improvements */
.chat-item {
    will-change: opacity, transform;
    backface-visibility: hidden;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer !important;
    pointer-events: auto !important;
    z-index: 1; /* Ensure items are above other elements */
}

/* ===================================================================
   PROTECCI√ìN ULTRA-ROBUSTA DE MENSAJES
   Asegura posicionamiento correcto con colores originales
   =================================================================== */

/* Mensajes enviados por el usuario actual - DERECHA con color p√∫rpura */
.message.sent,
.message.sent.sending,
.message.sent.confirmed,
.message.sent.delivered,
.message.sent.read {
    margin-left: auto !important;
    margin-right: 12px !important;
    flex-direction: row-reverse !important;
    justify-self: flex-end !important;
    align-self: flex-end !important;
    display: flex !important;
}

/* Mensajes recibidos de otros usuarios - IZQUIERDA con color blanco */
.message.received {
    margin-left: 2rem !important;
    margin-right: auto !important;
    flex-direction: row !important;
    justify-self: flex-start !important;
    align-self: flex-start !important;
    display: flex !important;
}

/* Contenido de mensajes enviados - COLOR P√öRPURA ORIGINAL */
.message.sent .message-content,
.message.sent.sending .message-content,
.message.sent.confirmed .message-content,
.message.sent.delivered .message-content,
.message.sent.read .message-content {
    background: var(--message-sent) !important;
    color: white !important;
    border-radius: 8px 8px 0 8px !important;
}

/* Contenido de mensajes recibidos - COLOR BLANCO ORIGINAL */
.message.received .message-content {
    background: var(--message-received) !important;
    color: var(--text-primary) !important;
    border-radius: 8px 8px 8px 0 !important
}

/* Protecci√≥n extra para mensajes temporales */
.message.sent.sending {
    opacity: 0.7 !important;
}

/* Asegurar que avatares se muestren solo en mensajes recibidos */
.message.sent .message-avatar {
    display: none !important;
}

.message.received .message-avatar {
    display: block !important;
}

/* ===================================================================
   PROTECCI√ìN EXTREMA CONTRA CAMBIOS DE POSICI√ìN
   Reglas de m√°xima especificidad para evitar sobrescritura
   =================================================================== */

/* Protecci√≥n por atributo data-is-own */
.message[data-is-own="true"],
.message[data-is-own="true"].sent,
.message[data-is-own="true"].sending,
.message[data-is-own="true"].confirmed,
.message[data-is-own="true"].delivered,
.message[data-is-own="true"].read {
    margin-left: auto !important;
    margin-right: 12px !important;
    flex-direction: row-reverse !important;
    justify-self: flex-end !important;
    align-self: flex-end !important;
    display: flex !important;
}

.message[data-is-own="true"] .message-content,
.message[data-is-own="true"].sent .message-content,
.message[data-is-own="true"].sending .message-content,
.message[data-is-own="true"].confirmed .message-content,
.message[data-is-own="true"].delivered .message-content,
.message[data-is-own="true"].read .message-content {
    background: var(--message-sent) !important;
    color: white !important;
    border-radius: 8px 8px 0 8px !important;
}

/* Protecci√≥n contra clases que podr√≠an cambiar */
.message.sent:not(.received),
.message.sending:not(.received),
.message.confirmed:not(.received),
.message.delivered:not(.received),
.message.read:not(.received) {
    margin-left: auto !important;
    margin-right: 12px !important;
}

/* Protecci√≥n por especificidad extrema */
#messages-scroll .message.sent,
#messages-scroll .message.sending,
.messages-container .message.sent,
.messages-container .message.sending {
    margin-left: auto !important;
    margin-right: 2rem !important;
    flex-direction: row-reverse !important;
}

#messages-scroll .message.sent .message-content,
#messages-scroll .message.sending .message-content,
.messages-container .message.sent .message-content,
.messages-container .message.sending .message-content {
    background: var(--message-sent) !important;
    color: white !important;
}

.chat-loaded {
    animation: chatItemFadeIn 0.3s ease-out;
}

@keyframes chatItemFadeIn {
    from {
        opacity: 0;
        transform: translateY(15px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Performance optimizations */
.tab-content {
    contain: layout style paint;
}

.chat-list, .contacts-list {
    contain: layout style paint;
    transform: translateZ(0); /* Force hardware acceleration */
}

/* Reduce layout thrashing */
.chat-item, .contact-item {
    contain: layout style;
}

/* ===================================================================
   CONTADOR GLOBAL DE MENSAJES NO LE√çDOS
   =================================================================== */

.global-unread-counter {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: #22c55e;
    border-radius: 50%;
    margin-right: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: 0 2px 8px rgba(34, 197, 94, 0.3);
}

.global-unread-counter:hover {
    background: #16a34a;
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4);
}

.global-unread-counter i {
    color: white;
    font-size: 16px;
    animation: bellRing 2s infinite;
}


/* Mejoras para el badge dentro del bot√≥n de notificaci√≥n */
.notification-btn .global-unread-badge .global-unread-count {
    font-size: 0.65rem;
    font-weight: 700;
    line-height: 1;
}

.global-unread-count {
    position: absolute;
    top: -6px;
    right: -6px;
    background: #ef4444;
    color: white;
    font-size: 12px;
    font-weight: 600;
    min-width: 20px;
    height: 20px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 6px;
    border: 2px solid var(--bg-secondary);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

@keyframes bellRing {
    0%, 50%, 100% {
        transform: rotate(0deg);
    }
    10%, 30% {
        transform: rotate(-10deg);
    }
    20% {
        transform: rotate(10deg);
    }
}

/* Animaci√≥n de pulso para el contador global */
@keyframes pulseGlow {
    0% { 
        box-shadow: 0 2px 8px rgba(34, 197, 94, 0.3); 
    }
    50% { 
        box-shadow: 0 4px 16px rgba(34, 197, 94, 0.6); 
    }
    100% { 
        box-shadow: 0 2px 8px rgba(34, 197, 94, 0.3); 
    }
}

.pulse-animation {
    animation: pulseGlow 0.6s ease-in-out;
}

/* ===================================================================
   CONTADORES INDIVIDUALES EN CHAT ITEMS (MEJORADOS)
   =================================================================== */

.unread-badge-messenger {
    background: #22c55e !important;
    color: white !important;
    font-size: 12px !important;
    font-weight: 600 !important;
    min-width: 20px !important;
    height: 20px !important;
    border-radius: 10px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 0 6px !important;
    box-shadow: 0 2px 4px rgba(34, 197, 94, 0.3) !important;
    animation: unreadPulse 2s infinite !important;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    transform-origin: center !important;
}

.unread-count {
    background: #22c55e !important;
    color: white !important;
    font-size: 12px !important;
    font-weight: 600 !important;
    min-width: 18px !important;
    height: 18px !important;
    border-radius: 9px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 0 5px !important;
    box-shadow: 0 2px 4px rgba(34, 197, 94, 0.3) !important;
}

@keyframes unreadPulse {
    0%, 100% {
        transform: scale(1);
        box-shadow: 0 2px 4px rgba(34, 197, 94, 0.3);
    }
    50% {
        transform: scale(1.05);
        box-shadow: 0 4px 8px rgba(34, 197, 94, 0.5);
    }
}

/* Contacts Header */
.contacts-header {
    padding: 1rem 1.5rem 0.5rem;
    border-bottom: 1px solid var(--border-light);
    background: var(--bg-primary);
    display: block;
    position: relative;
    z-index: 1;
}

.contacts-search-row {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.contacts-search-container {
    flex: 1;
    position: relative;
    display: flex;
    align-items: center;
}

.contacts-search-container i {
    position: absolute;
    left: 0.75rem;
    color: var(--text-tertiary);
    font-size: 0.875rem;
    z-index: 1;
}

.contacts-search-container input {
    width: 100%;
    padding: 0.5rem 0.75rem 0.5rem 2.25rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-full);
    font-size: 0.875rem;
    color: var(--text-primary);
    transition: var(--transition-fast);
}

.contacts-search-container input:focus {
    outline: none;
    border-color: var(--primary-color);
    background: var(--bg-primary);
    box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
}

.add-contact-btn-small {
    background: var(--primary-color);
    color: white;
    border: none;
    width: 40px;
    height: 32px;
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition-fast);
    font-size: 14px;
    flex-shrink: 0;
}

.add-contact-btn-small:hover {
    background: var(--primary-dark);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

.add-contact-btn-small:active {
    transform: translateY(0);
    box-shadow: var(--shadow-sm);
}

.chat-list,
.contacts-list,
.requests-list {
    padding: 0.5rem 0;
}

/* Chat Item */
.chat-item,
.contact-item,
.request-item {
    padding: 0.875rem 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.875rem;
    cursor: pointer !important; /* Force pointer cursor */
    transition: var(--transition-fast);
    position: relative;
    border-left: 3px solid transparent;
    pointer-events: auto !important; /* Ensure events are not blocked */
    z-index: 100; /* Above tab-content */
}

.chat-item:hover,
.contact-item:hover,
.request-item:hover {
    background: var(--bg-tertiary);
}

.chat-item.active {
    background: linear-gradient(90deg, rgba(59, 130, 246, 0.08) 0%, var(--bg-primary) 100%);
    border-left: 4px solid var(--primary-color);
    border-left-color: var(--primary-color);
    position: relative;
    transition: all 0.3s ease;
}

/* Dark theme support for active chat item */
[data-theme="dark"] .chat-item.active {
    background: linear-gradient(90deg, rgba(59, 130, 246, 0.12) 0%, var(--bg-primary) 100%);
    border-left-color: var(--primary-color);
}

/* Dark theme support for contacts header */
[data-theme="dark"] .contacts-header {
    background: var(--bg-primary);
    border-bottom-color: var(--border-light);
}

[data-theme="dark"] .contacts-search-container input {
    background: var(--bg-tertiary);
    border-color: var(--border-light);
    color: var(--text-primary);
}

[data-theme="dark"] .contacts-search-container input:focus {
    background: var(--bg-primary);
    border-color: var(--primary-color);
}

/* Ensure contacts header is visible on desktop and large screens */
@media (min-width: 769px) {
    .contacts-header {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    .contacts-search-row {
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    .add-contact-btn-small {
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    /* Fix content positioning for requests and calls tabs on desktop */
    .requests-list,
    .calls-list {
        padding-top: 0 !important;
        margin-top: 0 !important;
        height: auto !important;
        max-height: calc(100vh - 200px) !important;
        overflow-y: auto !important;
    }
    
    /* Ensure requests and calls tabs content starts from proper position */
    #requests-tab,
    #calls-tab {
        padding-top: 1rem !important;
    }
    
    /* Fix calls header positioning */
    .calls-header {
        padding: 1rem 1.5rem 0.5rem !important;
        margin-top: 0 !important;
        background: var(--bg-primary) !important;
        position: relative !important;
        z-index: 1 !important;
    }
}

/* Large desktop screens - force visibility */
@media (min-width: 1024px) {
    .contacts-header,
    .contacts-search-row,
    .contacts-search-container,
    .add-contact-btn-small {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        position: relative !important;
        z-index: 10 !important;
    }
    
    .contacts-search-row {
        display: flex !important;
    }
    
    .add-contact-btn-small {
        display: flex !important;
    }
    
    /* Force contacts header to be part of desktop layout */
    .sidebar .contacts-header {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    .sidebar #contacts-tab .contacts-header {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    /* Ensure proper spacing for requests and calls tabs on large screens */
    .requests-list,
    .calls-list {
        max-height: calc(100vh - 250px) !important;
        overflow-y: auto !important;
        padding: 0 !important;
    }
    
    .empty-calls-state {
        margin-top: 2rem !important;
        text-align: center !important;
        padding: 2rem !important;
    }
    
    /* Fix any potential layout issues */
    .tab-content {
        height: 100% !important;
        display: flex !important;
        flex-direction: column !important;
    }
    
    .tab-content.active {
        display: flex !important;
    }
}

/* Extra large screens */
@media (min-width: 1440px) {
    .contacts-header {
        padding: 1.25rem 1.5rem 0.75rem !important;
    }
    
    .contacts-search-container input {
        padding: 0.625rem 0.875rem 0.625rem 2.5rem !important;
        font-size: 0.9rem !important;
    }
    
    .add-contact-btn-small {
        width: 36px !important;
        height: 36px !important; /* Match large screen contacts-search-container input height */
        font-size: 16px !important;
        border-radius: 8px !important; /* Keep original rounded corners */
        flex-shrink: 0 !important;
    }
    
    /* Ensure proper tab content positioning on extra large screens */
    .requests-list,
    .calls-list {
        max-height: calc(100vh - 280px) !important;
    }
    
    .empty-calls-state {
        margin-top: 4rem !important;
        padding: 3rem !important;
    }
}

[data-theme="dark"] .chat-item.has-unread {
    background: linear-gradient(90deg, rgba(59, 130, 246, 0.08) 0%, var(--bg-primary) 100%);
}

[data-theme="dark"] .chat-item.has-unread .chat-name.unread,
[data-theme="dark"] .chat-item.has-unread .chat-last-msg.unread {
    color: var(--text-dark);
}

/* Avatar simple sin bordes especiales */
.chat-img {
    transition: all 0.3s ease;
}

/* Animaci√≥n suave para el indicador de mensajes */
.message-status {
    transition: all 0.2s ease;
    opacity: 1;
}

.chat-item:hover .message-status {
    opacity: 1;
}

/* Mobile Responsive Design for Tabs */
@media (max-width: 768px) {
    /* Enhanced tab design for mobile */
    .chat-tabs {
        display: none !important; /* Hide tabs on mobile */
        background: var(--bg-primary);
        border-bottom: 2px solid var(--border-light);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 0;
        z-index: 100;
    }
    
    .tab-button {
        padding: 0.875rem 0.5rem;
        min-height: 52px;
        font-size: 0.8rem;
        font-weight: 600;
        border-radius: 0;
        position: relative;
        overflow: hidden;
    }
    
    .tab-button:active {
        background: var(--primary-light);
        transform: scale(0.98);
    }
    
    .tab-button.active {
        background: var(--primary-color);
        color: white;
        box-shadow: 0 2px 8px rgba(79, 70, 229, 0.3);
    }
    
    .tab-button.active::after {
        display: none; /* Remove line indicator on mobile */
    }
    
    /* Add ripple effect for mobile interaction */
    .tab-button::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: width 0.3s ease, height 0.3s ease;
        pointer-events: none;
        z-index: 1;
    }
    
    .tab-button:active::before {
        width: 100%;
        height: 100%;
    }
    
    /* Chat items mobile optimizations */
    .chat-item {
        margin: 1px 4px 1px 0;
        border-radius: 0 8px 8px 0;
    }
    
    .chat-item:hover {
        transform: translateX(2px);
    }
    
    .chat-item.has-unread:hover {
        transform: translateX(3px);
    }
    
    .chat-item.active {
        transform: translateX(4px);
    }
    
    .chat-time {
        font-size: 0.7rem;
        min-width: 30px;
    }
    
    .unread-count {
        font-size: 0.7rem;
        min-width: 16px;
        height: 16px;
        padding: 0.1rem 0.3rem;
    }
}

/* Enhanced active state with subtle shadow */
.chat-item.active::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(59, 130, 246, 0.03);
    pointer-events: none;
    border-radius: 0 8px 8px 0;
}

.chat-img,
.contact-img,
.request-img {
    width: 48px;
    height: 48px;
    border-radius: var(--radius-full);
    object-fit: cover;
    position: relative;
}

.chat-info,
.contact-info,
.request-info {
    flex: 1;
    min-width: 0;
}

.chat-top-row,
.contact-top-row,
.request-top-row {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 0.15rem; /* Reducido para m√°s compacto */
}

/* Tiempo directo en top-row (sin secci√≥n separada) */
.chat-top-row .chat-time {
    flex-shrink: 0;
}

.chat-name,
.contact-name,
.request-name {
    font-size: 1rem;
    font-weight: 500;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 180px;
}

.chat-time {
    font-size: 0.75rem;
    color: var(--text-tertiary);
    white-space: nowrap;
    font-weight: 400;
    text-align: right;
    transition: color 0.3s ease;
}

/* Badge verde estilo vigichat - ahora en bottom-row */
.unread-badge-messenger {
    background: #25D366; /* Verde vigichat */
    color: white;
    font-size: 0.7rem;
    font-weight: 700;
    padding: 0.15rem 0.4rem;
    border-radius: 10px;
    min-width: 18px;
    height: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 4px rgba(37, 211, 102, 0.3);
    animation: unreadBounce 0.4s ease-out;
    flex-shrink: 0; /* No se reduzca */
    margin-left: 0.5rem; /* Separaci√≥n del contenido */
}

@keyframes unreadBounce {
    0% {
        transform: scale(0);
        opacity: 0;
    }
    60% {
        transform: scale(1.1);
        opacity: 1;
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

.chat-bottom-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.chat-last-msg {
    font-size: 0.875rem;
    color: var(--text-secondary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 200px;
}

.chat-indicators {
    display: flex;
    align-items: center;
    gap: 0.25rem; /* Reduced gap between checkmarks and time in chat items */
    flex-shrink: 0;
}

/* Estilos para conversaciones con mensajes no le√≠dos */
.chat-item.has-unread {
    background: var(--bg-primary);
    position: relative;
}

/* Estilo vigichat - toda la conversaci√≥n en negrita cuando hay mensajes sin leer */
.chat-item.has-unread .chat-name {
    font-weight: 700;
    color: var(--text-primary);
}

.chat-item.has-unread .chat-last-msg {
    font-weight: 600;
    color: var(--text-primary);
}

/* Fecha verde estilo vigichat */
.chat-item.has-unread .chat-time {
    color: #25D366; /* Verde vigichat */
    font-weight: 600;
}

/* Usar el mismo spacing compacto para mensajes no le√≠dos */
.chat-item.has-unread .chat-top-row {
    margin-bottom: 0.15rem; /* Mismo margen compacto que el estado normal */
}

/* Avatar simple estilo vigichat */
.chat-item-avatar {
    position: relative;
    flex-shrink: 0;
}

/* Status indicators for conversation avatars (same style as contacts) */
.chat-item-avatar .contact-avatar-container {
    position: relative;
    display: inline-block;
}

.chat-item-avatar .contact-avatar {
    width: 48px;
    height: 48px;
    border-radius: var(--radius-full);
    object-fit: cover;
    border: 2px solid var(--border-light);
    transition: all 0.2s ease-in-out;
}

.chat-item-avatar .status-indicator {
    position: absolute;
    bottom: 2px;
    right: 2px;
    width: 16px;
    height: 16px;
    border-radius: var(--radius-full);
    border: 2px solid white;
    font-size: 10px;
    font-weight: 700;
    color: white;
    transition: all 0.2s ease-in-out;
}

.chat-item-avatar .status-indicator.online {
    background: var(--success-color);
    box-shadow: 0 0 0 2px var(--success-color);
}

.chat-item-avatar .status-indicator.away {
    background: #ff8c00;
    border: none !important;
    border-radius: 6px !important;
    width: auto !important;
    min-width: 24px !important;
    height: 12px !important;
    padding: 0 4px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

.chat-item-avatar .status-indicator .status-time {
    font-size: 10px;
    font-weight: 800;
    color: white;
    text-shadow: none;
    background: none;
}

/* Animaci√≥n suave para mostrar/ocultar badge */
@keyframes fadeOutBadge {
    0% {
        opacity: 1;
        transform: scale(1);
    }
    100% {
        opacity: 0;
        transform: scale(0.8);
    }
}

.unread-badge-messenger.fade-out {
    animation: fadeOutBadge 0.3s ease-out forwards;
}

/* Mejorar transiciones y efectos hover */
.chat-item {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 0 12px 12px 0;
    margin: 2px 8px 2px 0;
}

.chat-item:hover {
    background: var(--bg-tertiary);
    transform: translateX(4px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.chat-item.has-unread:hover {
    background: linear-gradient(90deg, rgba(59, 130, 246, 0.08) 0%, var(--bg-tertiary) 100%);
    transform: translateX(6px);
    box-shadow: 0 6px 16px rgba(79, 70, 229, 0.15);
}

.chat-item.active {
    background: linear-gradient(90deg, rgba(59, 130, 246, 0.1) 0%, var(--bg-primary) 100%);
    border-left: 4px solid var(--primary-color);
    transform: translateX(8px);
    box-shadow: 0 8px 20px rgba(79, 70, 229, 0.2);
}


/* Estilo espec√≠fico para message-status en chat-indicators (lista de conversaciones) */
.chat-indicators .message-status {
    font-size: 0.8rem;
}

.message-sent .checkmark { color: #9ca3af !important; }
.message-delivered .checkmark { color: #9ca3af !important; }
.message-read .checkmark { color: #00bfff !important; }

/* Efecto de resaltado para el √∫ltimo mensaje */
.latest-message-highlight {
    animation: highlightLastMessage 2s ease-out;
    transform-origin: center;
}

@keyframes highlightLastMessage {
    0% {
        box-shadow: 0 0 0 4px rgba(37, 211, 102, 0.4);
        transform: scale(1.02);
    }
    50% {
        box-shadow: 0 0 0 8px rgba(37, 211, 102, 0.2);
        transform: scale(1.01);
    }
    100% {
        box-shadow: 0 0 0 0 rgba(37, 211, 102, 0);
        transform: scale(1);
    }
}

/* Message sending states - No visual changes */
.message.sending {
    /* No opacity changes - message appears normal */
    position: relative;
}

/* No clock icon for sending messages */
.message.sending::after {
    content: '';
    display: none;
}

.message.sent-confirmed {
    animation: messageConfirmed 0.3s ease-in-out;
}

@keyframes messageConfirmed {
    0% { opacity: 0.7; }
    100% { opacity: 1; }
}

/* Contact Actions */
.contact-actions,
.request-actions {
    display: flex;
    gap: 0.5rem;
    margin-top: 0.5rem;
}

.btn-sm {
    padding: 0.375rem 0.75rem;
    font-size: 0.8rem;
    border-radius: var(--radius-md);
    border: none;
    cursor: pointer;
    font-weight: 500;
    transition: var(--transition-fast);
}

.btn-primary {
    background: var(--primary-color);
    color: white;
}

.btn-primary:hover {
    background: var(--primary-dark);
    transform: translateY(-1px);
}

.btn-secondary {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
}

.btn-secondary:hover {
    background: var(--border-light);
    color: var(--text-primary);
}

.btn-success {
    background: var(--success-color);
    color: white;
}

.btn-success:hover {
    background: #059669;
}

.btn-danger {
    background: var(--error-color);
    color: white;
}

.btn-danger:hover {
    background: #dc2626;
}

/* Main Chat Area */
.chat-area {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: var(--bg-secondary);
    position: relative;
    padding-bottom: 20px !important;
}

/* Welcome Screen */
.welcome-screen {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-primary);
}

.welcome-content {
    text-align: center;
    max-width: 400px;
    padding: 2rem;
}

.welcome-icon {
    font-size: 4rem;
    color: var(--primary-color);
    margin-bottom: 1.5rem;
}

.welcome-content h2 {
    font-size: 1.75rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 1rem;
}

.welcome-content p {
    font-size: 1rem;
    color: var(--text-secondary);
    margin-bottom: 2rem;
}

.feature-list {
    display: flex;
    justify-content: center;
    gap: 2rem;
}

.feature-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
}

.feature-item i {
    font-size: 1.5rem;
    color: var(--primary-color);
}

.feature-item span {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

/* Chat Header */
.chat-header {
    padding: 1rem 1.5rem;
    background: var(--bg-primary);
    border-bottom: 1px solid var(--border-light);
    display: flex;
    align-items: center;
    gap: 1rem;
}
.back-btn {
    display: none !important;
}
/* Chat Header Contact Info - FINAL LAYOUT */
.chat-header #contact-info {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    justify-content: flex-start !important;
    gap: 12px !important;
    flex: 1 !important;
    min-width: 0 !important;
}

.chat-header .contact-avatar-container {
    width: 20px !important;
    height: 40px !important;
    flex-shrink: 0 !important;
    flex-grow: 0 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    order: 1 !important;
}

.chat-header .contact-avatar {
    width: 40px !important;
    height: 40px !important;
    border-radius: 50% !important;
    object-fit: cover !important;
    display: block !important;
}

.chat-header .contact-details {
    flex: 1 !important;
    flex-grow: 1 !important;
    max-width: 300px !important;
    display: flex !important;
    flex-direction: column !important;
    justify-content: center !important;
    align-items: flex-start !important;
    order: 2 !important;
}

.chat-header .contact-name {
    font-size: 1rem !important;
    font-weight: 500 !important;
    color: var(--text-primary) !important;
    margin: 0 0 4px 0 !important;
    line-height: 1.2 !important;
    display: block !important;
}

.chat-header .last-seen {
    font-size: 0.8rem !important;
    color: var(--text-secondary) !important;
    margin: 0 !important;
    line-height: 1.2 !important;
    display: flex !important;
    align-items: center !important;
    gap: 0.3rem !important;
    transition: all 0.2s ease !important;
}

/* vigichat-style online status in chat header (con indicador simple) */
.chat-header .last-seen.online {
    color: #25d366 !important; /* Color verde oficial vigichat */
    font-weight: 400 !important; /* Peso normal como vigichat */
    font-size: 0.8rem !important;
    display: flex !important;
    align-items: center !important;
    gap: 0.3rem !important; /* Gap m√°s peque√±o */
}

/* Simple dot indicator (estilo Messenger CON animaci√≥n suave) */
.chat-header .last-seen.online::before {
    content: '' !important;
    display: inline-block !important;
    width: 6px !important;
    height: 6px !important;
    background-color: #25d366 !important; /* Mismo color vigichat */
    border-radius: 50% !important;
    flex-shrink: 0 !important;
    animation: pulse-green 2s infinite !important; /* Animaci√≥n suave mantenida */
}

/* Animaci√≥n suave para el indicador verde */
@keyframes pulse-green {
    0% {
        box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.5);
    }
    70% {
        box-shadow: 0 0 0 3px rgba(37, 211, 102, 0);
    }
    100% {
        box-shadow: 0 0 0 0 rgba(37, 211, 102, 0);
    }
}

/* Minimal transition like vigichat - only for smooth color changes */
.chat-header .last-seen {
    transition: color 0.15s ease !important; /* Solo transici√≥n de color, muy r√°pida */
}

/* Eliminadas todas las animaciones fadeIn y efectos visuales */

/* Dark theme support for online status (sin efectos) */
[data-theme="dark"] .chat-header .last-seen.online,
[data-theme="dark"] .status-text.online,
[data-theme="dark"] .contact-status.online,
[data-theme="dark"] .user-status.online {
    color: #34d399 !important; /* Verde m√°s brillante para modo oscuro */
}

[data-theme="dark"] .chat-header .last-seen.online::before,
[data-theme="dark"] .status-text.online::before,
[data-theme="dark"] .contact-status.online::before,
[data-theme="dark"] .user-status.online::before {
    background-color: #34d399 !important;
    /* SIN box-shadow ni animaciones de pulso */
}

/* Typing indicator in chat header */
.chat-header #typing-indicator {
    font-size: 0.8rem !important;
    color: #25d366 !important;
    margin: 0 !important;
    line-height: 1 !important;
    display: none !important;
}

.chat-header #typing-indicator.typing-active {
    display: block !important;
}



.contact-info {
    display: flex;
    align-items: center;
    gap: 0.875rem;
    flex: 1;
}

.contact-avatar {
    width: 40px;
    height: 40px;
    border-radius: var(--radius-full);
    object-fit: cover;
}

.contact-details h3 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.125rem;
}

.contact-status {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.typing-indicator {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--primary-color);
    font-weight: 500;
}

.typing-dots {
    display: flex;
    gap: 0.125rem;
}

.typing-dots span {
    width: 4px;
    height: 4px;
    background: var(--primary-color);
    border-radius: var(--radius-full);
    animation: typingDots 1.4s infinite ease-in-out;
}

.typing-dots span:nth-child(1) { animation-delay: -0.32s; }
.typing-dots span:nth-child(2) { animation-delay: -0.16s; }

@keyframes typingDots {
    0%, 80%, 100% { transform: scale(0); opacity: 0.5; }
    40% { transform: scale(1); opacity: 1; }
}

.chat-actions {
    display: flex;
    gap: 0.5rem;
}





 /* Messages Container */
.messages-container {
    flex: 1;
    position: relative;
    background: var(--bg-tertiary);
    margin-bottom: 60px !important;
    overflow: hidden;
    overflow-y: auto;
    height: 100%;
    max-height: calc(100vh - 140px); /* Adjust for header/footer if needed */
} /* Messages Container */

  .messages-container {
    position: relative;
    width: 100%;
    height: 100%;
    min-height: 0;
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    flex: 1 1 auto;
    min-height: 0;
    height: 100%;
    display: flex;
    flex-direction: column;
    background: var(--bg-tertiary);
    box-sizing: border-box;
}
.messages-scroll {
    min-height: 300px;
    max-height: 100%;
    overflow-y: auto !important;
    display: flex;
    flex-direction: column;
    border: none !important;
    background: transparent !important;
    box-sizing: border-box;
}
/* Touch scrolling improvements for mobile / touch notebooks */
.messages-scroll {
    -webkit-overflow-scrolling: touch; /* iOS smooth scrolling */
    touch-action: pan-y;               /* allow vertical panning */
    -ms-touch-action: pan-y;           /* IE/Edge */
    pointer-events: auto;              /* ensure interaction is enabled */
}
/* Scroll para mensajes */
.messages-container {
    display: flex;
    flex-direction: column;
    height: 100%;
    min-height: 0;
    background: var(--bg-tertiary);
}
.messages-wrapper {
    width: 100%;
    height: 100%;
    min-height: 0;
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 100%;
    min-height: 0;
    max-height: 100%;
    flex: 1 1 auto;
    overflow-y: auto !important;
    display: flex;
    flex-direction: column;
    flex: 1 1 auto;
    min-height: 0;
    height: 100%;
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
}
.messages-scroll {
    flex: 1 1 auto;
    min-height: 0;
    max-height: 100%;
    overflow-y: auto;
    padding: 16px 0 16px 0;
    scroll-behavior: smooth;
    background: transparent;
}
/* Loader para mensajes */
.messages-loader {
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 12px 0;
    background: transparent;
    z-index: 2;
}
.loader-spinner {
    width: 32px;
    height: 32px;
    border: 4px solid #e0e0e0;
    border-top: 4px solid #4f46e5;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}



.messages-scroll::-webkit-scrollbar {
    width: 6px;
}

.messages-scroll::-webkit-scrollbar-track {
    background: transparent;
}

.messages-scroll::-webkit-scrollbar-thumb {
    background-color: var(--border-light);
    border-radius: 3px;
}

.messages-scroll::-webkit-scrollbar-thumb:hover {
    background-color: var(--border-medium);
}

.scroll-to-bottom {
    position: sticky;
    bottom: 1rem;
    align-self: flex-end;
    margin-right: 1rem;
    width: 40px;
    height: 40px;
    background: var(--primary-color);
    color: white;
    border: none;
    border-radius: var(--radius-full);
    cursor: pointer;
    box-shadow: var(--shadow-lg);
    transition: var(--transition-fast);
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 1;
    transform: translateY(0);
}

.scroll-to-bottom:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-xl);
    background: var(--primary-dark);
}

.scroll-to-bottom.hidden {
    opacity: 0;
    transform: translateY(10px);
    pointer-events: none;
}

/* Date Divider */
.date-divider {
    text-align: center;
    margin: 1.5rem 0;
    position: relative;
}

.date-divider::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 1px;
    background: var(--border-light);
}

.date-divider span {
    background: var(--bg-secondary);
    padding: 0.5rem 1rem;
    font-size: 0.8rem;
    color: var(--text-tertiary);
    border-radius: var(--radius-full);
    position: relative;
    z-index: 1;
}



/* Message Styles */
.message {
    display: flex;
    margin-bottom: 1rem;
    max-width: 50%;
    animation: messageSlideIn 0.3s ease-out;
    width: fit-content;
}

/* Estilos originales sobrescritos por la protecci√≥n robusta m√°s abajo */

.message-avatar {
    width: 32px;
    height: 32px;
    border-radius: var(--radius-full);
    object-fit: cover;
    margin: 0 0.5rem;
    flex-shrink: 0;
    align-self: flex-end;
}

.message.sent .message-avatar {
    display: none;
}

.message-content {
    background: var(--message-received);
    border-radius: 0.85rem;
    padding: 0.25rem 0.5rem;
    position: relative;
    box-shadow: var(--shadow-sm);
    max-width: 100%;
    word-break: break-word;
    overflow-wrap: break-word;
}

/* Estilo original - mantener pero ser√° reforzado por la protecci√≥n robusta */

.message.received .message-content {
    border-bottom-left-radius: 0 !important;
}

.message.sent .message-content {
    border-bottom-right-radius: 0.25rem;
}

.message-text {
    font-size: 0.95rem;
    line-height: 1.4;
    white-space: pre-wrap;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

/* Estilos para mensajes que contienen √∫nicamente emojis */
.message.emoji-only .message-content {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    padding: 4px 8px !important;
    border-radius: 0 !important;
    display: flex;
    flex-direction: column;
}

.message.emoji-only.sent .message-content {
    align-items: flex-end;
}

.message.emoji-only.received .message-content {
    align-items: flex-start;
}

/* Asegurar que tanto mensajes enviados como recibidos no tengan fondo cuando son solo emojis */
.message.emoji-only.sent .message-content,
.message.emoji-only.received .message-content {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
}

.message.emoji-only .message-text {
    font-size: 2.5rem !important;
    line-height: 1.1 !important;
    margin: 0 !important;
    padding: 0 !important;
}

.message.emoji-only.sent .message-text {
    text-align: right;
}

.message.emoji-only.received .message-text {
    text-align: left;
}

/* Ajustar la posici√≥n de la hora para mensajes solo emojis */
.message.emoji-only .message-time-status {
    border-radius: 12px;
    padding: 4px 8px;
    margin-top: 4px;
    align-self: flex-end !important;
    display: inline-flex;
    width: fit-content;
    min-width: auto;
    justify-content: center;
}

.message.emoji-only.sent .message-time-status {
    background: var(--message-sent);
}

.message.emoji-only.received .message-time-status {
    background: var(--message-received);
}

.message.emoji-only.sent .message-time {
    color: rgba(255, 255, 255, 0.8) !important;
    font-size: 0.7rem;
}

.message.emoji-only.received .message-time {
    color: var(--text-secondary) !important;
    font-size: 0.7rem;
}

.message.emoji-only.sent .message-status {
    filter: brightness(0.8);
}

.message.emoji-only.received .message-status {
    display: none;
}

/* Estilos para vista previa de imagen */
.image-preview-container {
    background: var(--background-primary);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 12px;
    margin-bottom: 12px;
    animation: slideInUp 0.3s ease-out;
}

.image-preview-wrapper {
    position: relative;
    display: inline-block;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.image-preview {
    max-width: 200px;
    max-height: 150px;
    width: auto;
    height: auto;
    display: block;
    object-fit: cover;
}

.remove-image-btn {
    position: absolute;
    top: 8px;
    right: 8px;
    background: rgba(0, 0, 0, 0.7);
    border: none;
    border-radius: 50%;
    width: 28px;
    height: 28px;
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    transition: all 0.2s ease;
    opacity: 0.8;
}

.remove-image-btn:hover {
    background: rgba(220, 53, 69, 0.9);
    opacity: 1;
    transform: scale(1.1);
}

.image-info {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 8px;
    padding: 8px;
    background: var(--background-secondary);
    border-radius: 6px;
    font-size: 0.85rem;
}

.image-info i {
    color: var(--primary-color);
}

.image-name {
    color: var(--text-primary);
    font-weight: 500;
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.image-size {
    color: var(--text-secondary);
    font-size: 0.8rem;
}

@keyframes slideInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Estilos para im√°genes en mensajes */
.message-image {
    margin-bottom: 4px; /* Espacio entre imagen y texto */
    border-radius: 8px;
    overflow: hidden;
    max-width: 280px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.message-image img {
    width: 100%;
    height: auto;
    max-height: 250px;
    object-fit: cover;
    cursor: zoom-in;
    transition: transform 0.2s ease, opacity 0.2s ease;
    display: block;
}

.message-image img:hover {
    transform: scale(1.02);
    opacity: 0.95;
}

.message-image img.expandable-image {
    cursor: zoom-in;
}

/* Espaciado especial cuando hay imagen + texto */
.message-content .message-image + .message-text {
    margin-top: 8px;
}

.message-image img.enlarged {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(1.5);
    z-index: 9999;
    max-width: 90vw;
    max-height: 90vh;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    border-radius: 8px;
    cursor: zoom-out;
}

/* Video messages */
.message-video {
    margin-bottom: 4px; /* Consistente con im√°genes */
    border-radius: 8px;
    overflow: hidden;
    max-width: 280px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.message-video video {
    width: 100%;
    height: auto;
    max-height: 250px;
    display: block;
    border-radius: 8px;
}

/* Overlay para imagen expandida */
.image-overlay {
    transition: opacity 0.3s ease;
}

.image-overlay img {
    animation: imageZoomIn 0.3s ease;
}

.image-overlay button {
    user-select: none;
    -webkit-tap-highlight-color: transparent;
}

.image-overlay button:focus {
    outline: 2px solid rgba(255, 255, 255, 0.5);
    outline-offset: 2px;
}

@keyframes imageZoomIn {
    from {
        opacity: 0;
        transform: scale(0.8);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* Responsive: En m√≥viles, botones m√°s grandes y mejor posicionados */
@media (max-width: 768px) {
    .image-overlay button {
        width: 45px !important;
        height: 45px !important;
        font-size: 16px !important;
    }
    
    .image-overlay button:first-of-type {
        top: 15px !important;
        right: 15px !important;
    }
    
    .image-overlay button:last-of-type {
        top: 15px !important;
        right: 70px !important;
    }
}

/* Camera Interface - Centered with Expand Option */
.whatsapp-camera-overlay {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 400px;
    height: 500px;
    max-width: 90vw;
    max-height: 95vh;
    background: #000;
    border-radius: 8px;
    z-index: 100001 !important;
    display: none;
    flex-direction: column;
    opacity: 0;
    transition: all 0.3s ease-out;
    overflow: hidden;
}

.whatsapp-camera-overlay.active {
    display: flex !important;
    opacity: 1;
}

.whatsapp-camera-overlay.fullscreen {
    top: -500px;
    left: -200px;
    transform: none;
    width: 90vw;
    height: calc(100vh - 40px);
    max-width: none;
    max-height: calc(100vh - 40px);
    border-radius: 0;
    margin-bottom: 40px;
}

@keyframes whatsappFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* Camera Video - Full Screen */
.whatsapp-camera-video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Top Controls Bar */
.whatsapp-camera-top {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 80px;
    background: linear-gradient(180deg, rgba(0, 0, 0, 0.6) 0%, transparent 100%);
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    padding: 20px 20px 0;
    z-index: 10001;
}

.whatsapp-camera-top .left-controls {
    display: flex;
    gap: 10px;
    align-items: center;
}

.whatsapp-close-btn,
.whatsapp-fullscreen-btn,
.whatsapp-flip-btn {
    background: none;
    border: none;
    color: white;
    font-size: 24px;
    cursor: pointer;
    padding: 8px;
    margin: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.1s ease;
    border-radius: 50%;
}

.whatsapp-close-btn:active,
.whatsapp-fullscreen-btn:active,
.whatsapp-flip-btn:active {
    transform: scale(0.9);
}

.whatsapp-close-btn:hover,
.whatsapp-fullscreen-btn:hover,
.whatsapp-flip-btn:hover {
    background: rgba(255, 255, 255, 0.1);
}

.whatsapp-flip-btn i {
    transition: transform 0.3s ease;
}

.whatsapp-flip-btn:active i {
    transform: rotate(180deg);
}

.whatsapp-recording-indicator {
    background: #25D366;
    color: white;
    padding: 6px 12px;
    border-radius: 18px;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    font-weight: 500;
}

.recording-dot {
    width: 8px;
    height: 8px;
    background: #ffffff;
    border-radius: 50%;
    animation: whatsappPulse 1s infinite;
}

@keyframes whatsappPulse {
    0%, 50% { opacity: 1; transform: scale(1); }
    51%, 100% { opacity: 0.6; transform: scale(0.8); }
}

.recording-time {
    font-family: 'Roboto Mono', monospace;
    font-size: 14px;
}

/* Bottom Controls */
.whatsapp-camera-bottom {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 120px;
    background: linear-gradient(0deg, rgba(0, 0, 0, 0.8) 0%, transparent 100%);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 30px 30px;
    z-index: 10001;
}

/* Gallery Button */
.whatsapp-gallery-btn {
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 12px;
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
}

.whatsapp-gallery-btn:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: scale(1.05);
}

.gallery-icon i {
    color: white;
    font-size: 22px;
}

/* Capture Button Container */
.whatsapp-capture-container {
    display: flex;
    align-items: center;
    justify-content: center;
}

.whatsapp-capture-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.1s ease;
    width: 80px;
    height: 80px;
    border: 6px solid rgba(255, 255, 255, 0.8);
    border-radius: 50%;
    position: relative;
}

.whatsapp-capture-inner {
    width: 50px;
    height: 50px;
    background: white;
    border-radius: 50%;
    transition: all 0.2s ease;
}

.capture-outer-ring {
    width: 80px;
    height: 80px;
    border: 6px solid rgba(255, 255, 255, 0.8);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s ease;
}

.capture-inner-circle {
    width: 60px;
    height: 60px;
    background: white;
    border-radius: 50%;
    transition: all 0.15s ease;
}

/* Active States */
.whatsapp-capture-btn:active {
    transform: scale(0.95);
}

.whatsapp-capture-btn:active .capture-outer-ring {
    border-color: #25D366;
    transform: scale(1.05);
}

.whatsapp-capture-btn:active .capture-inner-circle {
    background: #25D366;
    transform: scale(0.8);
}

/* Recording State */
.whatsapp-capture-btn.recording .capture-outer-ring {
    border-color: #dc2626;
    animation: whatsappRecordingRing 1.5s infinite;
}

.whatsapp-capture-btn.recording .capture-inner-circle {
    background: #dc2626;
    border-radius: 12px;
    transform: scale(0.6);
}

@keyframes whatsappRecordingRing {
    0%, 100% { 
        transform: scale(1); 
        border-width: 6px;
    }
    50% { 
        transform: scale(1.1); 
        border-width: 4px;
    }
}

/* Switch Camera Button */
.whatsapp-switch-btn {
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
}

.whatsapp-switch-btn:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: scale(1.05);
}

.whatsapp-switch-btn i {
    color: white;
    font-size: 20px;
}

/* Capture Preview */
.whatsapp-capture-preview {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: #000;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10002;
}

.whatsapp-capture-preview img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}

/* Preview Controls */
.whatsapp-preview-controls {
    position: absolute;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 80px;
    z-index: 10003;
}

.whatsapp-preview-btn {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 24px;
    transition: all 0.2s ease;
}

.whatsapp-preview-btn.cancel {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: 2px solid rgba(255, 255, 255, 0.3);
}

.whatsapp-preview-btn.cancel:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: scale(1.1);
}

.whatsapp-preview-btn.send {
    background: #25D366;
    color: white;
}

.whatsapp-preview-btn.send:hover {
    background: #128C7E;
    transform: scale(1.1);
}

/* Responsive Adjustments */
@media (max-width: 768px) {
    .whatsapp-camera-overlay {
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 95vw;
        height: 85vh;
        max-width: 85vw;
        max-height: 95vh;
    }
    
    .whatsapp-camera-overlay.fullscreen {
        top: 0;
        width: 100vw;
        height: calc(100vh - 60px);
        max-width: 100vw;
        max-height: calc(100vh - 60px);
        border-radius: 0;
        margin-bottom: 60px;
    }
    
    .whatsapp-camera-bottom {
        padding: 0 20px 20px;
        height: 100px;
    }
}
    
    .whatsapp-preview-controls {
        bottom: 30px;
        gap: 60px;
    }
    
    .whatsapp-preview-btn {
        width: 55px;
        height: 55px;
        font-size: 20px;
    }


@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: scale(0.95) translateY(-20px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* Responsive para modal de c√°mara */
@media (max-width: 768px) {
    .camera-modal {
        margin: 10px;
        max-height: 95vh;
    }
    
    .camera-footer {
        flex-direction: column;
        gap: 8px;
    }
    
    .camera-btn {
        width: 100%;
    }
}

/* Contenedor de hora y estado en la misma l√≠nea (estilo vigichat) */
.message-time-status {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 0 !important; /* Reduced gap between time and checkmarks */
    margin-top: 0.25rem;
}

.message-time {
    font-size: 0.75rem;
    color: rgba(255, 255, 255, 0.7);
    white-space: nowrap;
}

.message.received .message-time {
    color: var(--text-tertiary);
}

.message-status {
    display: inline-flex;
    align-items: center;
    font-size: 0.75rem; /* Mismo tama√±o que la hora */
    line-height: 1;
    color: rgb(165, 163, 163); 
}

.message-reactions {
    display: flex;
    gap: 0.25rem;
    margin-top: 0.5rem;
    flex-wrap: wrap;
}

.reaction {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-full);
    padding: 0.125rem 0.375rem;
    font-size: 0.75rem;
    cursor: pointer;
    transition: var(--transition-fast);
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.reaction:hover {
    background: var(--primary-light);
    border-color: var(--primary-color);
}

.reaction.reacted {
    background: var(--primary-light);
    border-color: var(--primary-color);
    color: var(--primary-color);
}

@keyframes messageSlideIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}


/* Reply Preview */
.reply-preview {
    padding: 0.75rem 1.5rem 0;
    background: var(--bg-primary);
    border-bottom: 1px solid var(--border-light);
}

.reply-content {
    background: var(--bg-tertiary);
    border-radius: var(--radius-lg);
    padding: 0.75rem;
    border-left: 3px solid var(--primary-color);
}

.reply-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
}

.reply-header span {
    font-size: 0.8rem;
    color: var(--primary-color);
    font-weight: 500;
}

.close-reply {
    background: none;
    border: none;
    color: var(--text-tertiary);
    cursor: pointer;
    font-size: 0.9rem;
    padding: 0.25rem;
    border-radius: var(--radius-md);
    transition: var(--transition-fast);
}

.close-reply:hover {
    background: var(--bg-primary);
    color: var(--text-secondary);
}

.reply-message {
    font-size: 0.875rem;
    color: var(--text-secondary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Message Input */
.message-input-container {
    position: fixed !important;
    bottom: 0 !important;
    left: 380px !important;
    right: 0 !important;
    padding: 1rem 1.5rem;
    background: var(--bg-tertiary);
    border: none;
    border-top: none !important;
    z-index: 100;
}

.input-area {
    display: flex;
    align-items: flex-end;
    gap: 0.75rem;
}

.message-input-wrapper {
    flex: 1;
    position: relative;
    background: var(--bg-tertiary);
    border-radius: 15px;
    border: 1px solid gray;
    display: flex;
    align-items: flex-start;
    min-height: 44px;
    max-height: 150px;
    transition: all 0.2s ease;
    word-wrap: break-word;
    overflow: hidden;
}


.input-field {
    flex: 1;
    padding: 0.75rem 3rem 0.75rem 1rem;
    border: none;
    background: none;
    font-size: 0.95rem;
    line-height: 1.5;
    color: var(--text-primary);
    outline: none;
    min-height: 24px;
    max-height: 120px;
    overflow-y: auto;
    overflow-x: hidden;
    word-wrap: break-word;
    white-space: pre-wrap;
    resize: none;
    width: 100%;
    box-sizing: border-box;
}

.input-field:empty::before {
    content: attr(data-placeholder);
    color: var(--text-tertiary);
}

.emoji-btn {
    position: absolute;
    right: 0.5rem;
    bottom: 0.5rem;
}

.send-btn {
    width: 54px;
    height: 54px;
    border: none;
    background-color: transparent;
    border-radius: var(--radius-full);
    cursor: pointer;
    transition: var(--transition-fast);
    display: flex;
    align-items: center;
    justify-content: center;
}

.fas.fa-paper-plane {
    font-size: 1.7rem;
    color: var(--primary-color);

}

.send-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}

.record-btn {
    width: 44px;
    height: 44px;
    background: var(--error-color);
    color: white;
    border: none;
    border-radius: var(--radius-full);
    cursor: pointer;
    transition: var(--transition-fast);
}

.record-btn:hover {
    background: #dc2626;
    transform: scale(1.05);
}

.record-btn.recording {
    animation: recordingPulse 1s infinite;
}

@keyframes recordingPulse {
    0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
    70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
    100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
}

/* Emoji Picker */
.emoji-picker {
    position: absolute;
    bottom: 70px;
    right: 1.5rem;
    width: 320px;
    height: 300px;
    background: var(--bg-primary);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-xl);
    overflow: hidden;
    z-index: var(--z-dropdown);
}

.emoji-categories {
    display: flex;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-light);
}

.emoji-category {
    flex: 1;
    padding: 0.5rem;
    background: none;
    border: none;
    font-size: 1.2rem;
    cursor: pointer;
    transition: var(--transition-fast);
}

.emoji-category:hover,
.emoji-category.active {
    background: var(--primary-light);
}

.emoji-grid {
    padding: 0.5rem;
    height: calc(100% - 50px);
    overflow-y: auto;
    display: grid;
    grid-template-columns: repeat(8, 1fr);
    gap: 0.25rem;
}

.emoji-item {
    padding: 0.5rem;
    font-size: 1.2rem;
    border: none;
    background: none;
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: var(--transition-fast);
}

.emoji-item:hover {
    background: var(--bg-tertiary);
    transform: scale(1.2);
}

/* Modals */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: var(--z-modal);
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
}

.modal-content {
    background: var(--bg-primary);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-xl);
    width: 90%;
    max-width: 500px;
    max-height: 90vh;
    overflow: hidden;
    position: relative;
    animation: modalSlideIn 0.3s ease-out;
}

.modal-content.large {
    max-width: 800px;
}

.modal-header {
    padding: 1.5rem 1.5rem 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.modal-header h3 {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-primary);
}

.close-modal {
    background: none;
    border: none;
    color: var(--text-tertiary);
    cursor: pointer;
    font-size: 1.2rem;
    padding: 0.5rem;
    border-radius: var(--radius-md);
    transition: var(--transition-fast);
}

.close-modal:hover {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
}

.modal-body {
    padding: 1.5rem;
    overflow-y: auto;
    max-height: 60vh;
}

.modal-footer {
    padding: 0 1.5rem 1.5rem;
    display: flex;
    gap: 0.75rem;
    justify-content: flex-end;
}

@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: translateY(-20px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* Settings */
.settings-tabs {
    display: flex;
    border-bottom: 1px solid var(--border-light);
    margin-bottom: 1.5rem;
}

.settings-tab {
    flex: 1;
    padding: 1rem;
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    transition: var(--transition-fast);
    font-size: 0.875rem;
}

.settings-tab:hover {
    color: var(--text-primary);
    background: var(--bg-tertiary);
}

.settings-tab.active {
    color: var(--primary-color);
    background: var(--primary-light);
}

.settings-tab i {
    font-size: 1.2rem;
}

/* ============================================
   SISTEMA 2: ALERTAS TIPO TOAST
   ============================================ */
/* Container para alertas temporales tipo toast */
.alerts-container {
    position: fixed;
    top: 0.5rem;
    right: 0.5rem;
    z-index: var(--z-notification);
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    max-width: 420px; /* Ligeramente m√°s ancho para el bot√≥n */
    pointer-events: none;
}

/* Alerta individual tipo toast - ejemplo: "Continuando chat con Usuario" */
.alert {
    background: var(--bg-primary);
    border-radius: var(--radius-lg);
    padding: 1rem;
    box-shadow: var(--shadow-lg);
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    animation: alertSlideIn 0.3s ease-out;
    position: relative;
    overflow: visible; /* Permitir que el bot√≥n de cerrar se vea fuera */
    pointer-events: auto;
    margin: 0.5rem; /* Margen para el bot√≥n de cerrar */
}

.alert.success { border-left: 4px solid var(--success-color); }
.alert.error { border-left: 4px solid var(--error-color); }
.alert.warning { border-left: 4px solid var(--warning-color); }
.alert.info { border-left: 4px solid var(--primary-color); }

.alert-icon {
    font-size: 1.25rem;
    margin-top: 0.125rem;
}

.alert.success .alert-icon { color: var(--success-color); }
.alert.error .alert-icon { color: var(--error-color); }
.alert.warning .alert-icon { color: var(--warning-color); }
.alert.info .alert-icon { color: var(--primary-color); }

.alert-content h4 {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
}

.alert-content p {
    font-size: 0.8rem;
    color: var(--text-secondary);
    line-height: 1.4;
}

.alert-close {
    position: absolute;
    top: -0.25rem;
    right: -0.25rem;
    background: var(--bg-primary);
    border: 2px solid var(--border-light);
    color: var(--text-tertiary);
    cursor: pointer;
    font-size: 0.75rem;
    padding: 0.25rem;
    border-radius: 50%;
    transition: var(--transition-fast);
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    z-index: 10;
}

.alert-close:hover {
    background: var(--error-color);
    color: white;
    border-color: var(--error-color);
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
}

/* Animaci√≥n de aparici√≥n del bot√≥n de cerrar */
.alert-close {
    animation: fadeInScale 0.3s ease-out 0.2s both;
}

@keyframes fadeInScale {
    from {
        opacity: 0;
        transform: scale(0.5);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes alertSlideIn {
    from {
        opacity: 0;
        transform: translateX(100%) scale(0.8);
    }
    to {
        opacity: 1;
        transform: translateX(0) scale(1);
    }
}

@keyframes alertSlideOut {
    from {
        opacity: 1;
        transform: translateX(0) scale(1);
    }
    to {
        opacity: 0;
        transform: translateX(100%) scale(0.8);
    }
}

@keyframes alertStay {
    0% {
        transform: translateX(0) scale(1);
        box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    }
    50% {
        transform: translateX(-3px) scale(1.01);
        box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.2), 0 4px 6px -4px rgb(0 0 0 / 0.1);
    }
    100% {
        transform: translateX(0) scale(1);
        box-shadow: 0 6px 10px -2px rgb(0 0 0 / 0.15), 0 3px 5px -3px rgb(0 0 0 / 0.1);
    }
}

/* New notification states for improved visibility */
.alert-entering {
    opacity: 0;
    transform: translateX(100%) scale(0.9);
    animation: alertSlideIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.alert-visible {
    opacity: 1;
    transform: translateX(0) scale(1);
    transition: all 0.4s ease;
    animation: alertStay 0.5s ease-out 0.6s forwards;
}

.alert-visible:hover {
    transform: translateX(-5px) scale(1.02);
    box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.3);
}

/* ===== ENHANCED SEARCH FUNCTIONALITY STYLES ===== */

/* Cache indicator */
.cache-indicator {
    background: linear-gradient(135deg, #e8f5e8, #f0f9ff);
    border: none;
    border-left: 4px solid #22c55e;
    border-radius: 8px;
    padding: 8px 12px;
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.8rem;
    color: #16a34a;
    animation: cacheIndicatorPulse 1s ease-out;
}

@keyframes cacheIndicatorPulse {
    0% { 
        opacity: 0;
        transform: scale(0.95);
    }
    50% { 
        opacity: 1;
        transform: scale(1.02);
    }
    100% { 
        opacity: 1;
        transform: scale(1);
    }
}

.cache-indicator i {
    color: #f59e0b;
}

/* Search suggestions */
.search-suggestions {
    background: var(--bg-primary);
    border-radius: 12px;
    padding: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.suggestions-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 0;
    border-bottom: 1px solid var(--border-light);
    margin-bottom: 8px;
    font-size: 0.85rem;
    color: var(--text-secondary);
    font-weight: 500;
}

.search-suggestion-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 12px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
}

.search-suggestion-item:hover,
.search-suggestion-item.keyboard-selected {
    background: var(--bg-secondary);
    transform: translateX(4px);
}

.search-suggestion-item i {
    color: var(--text-tertiary);
    font-size: 0.9rem;
}

.search-suggestion-item span {
    flex: 1;
    color: var(--text-primary);
    font-size: 0.9rem;
}

.remove-suggestion {
    background: none;
    border: none;
    color: var(--text-tertiary);
    padding: 4px;
    border-radius: 4px;
    cursor: pointer;
    opacity: 0;
    transition: all 0.2s ease;
    font-size: 0.8rem;
}

.search-suggestion-item:hover .remove-suggestion {
    opacity: 1;
}

.remove-suggestion:hover {
    background: var(--error-color);
    color: white;
}

/* Enhanced search loading */
.search-loading.enhanced {
    text-align: center;
    padding: 24px;
}

.loading-spinner {
    display: inline-block;
    position: relative;
    width: 40px;
    height: 40px;
    margin-bottom: 16px;
}

.spinner-ring {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 3px solid transparent;
    border-top: 3px solid var(--primary-color);
    border-radius: 50%;
    animation: spinnerRotate 1.2s linear infinite;
}

.spinner-ring:nth-child(2) {
    animation-delay: -0.4s;
    border-top-color: var(--success-color);
}

.spinner-ring:nth-child(3) {
    animation-delay: -0.8s;
    border-top-color: var(--warning-color);
}

@keyframes spinnerRotate {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.loading-progress {
    width: 100%;
    height: 3px;
    background: var(--bg-tertiary);
    border-radius: 2px;
    overflow: hidden;
    margin-top: 12px;
}

.progress-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--primary-color), var(--success-color));
    border-radius: 2px;
    animation: progressBarMove 2s ease-in-out infinite;
}

@keyframes progressBarMove {
    0% { 
        width: 0%;
        transform: translateX(-100%);
    }
    50% { 
        width: 100%;
        transform: translateX(0%);
    }
    100% { 
        width: 100%;
        transform: translateX(100%);
    }
}

/* Keyboard navigation styles */
.search-result-item.keyboard-selected,
.search-suggestion-item.keyboard-selected {
    background: var(--primary-color);
    color: white;
    transform: translateX(8px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.keyboard-selected .user-name,
.keyboard-selected .username,
.keyboard-selected span {
    color: white;
}

.keyboard-selected .status-badge {
    background: rgba(255, 255, 255, 0.2);
    color: white;
}

/* Enhanced search result items */
.search-result-item {
    position: relative;
    overflow: hidden;
}

.search-result-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.1), 
        transparent
    );
    transition: left 0.5s ease;
}

.search-result-item:hover::before {
    left: 100%;
}

/* Status indicators with animation */
.status-badge {
    position: relative;
    overflow: hidden;
}

.status-badge.available {
    animation: availablePulse 2s ease-in-out infinite;
}

@keyframes availablePulse {
    0%, 100% { 
        box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4);
    }
    50% { 
        box-shadow: 0 0 0 8px rgba(34, 197, 94, 0);
    }
}

/* Connection quality indicators for enhanced socket */
.connection-status {
    position: relative;
    padding-left: 20px;
}

.connection-status::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: var(--error-color);
}

.connection-status.connected::before {
    background: var(--success-color);
}

.connection-status.quality-excellent::before {
    animation: connectionExcellent 2s ease-in-out infinite;
}

.connection-status.quality-good::before {
    animation: connectionGood 3s ease-in-out infinite;
}

.connection-status.quality-poor::before {
    animation: connectionPoor 1s ease-in-out infinite;
    background: var(--warning-color);
}

.connection-status.quality-critical::before {
    animation: connectionCritical 0.5s ease-in-out infinite;
    background: var(--error-color);
}

@keyframes connectionExcellent {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

@keyframes connectionGood {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
}

@keyframes connectionPoor {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

@keyframes connectionCritical {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
}

.connection-quality {
    margin-left: 8px;
    font-size: 0.8rem;
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: 500;
}

.connection-quality.quality-excellent {
    background: rgba(34, 197, 94, 0.1);
    color: var(--success-color);
}

.connection-quality.quality-good {
    background: rgba(34, 197, 94, 0.1);
    color: var(--success-color);
}

.connection-quality.quality-poor {
    background: rgba(245, 158, 11, 0.1);
    color: var(--warning-color);
}

.connection-quality.quality-critical {
    background: rgba(239, 68, 68, 0.1);
    color: var(--error-color);
}

/* ====== CONTACTS SYSTEM STYLES ====== */

/* Contact Search Results */
.search-results {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: var(--bg-primary);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-xl);
    max-height: 300px;
    overflow-y: auto;
    z-index: var(--z-dropdown);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: var(--transition-normal);
}

.search-results.visible {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

/* Enhanced Search States */
.search-loading,
.search-empty,
.search-error {
    padding: 2rem 1rem;
    text-align: center;
    color: var(--text-secondary);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
}

/* Loading Spinner */
.search-loading {
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
    border-radius: var(--radius-lg);
    margin: 0.5rem;
}

.loading-spinner {
    position: relative;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.spinner-ring {
    position: absolute;
    width: 32px;
    height: 32px;
    border: 2px solid transparent;
    border-top: 2px solid var(--primary-color);
    border-radius: 50%;
    animation: spin 1.2s linear infinite;
}

.spinner-ring:nth-child(1) {
    width: 40px;
    height: 40px;
    border-top-color: var(--primary-color);
    animation-delay: 0s;
}

.spinner-ring:nth-child(2) {
    width: 32px;
    height: 32px;
    border-top-color: var(--secondary-color);
    animation-delay: -0.4s;
}

.spinner-ring:nth-child(3) {
    width: 24px;
    height: 24px;
    border-top-color: var(--success-color);
    animation-delay: -0.8s;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.loading-text {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.25rem;
}

.loading-text span {
    font-weight: 500;
    color: var(--text-primary);
    font-size: 0.95rem;
}

.loading-text small {
    color: var(--text-tertiary);
    font-size: 0.8rem;
}

/* Empty State */
.search-empty {
    background: linear-gradient(135deg, #fefbff 0%, #f8fafc 100%);
    border-radius: var(--radius-lg);
    margin: 0.5rem;
    border: 1px dashed var(--border-light);
}

.empty-icon i {
    font-size: 2.5rem;
    color: var(--text-tertiary);
    opacity: 0.6;
}

.empty-content h4 {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
}

.empty-content p {
    color: var(--text-secondary);
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
}

.empty-content small {
    color: var(--text-tertiary);
    font-size: 0.8rem;
    font-style: italic;
}

/* Search Info Message */
.search-info {
    padding: 2rem 1rem;
    text-align: center;
    color: var(--text-secondary);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
    border-radius: var(--radius-lg);
    margin: 0.5rem;
    border: none;
    border-left: 4px solid var(--primary-color);
}

.info-icon i {
    font-size: 2rem;
    color: var(--primary-color);
    opacity: 0.8;
}

.info-content h4 {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
}

.info-content p {
    color: var(--text-secondary);
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
}

.info-content small {
    color: var(--primary-color);
    font-size: 0.85rem;
    font-weight: 500;
}

/* Search Tips */
.search-tips {
    list-style: none;
    padding: 0;
    margin: 0.5rem 0 0 0;
    text-align: left;
}

.search-tips li {
    color: var(--text-secondary);
    font-size: 0.8rem;
    margin: 0.2rem 0;
}

/* Error State */
.search-error {
    background: linear-gradient(135deg, #fef2f2 0%, #fef5f5 100%);
    border-radius: var(--radius-lg);
    margin: 0.5rem;
    border: none;
    border-left: 4px solid var(--error-color);
}

.error-icon i {
    font-size: 2rem;
    color: var(--error-color);
    opacity: 0.8;
}

.error-content h4 {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--error-color);
    margin-bottom: 0.5rem;
}

.error-content p {
    color: #991b1b;
    margin-bottom: 1rem;
    font-size: 0.9rem;
}

.retry-search-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    background: var(--error-color);
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: var(--radius-md);
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition-fast);
}

.retry-search-btn:hover {
    background: #dc2626;
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
}

.retry-search-btn i {
    font-size: 0.8rem;
}

.search-result-item {
    display: flex;
    align-items: center;
    padding: 0.75rem;
    cursor: pointer;
    border-bottom: 1px solid var(--border-light);
    transition: var(--transition-fast);
    background: var(--bg-primary) !important;
    opacity: 1 !important;
}

.search-result-item:last-child {
    border-bottom: none;
}

.search-result-item:hover {
    background-color: var(--bg-secondary) !important;
}

.search-result-item .user-avatar {
    position: relative;
    margin-right: 0.75rem;
}

.search-result-item .user-avatar img {
    width: 40px;
    height: 40px;
    border-radius: var(--radius-full);
    object-fit: cover;
}

.search-result-item .status-indicator {
    position: absolute;
    bottom: 0;
    right: 0;
    width: 12px;
    height: 12px;
    border-radius: var(--radius-full);
    border: 2px solid var(--bg-primary);
}

.search-result-item .user-info {
    flex: 1;
}

.search-result-item .user-name {
    font-weight: 600;
    color: var(--text-primary) !important;
    margin-bottom: 0.125rem;
    opacity: 1 !important;
}

.search-result-item .user-details {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: var(--text-secondary);
}

.search-result-item .username {
    color: var(--text-tertiary);
}

.search-result-item .status.online {
    color: var(--success-color);
    font-weight: 500;
}

.search-result-item .last-seen {
    color: var(--text-tertiary);
}

.select-user-btn {
    background: var(--primary-color);
    color: white;
    border: none;
    padding: 0.5rem;
    border-radius: var(--radius-full);
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition-fast);
}

.select-user-btn:hover {
    background: var(--primary-dark);
    transform: scale(1.05);
}

/* Selected User Info */
.selected-user-info {
    display: flex;
    align-items: center;
    padding: 0.75rem;
    background: var(--primary-light);
    border: 1px solid var(--primary-color);
    border-radius: var(--radius-lg);
    margin-top: 0.5rem;
}

.selected-user-info .user-avatar {
    position: relative;
    margin-right: 0.75rem;
}

.selected-user-info .user-avatar img {
    width: 40px;
    height: 40px;
    border-radius: var(--radius-full);
    object-fit: cover;
}

.selected-user-info .user-info {
    flex: 1;
}

.selected-user-info .user-name {
    font-weight: 600;
    color: var(--primary-dark);
    margin-bottom: 0.125rem;
}

.selected-user-info .username {
    font-size: 0.875rem;
    color: var(--primary-color);
}

.change-user-btn {
    background: transparent;
    border: none;
    color: var(--primary-color);
    padding: 0.25rem;
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: var(--transition-fast);
}

.change-user-btn:hover {
    background: rgba(79, 70, 229, 0.1);
}

/* Contact List Styles */
.contacts-header {
    display: flex;
    align-items: center;
    margin-top: -8x;
    justify-content: space-between;
}

.add-contact-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    width: 100%;
    padding: 0.75rem 1rem;
    background: var(--primary-color);
    color: white;
    border: none;
    border-radius: var(--radius-lg);
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition-fast);
}

.add-contact-btn:hover {
    background: var(--primary-dark);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

.contacts-list,
.requests-list {
    padding: 0.5rem 0;
}

.contact-item,
.request-item {
    display: flex;
    align-items: center;
    padding: 0.5rem 0.5rem;
    transition: var(--transition-fast);
}

.contact-item:hover {
    background-color: var(--bg-secondary);
}

.contact-avatar,
.request-avatar {
    position: relative;
    margin-right: 0.75rem;
}

.contact-avatar img,
.request-avatar img {
    width: 48px;
    height: 48px;
    border-radius: var(--radius-full);
    object-fit: cover;
}

.contact-info,
.request-info {
    flex: 1;
}

.contact-name,
.request-name {
    font-weight: 500;
    color: var(--text-primary);
    margin-bottom: 0.125rem;
}

.contact-details,
.request-username {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: var(--text-secondary);
}

.request-message {
    font-style: italic;
    color: var(--text-secondary);
    margin: 0.25rem 0;
    font-size: 0.875rem;
}

.request-time {
    font-size: 0.75rem;
    color: var(--text-tertiary);
}

.contact-actions {
    display: flex;
    gap: 0.25rem;
}

.chat-btn,
.more-btn {
    background: transparent;
    border: none;
    padding: 0.5rem;
    border-radius: var(--radius-full);
    cursor: pointer;
    font-size: 1rem;
    transition: var(--transition-fast);
    color: var(--text-secondary);
}

.fas.fa-comment {
    font-size: 1.5em !important;
    color: var(--primary-color) !important;
}
.fas.fa-ellipsis-v {
    font-size: 1.5em !important;
    color: var(--primary-color) !important;
    /* Puedes ajustar el valor seg√∫n lo que necesites */
}

.chat-btn:hover {
    background: var(--primary-dark);
    color: white;
    transform: scale(1.05);
}

.more-btn:hover {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

/* Request Actions */
.request-actions {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    margin-left: 0.5rem;
}

.accept-btn,
.reject-btn {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.375rem 0.75rem;
    border: none;
    border-radius: var(--radius-md);
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition-fast);
    min-width: 80px;
    justify-content: center;
}

.accept-btn {
    background: var(--success-color);
    color: white;
}

.accept-btn:hover {
    background: #059669;
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
}

.reject-btn {
    background: var(--error-color);
    color: white;
}

.reject-btn:hover {
    background: #dc2626;
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
}

/* Empty States */
.empty-state {
    text-align: center;
    padding: 3rem 1rem;
    color: var(--text-secondary);
}

.empty-state i {
    font-size: 3rem;
    color: var(--text-tertiary);
    margin-bottom: 1rem;
}

.empty-state h3 {
    font-size: 1.25rem;
    margin-bottom: 0.5rem;
    color: var(--text-primary);
}

.empty-state p {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

/* Status Indicators */
.status-indicator.online {
    background: var(--success-color);
}

.status-indicator.away {
    background: #ff8c00;
    border: none !important;
    border-radius: 6px !important;
    width: auto !important;
    min-width: 16px !important;
    height: 12px !important;
    padding: 0 4px !important;
}

.status-indicator.busy {
    background: var(--error-color);
}

.status-indicator.offline {
    background: var(--gray-400);
}

/* ====== MESSENGER-STYLE CONTACT LAYOUT ====== */

/* Contact Item Container */
.contact-item {
    display: flex;
    align-items: center;
    padding: 6px 6px 8px 20px !important;
    margin-bottom: 4px;
    border-radius: var(--radius-lg);
    cursor: pointer !important;
    transition: all 0.2s ease-in-out;
    position: relative;
    background: transparent;
    opacity: 1; /* Changed from 0 to 1 */
    font-size: 19px;
    transform: translateY(0); /* Changed from 10px to 0 */
    pointer-events: auto !important; /* Ensure events work */
}

/* Immediate loading state for contact items */
.contact-item.contact-loaded {
    opacity: 1;
    transform: translateY(0);
}

/* Skeleton loading states */
.contact-item.contact-skeleton {
    opacity: 1;
    transform: translateY(0);
    pointer-events: none;
    cursor: default;
}

.skeleton-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(90deg, var(--bg-tertiary) 25%, var(--bg-quaternary) 50%, var(--bg-tertiary) 75%);
    background-size: 200% 100%;
    animation: skeleton-shimmer 1.5s infinite;
}

.skeleton-line {
    height: 16px;
    background: linear-gradient(90deg, var(--bg-tertiary) 25%, var(--bg-quaternary) 50%, var(--bg-tertiary) 75%);
    background-size: 200% 100%;
    animation: skeleton-shimmer 1.5s infinite;
    border-radius: 4px;
    width: 100%;
    margin-bottom: 8px;
}

.skeleton-line-small {
    height: 12px;
    background: linear-gradient(90deg, var(--bg-tertiary) 25%, var(--bg-quaternary) 50%, var(--bg-tertiary) 75%);
    background-size: 200% 100%;
    animation: skeleton-shimmer 1.5s infinite;
    border-radius: 4px;
    width: 70%;
}

@keyframes skeleton-shimmer {
    0% {
        background-position: -200% 0;
    }
    100% {
        background-position: 200% 0;
    }
}

/* ====== WHATSAPP-STYLE TYPING INDICATORS ====== */

/* Typing indicator in chat header */
.typing-indicator-container {
    display: none;
    opacity: 0;
    transform: translateY(-10px);
    transition: all 0.2s ease-in-out;
    margin-top: 2px;
}

.typing-indicator {
    display: flex;
    align-items: center;
    gap: 6px;
    color: var(--success-color);
    font-size: 13px;
    font-weight: 500;
}

.typing-text {
    color: var(--success-color);
}

.typing-dots {
    display: flex;
    gap: 2px;
    align-items: center;
}

.typing-dots span {
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background-color: var(--success-color);
    animation: typing-bounce 1.5s infinite;
}

.typing-dots span:nth-child(1) { animation-delay: 0s; }
.typing-dots span:nth-child(2) { animation-delay: 0.2s; }
.typing-dots span:nth-child(3) { animation-delay: 0.4s; }

@keyframes typing-bounce {
    0%, 80%, 100% {
        transform: scale(0.8);
        opacity: 0.6;
    }
    40% {
        transform: scale(1.2);
        opacity: 1;
    }
}

/* Contact typing indicator */
.contact-typing-indicator {
    display: none;
    align-items: center;
    gap: 4px;
    margin-top: 4px;
    opacity: 0;
    transition: opacity 0.2s ease-in-out;
}

.contact-typing-indicator .typing-text {
    font-size: 12px;
    color: var(--success-color);
    font-style: italic;
}

.typing-dots-small {
    display: flex;
    gap: 1px;
    align-items: center;
}

.typing-dots-small span {
    width: 3px;
    height: 3px;
    border-radius: 50%;
    background-color: var(--success-color);
    animation: typing-bounce-small 1.5s infinite;
}

.typing-dots-small span:nth-child(1) { animation-delay: 0s; }
.typing-dots-small span:nth-child(2) { animation-delay: 0.2s; }
.typing-dots-small span:nth-child(3) { animation-delay: 0.4s; }

@keyframes typing-bounce-small {
    0%, 80%, 100% {
        transform: scale(0.7);
        opacity: 0.5;
    }
    40% {
        transform: scale(1);
        opacity: 1;
    }
}

/* Conversation typing indicator */
.conversation-typing-indicator {
    display: none;
    align-items: center;
    gap: 4px;
    opacity: 0;
    transition: opacity 0.2s ease-in-out;
    color: var(--success-color);
    font-size: 13px;
    font-style: italic;
    margin-top: 2px;
}

.conversation-typing-indicator .typing-text {
    color: var(--success-color);
}

/* Online status improvements - instant green */
.status-indicator.online {
    background: #25d366 !important; /* vigichat green */
    box-shadow: 0 0 0 2px #25d366;
    border: 2px solid var(--bg-primary) !important;
    animation: online-pulse 2s infinite;
}

@keyframes online-pulse {
    0% {
        box-shadow: 0 0 0 2px #25d366;
    }
    50% {
        box-shadow: 0 0 0 4px rgba(37, 211, 102, 0.3);
    }
    100% {
        box-shadow: 0 0 0 2px #25d366;
    }
}

/* Real-time status updates */
.status-indicator {
    transition: all 0.15s ease-in-out;
}

.status-indicator.status-updating {
    transform: scale(1.1);
    opacity: 0.8;
}

.contact-item.contact-loaded:hover {
    background-color: var(--bg-tertiary);
    transform: translateY(-1px);
}

/* === SKELETON LOADING IMPROVEMENTS === */

/* Skeleton shimmer animation */
.skeleton-shimmer {
    background: linear-gradient(90deg, 
        var(--gray-200) 25%, 
        var(--gray-100) 50%, 
        var(--gray-200) 75%
    );
    background-size: 200% 100%;
    animation: skeleton-shimmer 1.5s ease-in-out infinite;
    border-radius: 0.5rem;
    height: 16px;
}

@keyframes skeleton-shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
}

/* Contacts loading skeleton */
.contacts-loading-container {
    padding: 0.5rem 0;
}

.contact-item.contact-skeleton {
    padding: 0.75rem 1rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    background: var(--bg-primary);
    border-radius: 0.75rem;
    margin-bottom: 0.5rem;
    animation: fadeIn 0.3s ease-out;
    pointer-events: none;
}

.contact-skeleton .contact-avatar-container {
    position: relative;
    flex-shrink: 0;
}

.contact-skeleton .contact-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: var(--gray-200);
}

.contact-skeleton .status-indicator {
    position: absolute;
    bottom: 2px;
    right: 2px;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: var(--gray-200);
    border: 2px solid var(--bg-primary);
}

.contact-skeleton .contact-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.contact-skeleton .contact-name {
    height: 16px;
    background: var(--gray-200);
    border-radius: 0.25rem;
}

.contact-skeleton .contact-status {
    height: 12px;
    background: var(--gray-100);
    border-radius: 0.25rem;
}

.contact-skeleton .contact-actions {
    flex-shrink: 0;
}

/* Chat skeleton (for messages list) */
.chat-loading-container {
    padding: 0.5rem 0;
}

.chat-item.chat-skeleton {
    padding: 0.75rem 1rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    background: var(--bg-primary);
    border-radius: 0.75rem;
    margin-bottom: 0.5rem;
    animation: fadeIn 0.3s ease-out;
    pointer-events: none;
}

.chat-skeleton .chat-item-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: var(--gray-200);
    flex-shrink: 0;
}

.chat-skeleton .chat-item-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.chat-skeleton .chat-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.chat-skeleton .chat-item-name {
    height: 16px;
    width: 40%;
    background: var(--gray-200);
    border-radius: 0.25rem;
}

.chat-skeleton .chat-item-time {
    height: 12px;
    width: 20%;
    background: var(--gray-100);
    border-radius: 0.25rem;
}

.chat-skeleton .chat-item-preview {
    height: 14px;
    width: 60%;
    background: var(--gray-100);
    border-radius: 0.25rem;
}

/* Fade in animation */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Smooth transition classes */
.smooth-fade-in {
    animation: fadeIn 0.3s ease-out;
}

.smooth-fade-out {
    animation: fadeOut 0.3s ease-out;
}

@keyframes fadeOut {
    from {
        opacity: 1;
        transform: translateY(0);
    }
    to {
        opacity: 0;
        transform: translateY(-10px);
    }
}

/* Mobile optimizations for skeleton */
@media (max-width: 768px) {
    .contact-item.contact-skeleton,
    .chat-item.chat-skeleton {
        margin-bottom: 0.25rem;
        padding: 0.5rem 0.75rem;
    }
    
    .contact-skeleton .contact-avatar,
    .chat-skeleton .chat-item-avatar {
        width: 40px;
        height: 40px;
    }
    
    .skeleton-shimmer {
        animation-duration: 1.2s; /* Slightly faster on mobile */
    }
}

/* Override any conflicting hover states for skeleton items */
.contact-item.contact-skeleton:hover {
    background: transparent;
    transform: translateY(0);
}

/* Avatar Container with Messenger-style Status */
.contact-avatar-container {
    position: relative !important;
    margin-right: 0 !important;
    cursor: pointer;
    width: 50px;
    transition: transform 0.2s ease-in-out;
    flex-shrink: 0;
}

.contact-avatar-container:hover {
    transform: scale(1.05);
}

.contact-avatar {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid var(--border-light);
    transition: border-color 0.2s ease-in-out;
}

.contact-avatar-container:hover .contact-avatar {
    border-color: var(--primary-color);
}

/* Messenger-style Status Indicator */
.contact-avatar-container .status-indicator {
    position: absolute;
    bottom: 2px;
    right: -6px;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    border: 3px solid var(--bg-primary);
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: 700;
    color: white;
    transition: all 0.2s ease-in-out;
}

.contact-avatar-container .status-indicator.online {
    background: var(--success-color);
    box-shadow: 0 0 0 2px var(--success-color);
}

.contact-avatar-container .status-indicator.away {
    background: #ff8c00;
    border: none !important;
    border-radius: 6px !important;
    width: auto !important;
    min-width: 24px !important;
    height: 16px !important;
    padding: 0 6px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    right: -8px !important;
}

.contact-avatar-container .status-indicator .status-time {
    font-size: 10px;
    font-weight: 800;
    color: white;
    text-shadow: none;
    background: none;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
}

/* Contact Info Section */
.contact-info {
    flex: 1;
    min-width: 0;
    cursor: pointer;
    transition: color 0.2s ease-in-out;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    text-align: left;
}

.contact-info:hover {
    color: var(--primary-color);
}

.contact-details {
    display: flex;
    flex-direction: column;
    gap: 2px;
    min-width: 0;
    width: 100%;
    align-items: flex-start;
}

.contact-name {
    font-size: 1rem !important;
    font-weight: 500;
    color: var(--text-primary);
    line-height: 1.3;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: left;
}

.contact-username {
    font-size: 13px;
    color: var(--text-secondary);
    font-weight: 400;
    line-height: 1.2;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: left;
}

.contact-email {
    font-size: 12px;
    color: var(--text-tertiary);
    font-weight: 300;
    line-height: 1.1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-style: italic;
    width: 100%;
    text-align: left;
}

/* Contact Actions */
.contact-actions {
    display: flex;
    align-items: center;
    flex-shrink: 0;
}

.contact-action-buttons {
    display: flex;
    align-items: center;
    gap: 6px;
    opacity: 0.7;
    transition: opacity 0.2s ease-in-out;
}

.contact-item:hover .contact-action-buttons {
    opacity: 1;
}

.chat-btn,
.more-btn {
    background: transparent;
    border: none;
    padding: 8px;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    color: var(--text-tertiary);
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
}

.chat-btn {
    color: var(--primary-color);
}

.chat-btn:hover {
    background: rgba(16, 185, 129, 0.1);
    color: var(--primary-dark);
    transform: scale(1.1);
}

.more-btn:hover {
    background: var(--primary-light);
    color: var(--primary-color);
    transform: scale(1.1);
}

/* Enhanced hover effects for action buttons */
.contact-item:hover .chat-btn,
.contact-item:hover .more-btn {
    opacity: 1;
    background: var(--bg-secondary);
}

.contact-item:hover .chat-btn {
    color: var(--success-color);
    background: rgba(16, 185, 129, 0.05);
}

.contact-item:hover .more-btn {
    color: var(--text-primary);
}

/* Profile Modal Styles */
.modal.profile-modal {
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal.contact-profile-modal {
    display: block;
    background: transparent;
}

.modal.contact-profile-modal.compact-menu {
    pointer-events: none;
}

.modal.contact-profile-modal.compact-menu .modal-overlay {
    background: transparent;
    pointer-events: all;
}

.modal-content.profile-management {
    background: var(--bg-primary);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-xl);
    min-width: 360px;
    max-width: 480px;
    overflow: hidden;
    animation: modalSlideIn 0.3s ease-out;
}

/* Compact Contact Menu */
.modal-content.contact-profile.compact {
    background: var(--bg-primary);
    border-radius: var(--radius-lg);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12), 0 4px 16px rgba(0, 0, 0, 0.08);
    min-width: 180px;
    width: 180px;
    padding: 0;
    border: 1px solid var(--border-light);
    animation: menuSlideIn 0.2s ease-out;
    pointer-events: all;
    z-index: var(--z-modal);
}

@keyframes modalSlideIn {
    from {
        transform: scale(0.9) translateY(-20px);
        opacity: 0;
    }
    to {
        transform: scale(1) translateY(0);
        opacity: 1;
    }
}

@keyframes menuSlideIn {
    from {
        transform: scale(0.95) translateX(-10px);
        opacity: 0;
    }
    to {
        transform: scale(1) translateX(0);
        opacity: 1;
    }
}

.modal-header {
    padding: 20px 24px 16px;
    border-bottom: 1px solid var(--border-light);
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.modal-header h3 {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 8px;
}

.close-modal {
    background: transparent;
    border: none;
    padding: 8px;
    border-radius: 50%;
    cursor: pointer;
    color: var(--text-secondary);
    transition: all 0.2s ease-in-out;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.close-modal:hover {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

.modal-body {
    padding: 0;
}

/* Profile Actions */
.profile-actions,
.contact-actions {
    display: flex;
    flex-direction: column;
    gap: 0;
}

.profile-action-btn,
.contact-action-btn {
    background: transparent;
    border: none;
    padding: 16px 24px;
    text-align: left;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 15px;
    color: var(--text-primary);
    border-bottom: 1px solid var(--border-light);
}

.profile-action-btn:last-child,
.contact-action-btn:last-child {
    border-bottom: none;
}

.profile-action-btn:hover,
.contact-action-btn:hover {
    background: var(--bg-tertiary);
    color: var(--primary-color);
}

.contact-action-btn.warning {
    color: var(--warning-color);
}

.contact-action-btn.warning:hover {
    background: rgba(245, 158, 11, 0.1);
    color: var(--warning-color);
}

.contact-action-btn.danger {
    color: var(--error-color);
}

.contact-action-btn.danger:hover {
    background: rgba(239, 68, 68, 0.1);
    color: var(--error-color);
}

.profile-action-btn i,
.contact-action-btn i {
    width: 20px;
    font-size: 16px;
    text-align: center;
}

/* Compact Contact Menu Actions */
.contact-menu-actions {
    display: flex;
    flex-direction: column;
    padding: 4px 0;
}

.contact-menu-btn {
    background: transparent;
    border: none;
    padding: 10px 16px;
    text-align: left;
    cursor: pointer;
    transition: all 0.15s ease-in-out;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 14px;
    color: var(--text-primary);
    border-radius: 0;
    width: 100%;
    position: relative;
}

.contact-menu-btn:first-child {
    border-top-left-radius: var(--radius-lg);
    border-top-right-radius: var(--radius-lg);
}

.contact-menu-btn:last-child {
    border-bottom-left-radius: var(--radius-lg);
    border-bottom-right-radius: var(--radius-lg);
}

.contact-menu-btn:hover {
    background: var(--bg-tertiary);
    color: var(--primary-color);
}

.contact-menu-btn.warning {
    color: var(--warning-color);
}

.contact-menu-btn.warning:hover {
    background: rgba(245, 158, 11, 0.08);
    color: var(--warning-color);
}

.contact-menu-btn.danger {
    color: var(--error-color);
}

.contact-menu-btn.danger:hover {
    background: rgba(239, 68, 68, 0.08);
    color: var(--error-color);
}

.contact-menu-btn i {
    width: 14px;
    font-size: 13px;
    text-align: left;
    flex-shrink: 0;
}

.contact-menu-btn span {
    flex: 1;
    text-align: left;
    font-weight: 500;
}

/* Dark Theme Adjustments */
[data-theme="dark"] .contact-avatar-container .status-indicator {
    border-color: var(--bg-dark);
}

[data-theme="dark"] .contact-avatar-container .status-indicator.away {
    background: #ff8c00;
    border: none !important;
    border-radius: 6px !important;
    width: auto !important;
    min-width: 24px !important;
    height: 16px !important;
    padding: 0 6px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

[data-theme="dark"] .modal-content.profile-management,
[data-theme="dark"] .modal-content.contact-profile {
    background: var(--bg-dark-secondary);
    border: 1px solid var(--border-medium);
}

[data-theme="dark"] .modal-content.contact-profile.compact {
    background: var(--bg-dark-secondary);
    border: 1px solid var(--border-medium);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 4px 16px rgba(0, 0, 0, 0.2);
}

[data-theme="dark"] .modal-header {
    border-bottom-color: var(--border-medium);
}

[data-theme="dark"] .profile-action-btn,
[data-theme="dark"] .contact-action-btn {
    border-bottom-color: var(--border-medium);
}

[data-theme="dark"] .contact-menu-btn:hover {
    background: var(--bg-dark);
}

/* Mobile Optimizations */
@media (max-width: 768px) {
    .contact-item {
        padding: 6px 6px 8px 20px !important;
        gap: 4px !important;
    }
    
    .contact-avatar {
        width: 48px;
        height: 48px;
    }
    
    .contact-avatar-container .status-indicator {
        width: 14px;
        height: 14px;
        border-width: 2px;
        bottom: 1px;
        right: 1px;
    }
    
    .contact-name {
        font-size: 14px;
    }
    
    .contact-username {
        font-size: 12px;
    }
    
    .contact-email {
        font-size: 11px;
    }
    
    .contact-action-buttons {
        gap: 1px;
    }
    
    .chat-btn,
    .more-btn {
        width: 38px;
        height: 38px;
        padding: 2px !important;
        font-size: 22px;
    }
    
    .modal-content.profile-management,
    .modal-content.contact-profile {
        margin: 20px;
        min-width: auto;
        width: calc(100% - 40px);
    }
    
    /* Show action buttons always on mobile for better UX */
    .contact-action-buttons {
        opacity: 1;
    }
    
    /* Compact menu adjustments for mobile */
    .modal-content.contact-profile.compact {
        min-width: 160px;
        width: 160px;
    }
    
    .contact-menu-btn {
        padding: 12px 14px;
        font-size: 13px;
        gap: 8px;
    }
    
    .contact-menu-btn i {
        font-size: 12px;
        width: 12px;
    }
    
    /* Adjust positioning for mobile */
    .modal.contact-profile-modal.compact-menu .modal-content {
        position: fixed !important;
    }
}

/* ====== NOTIFICATIONS SYSTEM ====== */

/* Enhanced Notifications */
.notification {
    position: fixed;
    top: 1.5rem;
    left: 1.5rem;
    min-width: 320px;
    max-width: 450px;
    background: var(--bg-primary);
    border-radius: var(--radius-xl);
    padding: 1.25rem 1.5rem;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 10px 25px -5px rgba(0, 0, 0, 0.1);
    z-index: var(--z-notification);
    opacity: 0;
    transform: translateX(-100%);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(8px);
    font-size: 1rem;
    font-weight: 500;
    line-height: 1.5;
}

.notification.show {
    opacity: 1;
    transform: translateX(0);
}

.notification.hide {
    transform: translateX(-100%);
    opacity: 0;
}

/* Success Notification - Green Theme */
.notification.success {
    background: linear-gradient(135deg, #dcfce7 0%, #f0fdf4 100%);
    border-left: 4px solid #22c55e;
    color: #15803d;
    box-shadow: 
        0 25px 50px -12px rgba(34, 197, 94, 0.4), 
        0 10px 25px -5px rgba(34, 197, 94, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.6);
}

/* Error Notification - Red Theme */
.notification.error {
    background: linear-gradient(135deg, #fef2f2 0%, #fef5f5 100%);
    border-left: 4px solid #ef4444;
    color: #dc2626;
    box-shadow: 
        0 25px 50px -12px rgba(239, 68, 68, 0.4), 
        0 10px 25px -5px rgba(239, 68, 68, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.6);
}

/* Info Notification - Blue Theme */
.notification.info {
    background: linear-gradient(135deg, #dbeafe 0%, #eff6ff 100%);
    border-left: 4px solid #3b82f6;
    color: #1d4ed8;
    box-shadow: 
        0 25px 50px -12px rgba(59, 130, 246, 0.4), 
        0 10px 25px -5px rgba(59, 130, 246, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.6);
}

/* Warning Notification - Orange Theme */
.notification.warning {
    background: linear-gradient(135deg, #fef3c7 0%, #fffbeb 100%);
    border-left: 4px solid #f59e0b;
    color: #d97706;
    box-shadow: 
        0 25px 50px -12px rgba(245, 158, 11, 0.4), 
        0 10px 25px -5px rgba(245, 158, 11, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.6);
}

/* Notification Content Enhancement */

/* Add pulse animation for important notifications */
.notification.important {
    animation: notificationPulse 2s infinite;
}

@keyframes notificationPulse {
    0%, 100% {
        transform: translateX(0) scale(1);
    }
    50% {
        transform: translateX(0) scale(1.02);
    }
}


/* Refresh animation for updated notifications */
.notification-refreshed {
    animation: notificationRefresh 0.4s ease-out;
}

@keyframes notificationRefresh {
    0% {
        transform: translateX(0) scale(1);
    }
    25% {
        transform: translateX(-10px) scale(1.05);
        box-shadow: 
            0 30px 60px -12px rgba(59, 130, 246, 0.6), 
            0 15px 30px -5px rgba(59, 130, 246, 0.3);
    }
    50% {
        transform: translateX(-5px) scale(1.02);
    }
    100% {
        transform: translateX(0) scale(1);
    }
}

/* Close button enhancement */
.notification-close {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    background: rgba(0, 0, 0, 0.1);
    border: none;
    color: currentColor;
    cursor: pointer;
    font-size: 1rem;
    padding: 0.25rem;
    border-radius: var(--radius-full);
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition-fast);
    opacity: 0.7;
}

.notification-close:hover {
    background: rgba(0, 0, 0, 0.2);
    opacity: 1;
    transform: scale(1.1);
}

/* Modal Improvements */
.modal-content .form-group {
    position: relative;
}

.modal-content .form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
    color: var(--text-primary);
}

.modal-content input[type="text"],
.modal-content textarea {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    font-size: 0.875rem;
    transition: var(--transition-fast);
}

.modal-content input[type="text"]:focus,
.modal-content textarea:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
}

.modal-content textarea {
    resize: vertical;
    min-height: 80px;
    max-height: 150px;
}

/* Relationship Status Indicators */
.relationship-badge {
    display: inline-block;
    font-size: 0.75rem;
    padding: 0.125rem 0.5rem;
    border-radius: var(--radius-full);
    font-weight: 500;
    margin-top: 0.25rem;
}

.relationship-badge.contact {
    background: #dcfce7;
    color: #166534;
    border: none;
    border-left: 4px solid #166534;
}

.relationship-badge.sent {
    background: #fef3c7;
    color: #92400e;
    border: none;
    border-left: 4px solid #92400e;
}

.relationship-badge.received {
    background: #dbeafe;
    color: #1e40af;
    border: none;
    border-left: 4px solid #1e40af;
}

/* Contact Status Buttons */
.contact-status-btn {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.375rem 0.75rem;
    border: none;
    border-radius: var(--radius-md);
    font-size: 0.75rem;
    font-weight: 500;
    cursor: not-allowed;
    transition: var(--transition-fast);
    min-width: 80px;
    justify-content: center;
}

.contact-status-btn.contact {
    background: var(--success-color);
    color: white;
    opacity: 0.8;
}

.contact-status-btn.sent {
    background: var(--warning-color);
    color: white;
    opacity: 0.8;
}

.contact-status-btn.received {
    background: var(--secondary-color);
    color: white;
    cursor: pointer;
    opacity: 1;
}

.contact-status-btn.received:hover {
    background: #0891b2;
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
}

/* Search Result Item States */
.search-result-item.non-clickable {
    opacity: 0.8;
    cursor: default;
}

.search-result-item.non-clickable:hover {
    background-color: transparent;
}

.search-result-item.clickable:hover {
    background-color: var(--bg-secondary) !important;
}

/* Highlighted Request Item */
.request-item.highlighted {
    background: var(--primary-light);
    border: 1px solid var(--primary-color);
    border-radius: var(--radius-lg);
    animation: highlight-pulse 2s ease-in-out;
}

@keyframes highlight-pulse {
    0% {
        box-shadow: 0 0 0 0 rgba(79, 70, 229, 0.4);
    }
    50% {
        box-shadow: 0 0 0 10px rgba(79, 70, 229, 0);
    }
    100% {
        box-shadow: 0 0 0 0 rgba(79, 70, 229, 0);
    }
}

/* Enhanced Select User Button */
.select-user-btn {
    background: var(--primary-color);
    color: white;
    border: none;
    padding: 0.5rem;
    border-radius: var(--radius-full);
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition-fast);
    position: relative;
    overflow: hidden;
}

.select-user-btn:hover {
    background: var(--primary-dark);
    transform: scale(1.05);
}

.select-user-btn:active {
    transform: scale(0.95);
}

.select-user-btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transition: all 0.3s;
    transform: translate(-50%, -50%);
}

.select-user-btn:active::before {
    width: 32px;
    height: 32px;
}

/* Search Results Improvements */
.search-result-item {
    display: flex;
    align-items: center;
    padding: 0.875rem;
    cursor: pointer;
    border-bottom: 1px solid var(--border-light);
    transition: var(--transition-fast);
    position: relative;
    background: var(--bg-primary) !important;
    opacity: 1 !important;
}

.search-result-item:last-child {
    border-bottom: none;
}

.search-result-item .user-info {
    flex: 1;
    min-width: 0;
}

.search-result-item .user-name {
    font-weight: 600;
    color: var(--text-primary) !important;
    margin-bottom: 0.125rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    opacity: 1 !important;
}

.search-result-item .user-details {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: var(--text-secondary);
    flex-wrap: wrap;
}

/* Mobile Responsiveness */
@media (max-width: 768px) {
    .request-actions {
        flex-direction: row;
        gap: 0.5rem;
    }
    
    .accept-btn,
    .reject-btn {
        min-width: 70px;
        font-size: 0.75rem;
        padding: 0.25rem 0.5rem;
    }
    
    .alerts-container {
        left: 1rem;
        right: 1rem;
        top: 1rem;
        max-width: none;
    }
    
    .alert {
        max-width: none;
        min-width: unset;
        font-size: 0.95rem;
        padding: 1rem 1.25rem;
    }
    
    .contact-item,
    .request-item {
        padding: 0.5rem;
    }
    
    .contact-avatar img,
    .request-avatar img {
        width: 40px;
        height: 40px;
    }

    .relationship-badge {
        font-size: 0.625rem;
        padding: 0.1rem 0.4rem;
    }

    .contact-status-btn {
        min-width: 70px;
        font-size: 0.675rem;
        padding: 0.25rem 0.5rem;
    }

    .search-result-item {
        padding: 0.75rem;
    }

    .search-result-item .user-details {
        font-size: 0.8rem;
    }
}

/* Profile Photo Modal */
.photo-modal {
    z-index: 2000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s ease, visibility 0.2s ease;
}

.photo-modal.show {
    opacity: 1;
    visibility: visible;
}

.photo-modal .modal-overlay {
    background: rgba(0, 0, 0, 0.9);
    transition: background 0.2s ease;
}

.photo-modal-content {
    position: fixed;
    left: 20px;
    top: 50%;
    transform: translateY(-50%) scale(0.9);
    width: 400px;
    height: 500px;
    background: var(--bg-primary);
    border-radius: 12px;
    box-shadow: var(--shadow-xl);
    overflow: hidden;
    z-index: 2001;
    border: 1px solid var(--border-light);
    transition: transform 0.2s ease;
}

.photo-modal.show .photo-modal-content {
    transform: translateY(-50%) scale(1);
}

.photo-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-light);
}

.photo-user-info h3 {
    margin: 0;
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
}

.photo-user-info span {
    font-size: 14px;
    color: var(--text-secondary);
}

.close-photo-modal {
    background: none;
    border: none;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: var(--text-secondary);
    transition: var(--transition-fast);
}

.close-photo-modal:hover {
    background: var(--gray-100);
    color: var(--text-primary);
}

[data-theme="dark"] .close-photo-modal:hover {
    background: var(--gray-700);
}

.photo-modal-body {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: calc(100% - 80px);
    padding: 16px;
}

.photo-modal-body img {
    max-width: 85%; /* Reducido de 100% a 85% */
    max-height: 75%; /* Reducido para dejar espacio a los botones */
    border-radius: 8px;
    object-fit: contain;
    margin-bottom: 1rem;
}

/* Avatar click styles - ONLY for photo expansion */
.profile-img,
.contact-avatar,
.contact-avatar-container img,
.search-result-avatar,
.profile-large-image {
    cursor: pointer;
    transition: var(--transition-fast);
    position: relative;
}

/* Profile info areas - for full profile view */
.contact-info,
.chat-info,
.contact-details {
    cursor: pointer;
    transition: var(--transition-fast);
    border-radius: 8px;
    padding: 4px;
    margin: -4px;
}

.contact-info:hover,
.chat-info:hover,
.contact-details:hover {
    background: var(--gray-50);
}

[data-theme="dark"] .contact-info:hover,
[data-theme="dark"] .chat-info:hover,
[data-theme="dark"] .contact-details:hover {
    background: var(--gray-800);
}

/* Eliminado hover de fotos de perfil */

/* Full Profile Modal */
.profile-modal {
    z-index: 1900;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

.profile-modal.show {
    opacity: 1;
    visibility: visible;
}

.profile-modal .modal-overlay {
    background: rgba(0, 0, 0, 0.7);
    transition: background 0.3s ease;
}

.profile-modal-content {
    position: fixed;
    left: 20px;
    top: 20px;
    bottom: 20px;
    width: 450px;
    background: var(--bg-primary);
    border-radius: 16px;
    box-shadow: var(--shadow-xl);
    overflow: hidden;
    z-index: 1901;
    border: 1px solid var(--border-light);
    transform: translateX(-100%) scale(0.9);
    transition: transform 0.3s ease;
    display: flex;
    flex-direction: column;
}

.profile-modal.show .profile-modal-content {
    transform: translateX(0) scale(1);
}

.profile-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 24px;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-light);
    flex-shrink: 0;
}

.profile-modal-header h3 {
    margin: 0;
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
}

.close-profile-modal {
    background: none;
    border: none;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: var(--text-secondary);
    transition: var(--transition-fast);
}

.close-profile-modal:hover {
    background: var(--gray-100);
    color: var(--text-primary);
}

[data-theme="dark"] .close-profile-modal:hover {
    background: var(--gray-700);
}

.profile-modal-body {
    flex: 1;
    overflow-y: auto;
    padding: 0;
}

/* Profile Photo Section */
.profile-photo-section {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    padding: 40px 24px;
    text-align: center;
    position: relative;
}

.profile-photo-container {
    position: relative;
    display: inline-block;
}

.profile-large-image {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    border: 4px solid rgba(255, 255, 255, 0.3);
    object-fit: cover;
    cursor: pointer;
    transition: var(--transition-fast);
}

.profile-large-image:hover {
    transform: scale(1.05);
}

.expand-photo-btn {
    position: absolute;
    bottom: 8px;
    right: 8px;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: var(--bg-primary);
    border: 2px solid var(--border-light);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition-fast);
    box-shadow: var(--shadow-sm);
}

.expand-photo-btn:hover {
    background: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
}

/* Profile Info Section */
.profile-info-section {
    padding: 24px;
}

.profile-basic-info {
    text-align: center;
    margin-bottom: 32px;
}

.profile-name-section {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 16px;
    margin-bottom: 8px;
}

.profile-basic-info h2 {
    margin: 0;
    font-size: 24px;
    font-weight: 600;
    color: var(--text-primary);
}

.profile-quick-actions {
    display: flex;
    gap: 8px;
}

.quick-action-btn {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: 1px solid var(--border-light);
    background: var(--bg-primary);
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition-fast);
    font-size: 14px;
}

.quick-action-btn:hover {
    background: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
    transform: translateY(-1px);
}

.profile-basic-info p {
    margin: 0 0 16px 0;
    font-size: 16px;
    color: var(--text-secondary);
}

.profile-status-info {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-size: 14px;
    color: var(--text-secondary);
}

.status-separator {
    color: var(--text-tertiary);
}

/* Profile Details */
.profile-details {
    margin-bottom: 32px;
}




/* Shared Content Sections */
.shared-content {
    margin-bottom: 32px;
}

.shared-section {
    margin-bottom: 24px;
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border-light);
}

.section-header h4 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 8px;
}

.section-header h4 i {
    color: var(--text-secondary);
    font-size: 14px;
}

.view-all-btn {
    background: none;
    border: none;
    color: var(--primary-color);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    padding: 4px 8px;
    border-radius: 4px;
    transition: var(--transition-fast);
}

.view-all-btn:hover {
    background: var(--primary-light);
}

.file-placeholder {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 32px 16px;
    color: var(--text-tertiary);
    text-align: center;
    border: 2px dashed var(--border-light);
    border-radius: 8px;
    grid-column: 1 / -1;
}

.file-placeholder i {
    font-size: 24px;
    margin-bottom: 8px;
    opacity: 0.5;
}

.file-placeholder span {
    font-size: 14px;
}

/* Shared Files List */
.shared-files-list {
    max-height: 200px;
    overflow-y: auto;
}

.file-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 0;
    border-bottom: 1px solid var(--border-light);
    cursor: pointer;
    transition: var(--transition-fast);
}

.file-item:last-child {
    border-bottom: none;
}

.file-item:hover {
    background: var(--gray-50);
    border-radius: 8px;
    padding-left: 8px;
    padding-right: 8px;
    margin: 0 -8px;
}

[data-theme="dark"] .file-item:hover {
    background: var(--gray-800);
}

.file-icon {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    background: var(--gray-100);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    font-size: 16px;
    flex-shrink: 0;
}

[data-theme="dark"] .file-icon {
    background: var(--gray-700);
}

.file-icon.pdf {
    background: #ff4444;
    color: white;
}

.file-icon.doc {
    background: #2196f3;
    color: white;
}

.file-icon.image {
    background: #4caf50;
    color: white;
}

.file-icon.zip {
    background: #ff9800;
    color: white;
}

.file-info {
    flex: 1;
    min-width: 0;
}

.file-name {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary);
    margin-bottom: 2px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.file-details {
    font-size: 12px;
    color: var(--text-secondary);
}

.file-size {
    font-size: 12px;
    color: var(--text-tertiary);
    flex-shrink: 0;
}

/* Contact Actions */
.contact-actions {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding-top: 0;
    border: none;
}

.contact-action-btn {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 0;
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    transition: var(--transition-fast);
    border-radius: 6px;
    padding-left: 12px;
}

.contact-action-btn:hover {
    background: var(--gray-50);
    color: var(--text-primary);
}

[data-theme="dark"] .contact-action-btn:hover {
    background: var(--gray-800);
}

.contact-action-btn i {
    width: 16px;
    text-align: center;
}

/* Responsive adjustments for photo modal */
@media (max-width: 768px) {
    .photo-modal-content {
        left: 10px;
        right: 10px;
        width: calc(100% - 20px);
        height: 80vh;
        max-height: 600px;
    }
}

@media (max-width: 480px) {
    .photo-modal-content {
        left: 5px;
        right: 5px;
        width: calc(100% - 10px);
        height: 70vh;
    }
    
    .photo-modal-header {
        padding: 15px;
    }
    
    .photo-user-info h3 {
        font-size: 16px;
    }
    
    .photo-user-info span {
        font-size: 12px;
    }
}

/* Responsive adjustments for profile modal */
@media (max-width: 768px) {
    .profile-modal-content {
        left: 10px;
        right: 10px;
        width: calc(100% - 20px);
        transform: translateY(-100%) scale(0.9);
    }

    .profile-modal.show .profile-modal-content {
        transform: translateY(0) scale(1);
    }

    .profile-actions {
        flex-direction: column;
    }

    .action-btn {
        width: 100%;
    }
}

@media (max-width: 480px) {
    .profile-modal-content {
        left: 5px;
        right: 5px;
        width: calc(100% - 10px);
        top: 10px;
        bottom: 10px;
    }

    .profile-modal-header {
        padding: 16px;
    }

    .profile-info-section {
        padding: 16px;
    }

    .profile-photo-section {
        padding: 24px 16px;
    }

    .profile-large-image {
        width: 100px;
        height: 100px;
    }

    .profile-basic-info h2 {
        font-size: 20px;
    }

    .profile-name-section {
        gap: 12px;
    }

    .quick-action-btn {
        width: 32px;
        height: 32px;
        font-size: 12px;
    }

    .shared-content {
        margin-bottom: 16px;
    }

    .shared-section {
        margin-bottom: 16px;
    }

    .section-header {
        margin-bottom: 12px;
    }

    .section-header h4 {
        font-size: 14px;
    }


    .shared-files-list {
        max-height: 150px;
    }

    .file-item {
        padding: 8px 0;
    }

    .file-icon {
        width: 32px;
        height: 32px;
        font-size: 14px;
    }

    .file-name {
        font-size: 13px;
    }

    .file-details,
    .file-size {
        font-size: 11px;
    }
}

/* Context Menu */
.context-menu {
    position: absolute;
    background: var(--bg-primary);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-xl);
    padding: 0.5rem 0;
    min-width: 180px;
    z-index: var(--z-dropdown);
    animation: contextMenuSlideIn 0.15s ease-out;
}

.context-menu-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    color: var(--text-primary);
    cursor: pointer;
    transition: var(--transition-fast);
    font-size: 0.9rem;
}

.context-menu-item:hover {
    background: var(--bg-tertiary);
}

.context-menu-item.danger {
    color: var(--error-color);
}

.context-menu-item.danger:hover {
    background: rgba(239, 68, 68, 0.1);
}

.context-menu-separator {
    height: 1px;
    background: var(--border-light);
    margin: 0.5rem 0;
}

@keyframes contextMenuSlideIn {
    from {
        opacity: 0;
        transform: translateY(-5px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* Responsive Design */
@media (max-width: 1024px) {
    .sidebar {
        width: 320px;
    }
    
    .message {
        max-width: calc(20% - 1rem) !important;
    }
    
   
}

@media (max-width: 768px) {
    .app-container {
        position: relative;
        height: var(--app-height);
        max-height: var(--app-height);
        overflow: hidden;
    }

    .mobile-online-indicator {
    position: absolute;
    bottom: -0.5rem;
    right: 2.3px;
    width: 12px;
    height: 12px;
    background: var(--success-color);
    border: 2px solid var(--bg-primary);
    border-radius: var(--radius-full);
}
    
    /* Fixed chat header positioning for mobile - ALWAYS VISIBLE */
    .chat-header {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        z-index: 200 !important;
        background: var(--bg-primary) !important;
        border-bottom: 1px solid var(--border-light) !important;
        height: var(--header-height) !important;
        padding: 0.75rem 1rem !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
        /* Ensure header stays visible even with virtual keyboard */
        transform: translateZ(0) !important;
        -webkit-transform: translateZ(0) !important;
        backdrop-filter: blur(10px) !important;
        /* Prevent header from being affected by viewport changes */
        will-change: transform !important;
    }
    
    .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        height: 100vh;
        width: 100vw;
        z-index: 1000;
        transform: translateX(-100%);
        transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        background: var(--bg-primary);
        display: flex;
        flex-direction: column;
        box-shadow: 2px 0 20px rgba(0, 0, 0, 0.15);
    }
    
    .sidebar.open {
        transform: translateX(0);
    }
    
    /* Ensure tabs are always visible and modern in sidebar */
    .sidebar {
        display: flex !important;
        position: sticky;
        top: 0;
        z-index: 1001;
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        border-bottom: none;
        box-shadow: 0 4px 12px rgba(79, 70, 229, 0.2);
    }
    
    .sidebar .tab-button {
        color: rgba(255, 255, 255, 0.8);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-size: 0.75rem;
        padding: 1rem 0.75rem;
        border-radius: 0;
        backdrop-filter: blur(10px);
    }
    
    .sidebar .tab-button.active {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        box-shadow: inset 0 -3px 0 white;
    }
    
    .sidebar .tab-button:hover {
        background: rgba(255, 255, 255, 0.1);
        color: white;
        transform: none;
    }
    
    /* Modern touch interactions */
    .sidebar .tab-button:active {
        background: rgba(255, 255, 255, 0.25);
        transform: scale(0.98);
    }
    
    /* Make tab content scrollable */
    .sidebar .tab-content {
        flex: 1;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        scroll-behavior: smooth;
    }
    
    /* Comentado para permitir input en m√≥vil
    .sidebar.open ~ .message-input-container {
        display: none !important;
    }
    */
    
    .chat-area {
        width: 100%;
        height: var(--app-height);
        max-height: var(--app-height);
        display: flex;
        flex-direction: column;
        padding-top: var(--header-height); /* Space for fixed header */
        /* Ensure chat area adapts to keyboard */
        position: relative;
        overflow: hidden;
    }
    
    /* Adjust messages container for fixed header */
    .messages-container {
        flex: 1;
        overflow-y: auto;
        padding-bottom: var(--input-height) !important; /* Space for input */
        -webkit-overflow-scrolling: touch;
        scroll-behavior: smooth;
        /* Improve scrolling performance */
        will-change: scroll-position;
        transform: translateZ(0);
    }
    

    
    /* Keep search button visible on mobile, hide only the last button if needed */
    .chat-actions .icon-btn:nth-child(4) {
        display: none;
    }
    
    /* Ensure call buttons have no background on mobile */
    .chat-header .icon-btn,
    .chat-header button,
    #call-btn,
    #video-btn {
        background: none !important;
        border: none !important;
        color: var(--text-secondary) !important;
    }
    
    /* Remove hover background for call buttons on mobile */
    .chat-header .icon-btn:hover,
    .chat-header button:hover,
    #call-btn:hover,
    #video-btn:hover {
        background: none !important;
        color: var(--primary-color) !important;
        transform: none !important;
    }
    
    .message {
        max-width: 80% !important;
    }
    
    /* vigichat-style message input container for mobile */
    .message-input-container {
        position: fixed !important;
        bottom: 0 !important;
        left: 0 !important;
        right: 0 !important;
        background: var(--bg-primary) !important;
        border-top: 1px solid var(--border-light) !important;
        padding: 0.5rem 0.75rem !important;
        z-index: 150 !important;
        height: var(--input-height) !important;
        box-sizing: border-box !important;
        /* Ensure input stays visible with keyboard */
        transform: translateZ(0) !important;
        will-change: transform !important;
    }
    
    /* Hide navigation when typing */
    .message-input-container.typing-mode {
        transform: translateY(0) !important;
    }
    
    .typing-mode ~ .sidebar .chat-tabs {
        transform: translateY(100%) !important;
        transition: transform 0.3s ease !important;
    }
    
    /* Input area layout */
    .input-area {
        display: flex !important;
        align-items: flex-end !important;
        gap: 0.2rem !important;
    }
    
    /* Plus button for attachments */
    .attach-btn {
        width: 40px !important;
        height: 40px !important;
        margin-left: -8px !important;
        background: none !important;
        border: none !important;
        color: var(--primary-color) !important;
        border-radius: 50% !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        font-size: 1.2rem !important;
        cursor: pointer !important;
        transition: all 0.2s ease !important;
        flex-shrink: 0 !important;
    }
    
    .attach-btn:hover {
        background: var(--bg-tertiary) !important;
        transform: scale(1.05) !important;
    }
    
    /* vigichat-style input wrapper */
      .message-input-wrapper {
        flex: 1 !important;
        background: var(--bg-secondary) !important;
        border-radius: 8px !important;
        border: 1px solid gray!important;
        display: flex !important;
        align-items: flex-end !important;
        min-height: 40px !important;
        min-width: 285px !important;
        max-width: 285px !important;
        max-height: 120px !important;
        padding: 0.3rem 0.3rem !important;
        transition: all 0.2s ease !important;
        position: relative !important;
    }
    
    .message-input-wrapper:focus-within {
        border-color: var(--primary-color) !important;
        box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.1) !important;
    }
    
    /* Auto-expanding input field */
    .input-field {
        flex: 1 !important;
        border: none !important;
        background: transparent !important;
        outline: none !important;
        resize: none !important;
        padding: 0.2rem 0.2rem !important;
        font-size: 16px !important; /* Prevent zoom on iOS */
        line-height: 1.4 !important;
        max-height: 80px !important;
        overflow-y: auto !important;
        word-wrap: break-word !important;
        white-space: pre-wrap !important;
        color: var(--text-primary) !important;
    }
    
    .input-field::-webkit-scrollbar {
        width: 2px !important;
    }
    
    .input-field::-webkit-scrollbar-thumb {
        background: rgb(197, 196, 196) !important;
        border-radius: 3px !important;
    }
    
    /* Emoji button in input */
    .emoji-btn {
        background: none !important;
        border: none !important;
        color: var(--text-secondary) !important;
        padding: 0.25rem !important;
        border-radius: 50% !important;
        width: 32px !important;
        height: 32px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        cursor: pointer !important;
        transition: all 0.2s ease !important;
        flex-shrink: 0 !important;
    }
    
    .emoji-btn:hover {
        background: var(--bg-tertiary) !important;
        color: var(--primary-color) !important;
    }
    
    /* Send button - clean vigichat style */
    .send-btn {
        width: 40px !important;
        height: 40px !important;
        border: none !important;
        display: flex !important;
        background-color: transparent !important;
        align-items: center !important;
        justify-content: center !important;
        font-size: 1rem !important;
        cursor: pointer !important;
        transition: all 0.2s ease !important;
        flex-shrink: 0 !important;
    }
    

    
    .send-btn:disabled {
        color: var(--text-tertiary) !important;
        cursor: not-allowed !important;
        transform: none !important;
    }
    
/* Base attachment modal styles */
.attachment-modal {
    position: fixed;
    background: var(--bg-primary);
    border: 1px solid var(--border-light);
    border-radius: 12px;
    padding: 0.75rem;
    z-index: 1050;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
}

.attachment-modal.show {
    opacity: 1;
    visibility: visible;
}

.attachment-options {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.75rem;
}

.attachment-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0.75rem;
    background: none;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.attachment-option:hover {
    background: var(--bg-secondary);
    transform: translateY(-2px);
}

.attachment-option i {
    font-size: 1.25rem;
    margin-bottom: 0.4rem;
    color: var(--primary-color);
}

.attachment-option span {
    font-size: 0.7rem;
    color: var(--text-secondary);
    font-weight: 500;
}

.attachment-option.emoji i { color: #ffd93d; }
.attachment-option.camera i { color: #ff6b6b; }
.attachment-option.gallery i { color: #4ecdc4; }
.attachment-option.location i { color: #45b7d1; }
.attachment-option.document i { color: #96ceb4; }

.attachment-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.3);
    z-index: 1040;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.attachment-modal-overlay.show {
    opacity: 1;
    visibility: visible;
}

/* Attachment modal for mobile - animaci√≥n desde la izquierda */
@media (max-width: 768px) {
    .attachment-modal {
        position: fixed !important;
        bottom: 20px !important;
        left: 0 !important;
        width: 320px !important;
        max-width: calc(100vw - 40px) !important;
        background: var(--bg-primary) !important;
        border: 1px solid var(--border-light) !important;
        border-radius: 16px !important;
        padding: 1rem !important;
        z-index: 1050 !important;
        transform: translateX(-100%) !important;
        transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15) !important;
        opacity: 0 !important;
        visibility: hidden !important;
        margin-left: 20px !important;
    }
    
    .attachment-modal.show {
        transform: translateX(0) !important;
        opacity: 1 !important;
        visibility: visible !important;
    }
    
    .attachment-options {
        display: grid !important;
        grid-template-columns: repeat(3, 1fr) !important;
        gap: 0.75rem !important;
        align-items: center !important;
    }
    
    .attachment-option {
        display: flex !important;
        flex-direction: column !important;
        align-items: center !important;
        padding: 0.75rem !important;
        background: none !important;
        border: none !important;
        border-radius: 12px !important;
        cursor: pointer !important;
        transition: all 0.2s ease !important;
        min-width: 60px !important;
        font-size: 0.85rem !important;
    }
    
    .attachment-option:hover {
        background: var(--bg-secondary) !important;
        transform: translateY(-2px) !important;
    }
    
    .attachment-option i {
        font-size: 1.5rem !important;
        margin-bottom: 0.5rem !important;
        color: var(--primary-color) !important;
    }
    
    .attachment-option span {
        font-size: 0.75rem !important;
        color: var(--text-secondary) !important;
        font-weight: 500 !important;
    }
    
    .attachment-option.emoji i {
        color: #ffd93d !important;
    }
    
    .attachment-option.camera i {
        color: #ff6b6b !important;
    }
    
    .attachment-option.gallery i {
        color: #4ecdc4 !important;
    }
    
    .attachment-option.location i {
        color: #45b7d1 !important;
    }
    
    .attachment-option.document i {
        color: #96ceb4 !important;
    }
    
    /* Modal overlay */
    .attachment-modal-overlay {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        background: rgba(0, 0, 0, 0.3) !important;
        z-index: 1040 !important;
        opacity: 0 !important;
        visibility: hidden !important;
        transition: all 0.3s ease !important;
    }
    
    .attachment-modal-overlay.show {
        opacity: 1 !important;
        visibility: visible !important;
    }
}
    
    /* Hide navigation when typing on mobile */
    body.mobile-typing .sidebar .chat-tabs {
        transform: translateY(100%) !important;
        transition: transform 0.3s ease !important;
    }
    
    /* Back button styling for mobile */
    .back-btn {
        display: block !important;
        background: none !important;
        border: none !important;
        color: var(--text-primary) !important;
        font-size: 1.2rem !important;
        padding: 0.5rem !important;
        cursor: pointer !important;
        border-radius: 50% !important;
        transition: all 0.2s ease !important;
        width: 40px !important;
        height: 40px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
    }
    
    .back-btn:hover {
        background: var(--bg-tertiary) !important;
        transform: scale(1.05) !important;
    }
    
    .icon-btn:hover {
        background: none !important;
        transform: none !important;
        box-shadow: none !important;
    }
    
    .icon-btn:active {
        background: none !important;
        transform: scale(0.95) !important;
    }
    
    .feature-list {
        flex-direction: column;
        gap: 1rem;
    }
    
    .feature-item {
        flex-direction: row;
        justify-content: center;
    }
    
    .emoji-picker {
        width: calc(100vw - 3rem);
        right: 1.5rem;
        left: 1.5rem;
    }
    
    .modal-content {
        width: 95%;
        margin: 0 1rem;
    }
    
/* Enhanced Contact Search Results */
.search-results {
    margin-top: 1rem !important;
    border-radius: var(--radius-lg);
    background: var(--bg-primary) !important;
    border: 1px solid var(--border-light) !important;
    max-height: 300px !important;
    overflow-y: auto !important;
    display: none !important;
    position: relative !important;
    z-index: 10 !important;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2) !important;
    opacity: 1 !important;
}

.search-results.visible {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    animation: slideDown 0.3s ease-out;
}

.search-results-header {
    padding: 0.75rem 1rem;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-light);
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
}

.search-results-header h4 {
    margin: 0;
    color: var(--text-primary);
    font-size: 0.875rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.search-results-header i {
    color: var(--primary-color);
}

.search-results-list {
    padding: 0;
}

.search-result-item {
    display: flex;
    align-items: center;
    padding: 0.75rem 1rem;
    border-bottom: 1px solid var(--border-light);
    transition: all 0.2s ease;
    cursor: pointer;
    position: relative;
}

.search-result-item:last-child {
    border-bottom: none;
    border-radius: 0 0 var(--radius-lg) var(--radius-lg);
}

.search-result-item:hover {
    background: none;
}

.search-result-item.clickable:hover {
    background: var(--primary-light);
    transform: translateX(2px);
}

.search-result-item.non-clickable {
    cursor: default;
    opacity: 0.7;
}

.search-result-item .user-avatar {
    position: relative;
    margin-right: 0.75rem;
    flex-shrink: 0;
}

.search-result-item .user-avatar img {
    width: 40px;
    height: 40px;
    border-radius: var(--radius-full);
    border: 2px solid var(--border-light);
    object-fit: cover;
}

.search-result-item .status-indicator {
    position: absolute;
    bottom: -2px;
    right: -2px;
    width: 12px;
    height: 12px;
    border-radius: var(--radius-full);
    border: 2px solid var(--bg-primary);
    background: var(--gray-400);
}

.search-result-item .status-indicator.online {
    background: var(--success-color);
}

.search-result-item .status-indicator.away {
    background: #ff8c00;
    border: none !important;
    border-radius: 6px !important;
    width: auto !important;
    min-width: 16px !important;
    height: 12px !important;
    padding: 0 4px !important;
}

.search-result-item .user-info {
    flex: 1;
    min-width: 0;
}

.search-result-item .user-name {
    font-weight: 600;
    font-size: 0.875rem;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
    word-wrap: break-word;
}

.search-result-item .user-details {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.search-result-item .username {
    font-size: 0.75rem;
    color: var(--text-secondary);
    background: var(--bg-tertiary);
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
}

.search-result-item .status {
    font-size: 0.75rem;
    font-weight: 500;
}

.search-result-item .status.online {
    color: var(--success-color);
}

.search-result-item .last-seen {
    font-size: 0.75rem;
    color: var(--text-tertiary);
}

.search-result-item .relationship-badge {
    display: inline-block;
    font-size: 0.7rem;
    font-weight: 500;
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
    margin-top: 0.25rem;
}

.relationship-badge.contact {
    background: var(--success-color);
    color: white;
}

.relationship-badge.sent {
    background: var(--warning-color);
    color: white;
}

.relationship-badge.received {
    background: var(--primary-color);
    color: white;
}

.search-result-item .user-actions {
    flex-shrink: 0;
    margin-left: 0.75rem;
}

.add-contact-btn,
.contact-status-btn {
    padding: 0.5rem 0.75rem;
    border: none;
    border-radius: var(--radius-md);
    font-size: 0.75rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 0.25rem;
    min-width: 80px;
    justify-content: center;
}

.add-contact-btn {
    background: var(--primary-color);
    color: white;
}

.add-contact-btn:hover:not(:disabled) {
    background: var(--primary-dark);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
}

.contact-status-btn.contact {
    background: var(--success-color);
    color: white;
    cursor: not-allowed;
}

.contact-status-btn.sent {
    background: var(--warning-color);
    color: white;
    cursor: not-allowed;
}

.contact-status-btn.received {
    background: var(--primary-color);
    color: white;
}

.contact-status-btn.received:hover {
    background: var(--primary-dark);
}

.search-empty,
.search-info {
    padding: 2rem 1rem;
    text-align: center;
    color: var(--text-secondary);
}

.search-empty .empty-icon,
.search-info .info-icon {
    font-size: 2rem;
    margin-bottom: 1rem;
    opacity: 0.5;
}

.search-empty h4,
.search-info h4 {
    color: var(--text-primary);
    margin-bottom: 0.5rem;
    font-size: 1rem;
}

.search-tips {
    list-style: none;
    padding: 0;
    margin-top: 0.75rem;
    text-align: left;
    max-width: 200px;
    margin-left: auto;
    margin-right: auto;
}

.search-tips li {
    padding: 0.125rem 0;
    font-size: 0.75rem;
    color: var(--text-tertiary);
}

.search-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem 1rem;
    gap: 1rem;
}

.loading-spinner {
    position: relative;
    width: 30px;
    height: 30px;
}

.spinner-ring {
    position: absolute;
    width: 100%;
    height: 100%;
    border: 3px solid transparent;
    border-top: 3px solid var(--primary-color);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

.spinner-ring:nth-child(2) {
    animation-delay: 0.1s;
    border-top-color: var(--secondary-color);
}

.spinner-ring:nth-child(3) {
    animation-delay: 0.2s;
    border-top-color: var(--success-color);
}

.loading-text {
    text-align: left;
}

.loading-text span {
    display: block;
    color: var(--text-primary);
    font-weight: 500;
}

.loading-text small {
    color: var(--text-secondary);
    font-size: 0.75rem;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
        max-height: 0;
    }
    to {
        opacity: 1;
        transform: translateY(0);
        max-height: 300px;
    }
}

    .notification-container {
        left: 1rem;
        right: 1rem;
        max-width: none;
    }
    
    .settings-tab {
        font-size: 0.8rem;
    }
    
    .settings-tab span {
        display: none;
    }
}

/* Ultra Modern Smartphone Design - 480px */
@media (max-width: 480px) {
    /* Modern auth form */
    .auth-form {
        width: 95%;
        padding: 2rem 1.5rem;
        margin: 1rem;
        border-radius: 20px;
        backdrop-filter: blur(20px);
        box-shadow: 0 10px 40px rgba(79, 70, 229, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    /* Ultra modern sidebar header */
    .sidebar-header {
        display: none !important;
        padding: 1.5rem 1rem;
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        border-radius: 0 0 25px 25px;
        margin-bottom: 1rem;
        box-shadow: 0 8px 32px rgba(79, 70, 229, 0.3);
    }
    
    /* Modern glass-morphism search */
    .search-container {
        padding: 0.5rem;
        min-height: 30px;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        border-radius: 20px;
        border: 1px solid rgba(255, 255, 255, 0.2);

    }
    
    /* Ultra modern card-style items */
    .chat-item,
    .request-item {
        padding: 6px 6px 8px 20px;
        margin: 0.75rem 1rem;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border-radius: 20px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        border: 1px solid rgba(255, 255, 255, 0.3);
        position: relative;
        overflow: hidden;
    }
    
    /* Touch interactions */
    .chat-item:active,
    .contact-item:active,
    .request-item:active {
        transform: translateY(-4px) scale(1.02);
        box-shadow: 0 15px 40px rgba(79, 70, 229, 0.2);
        border-color: var(--primary-color);
    }
    
    .chat-item.active {
        background: linear-gradient(135deg, rgba(79, 70, 229, 0.1), rgba(6, 182, 212, 0.1));
        border: 2px solid var(--primary-color);
        transform: translateY(-2px) scale(1.02);
    }
    
    /* Modern chat header */
    .chat-header {
        padding: 1.25rem 1rem;
        background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
        backdrop-filter: blur(20px);
        border-bottom: 1px solid rgba(79, 70, 229, 0.1);
    }
    
    /* Modern message input */
    .message-input-container {
        padding: 0.50rem !important;
        background: var(--bg-tertiary) !important;
        backdrop-filter: blur(20px) !important;
        border-radius: none !important;
    }
    
    .input-area {
        gap: 0.2rem;
    }
    
    /* Modern input field */
    .message-input {
        border-radius: 20px !important;
        background: rgba(255, 255, 255, 0.8) !important;
        backdrop-filter: blur(10px) !important;
        border: 2px solid transparent !important;
        padding: 14px 20px !important;
        transition: all 0.3s ease !important;
    }
    
    .message-input:focus {
        border-color: var(--primary-color) !important;
        background: white !important;
        box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.1) !important;
    }
    

}

/* Print Styles */
@media print {
    .sidebar,
    .chat-header.hidden,
    .message-input-container.hidden {
        display: none;
    }
    
    .chat-area {
        width: 100%;
    }
    
    .messages-container {
        height: auto;
        overflow: visible;
    }
    
    .message {
        break-inside: avoid;
        margin-bottom: 0.5rem;
    }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    :root {
        --border-light: #000000;
        --border-medium: #000000;
        --text-tertiary: #333333;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* Additional Mobile Touch Optimizations */
@media (max-width: 768px) and (hover: none) and (pointer: coarse) {
    /* Touch-friendly button sizes */
    .tab-button,
    .icon-btn,
    .btn-primary,
    .btn-secondary {
        min-height: 44px;
        min-width: 44px;
        touch-action: manipulation;
    }
    
    /* Remove hover effects on touch devices */
    .tab-button:hover,
    .chat-item:hover,
    .contact-item:hover {
        transform: none;
        background: initial;
    }
    
    /* Enhanced touch feedback */
    .tab-button:active,
    .chat-item:active,
    .contact-item:active,
    .icon-btn:active {
        background: var(--primary-light);
        transform: scale(0.98);
        transition: all 0.1s ease;
    }
    
    /* Improve scroll performance */
    .tab-content,
    .messages-container,
    .sidebar {
        -webkit-overflow-scrolling: touch;
        scroll-behavior: smooth;
    }
    
    /* Prevent zoom on input focus */
    input,
    textarea,
    select {
        font-size: 16px;
    }
    
    /* Safe area support for notched devices */
    .sidebar {
        padding-top: env(safe-area-inset-top);
        padding-bottom: env(safe-area-inset-bottom);
    }
    
   
}

/* Ultra-wide mobile screens (landscape) */
@media (max-width: 768px) and (orientation: landscape) {
    .sidebar .chat-tabs {
        border-radius: 0 0 15px 15px;
    }
    
    .sidebar .tab-button {
        padding: 0.75rem 0.5rem;
        min-height: 44px;
    }
    
    .chat-item,
    .contact-item,
    .request-item {
        padding: 1rem;
        margin: 0.5rem 1rem;
    }
    
   
}

/* High DPI screens optimization */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .tab-button.active::after {
        height: 2px;
    }
    
    .chat-item.active {
        border-width: 1px;
    }
    
  
}

/* CONNECTION QUALITY INDICATORS */
#connection-quality-indicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    margin-left: 8px;
    transition: all 0.3s ease;
    position: relative;
}

#connection-quality-indicator.excellent {
    background: #10b981;
    box-shadow: 0 0 6px rgba(16, 185, 129, 0.5);
}

#connection-quality-indicator.good {
    background: #22c55e;
    box-shadow: 0 0 6px rgba(34, 197, 94, 0.5);
}

#connection-quality-indicator.fair {
    background: #f59e0b;
    box-shadow: 0 0 6px rgba(245, 158, 11, 0.5);
}

#connection-quality-indicator.poor {
    background: #ef4444;
    box-shadow: 0 0 6px rgba(239, 68, 68, 0.5);
    animation: pulse-warning 2s infinite;
}

@keyframes pulse-warning {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

.connection-warning {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(245, 158, 11, 0.95);
    color: white;
    padding: 8px 12px;
    border-radius: 20px;
    font-size: 12px;
    z-index: 1000;
    animation: slideInFromRight 0.3s ease;
}

@keyframes slideInFromRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

.warning-content {
    display: flex;
    align-items: center;
    gap: 6px;
}

.presence-change-notification {
    position: fixed;
    top: 20px;
    right: 20px;
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 14px;
    z-index: 10000;
    transition: all 0.3s ease;
}



input:focus,
textarea:focus,
.input-field:focus {
    outline: none;
}

/* Blocked Contacts Styles - Matching Contact List Design */
.blocked-contacts-list {
    padding: 0;
    overflow: visible;
}

.blocked-contact-item {
    display: flex !important;
    align-items: center !important;
    padding: 6px 6px 8px 20px !important; /* Reduced padding to prevent overflow */
    margin-bottom: 4px !important;
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    position: relative;
    background: white;
    border: 1px solid var(--border-light);
    box-sizing: border-box !important;
    max-width: 100% !important;
    overflow: hidden !important; /* Prevent item overflow */
}

.blocked-contact-item:hover {
    background-color: var(--bg-tertiary);
    transform: translateY(-1px);
}

/* Blocked contact avatar with consistent styling */
.blocked-contact-item .contact-avatar-container {
    position: relative;
    margin-right: 6px !important;
    flex-shrink: 0 !important; /* Prevent avatar from shrinking */
    min-width: 56px !important; /* Fixed width for avatar container */
}

.blocked-contact-item .contact-avatar {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid var(--border-light);
    filter: grayscale(80%) opacity(0.8);
    transition: all 0.2s ease-in-out;
}

.blocked-contact-item:hover .contact-avatar {
    filter: grayscale(60%) opacity(0.9);
    border-color: var(--error-color);
}

/* Blocked status indicator */
.blocked-contact-item .status-indicator.blocked {
    position: absolute;
    bottom: 2px;
    right: 2px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--error-color);
    border: 3px solid var(--bg-primary);
    color: white;
    font-size: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
}

/* Contact info section */
.blocked-contact-item .contact-info {
    flex: 1 !important;
    min-width: 0 !important;
    margin-right: 8px !important;
    overflow: hidden !important; /* Prevent text overflow */
    max-width: calc(100% - 140px) !important; /* Reserve space for avatar and buttons */
}

.blocked-contact-item .contact-name {
    font-weight: 500;
    font-size: 1rem !important;
    color: var(--text-primary);
    margin-bottom: -2px;
    opacity: 0.8;
    line-height: 1.0;
    overflow: hidden !important;
    white-space: nowrap !important;
    text-overflow: ellipsis !important;
}

.blocked-contact-item .contact-username {
    font-size: 14px;
    color: var(--text-secondary);
    margin-bottom: -2px;
    opacity: 0.7;
    line-height: 1.0;
    overflow: hidden !important;
    white-space: nowrap !important;
    text-overflow: ellipsis !important;
}

.blocked-contact-item .contact-status.blocked-status {
    font-size: 12px;
    color: var(--error-color);
    font-weight: 500;
    line-height: 1.0;
    overflow: hidden !important;
    white-space: nowrap !important;
    text-overflow: ellipsis !important;
}

/* Action buttons - smaller and cleaner */
.blocked-contact-item .contact-action-buttons {
    display: flex !important;
    align-items: center !important;
    gap: 2px !important;
    opacity: 0.85;
    transition: opacity 0.2s ease-in-out;
    flex-shrink: 0 !important; /* Prevent buttons from shrinking */
    min-width: 72px !important;
    margin-right: 2px !important; /* Fixed width for button container */
}

.blocked-contact-item:hover .contact-action-buttons {
    opacity: 1;
}

.blocked-contact-item .contact-action-btn {
    background: transparent;
    border: none;
    padding: 6px;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 14px;
    color: var(--text-secondary);
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.blocked-contact-item .contact-action-btn:hover {
    background: var(--bg-secondary);
    transform: scale(1.1);
}

.blocked-contact-item .contact-action-btn.unblock-btn {
    color: var(--success-color);
}

.blocked-contact-item .contact-action-btn.unblock-btn:hover {
    background: rgba(16, 185, 129, 0.1);
    color: var(--success-color);
}

.blocked-contact-item .contact-action-btn.remove-btn {
    color: var(--error-color);
}

.blocked-contact-item .contact-action-btn.remove-btn:hover {
    background: rgba(239, 68, 68, 0.1);
    color: var(--error-color);
}

/* Dark theme support for blocked contacts */
[data-theme="dark"] .blocked-contact-item {
    background: var(--bg-dark-secondary);
    border-color: var(--gray-700);
}

[data-theme="dark"] .blocked-contact-item:hover {
    background: var(--gray-700);
}

[data-theme="dark"] .blocked-contact-item .status-indicator.blocked {
    border-color: var(--bg-dark);
}

[data-theme="dark"] .blocked-contact-item .contact-name {
    color: var(--text-dark);
}

[data-theme="dark"] .blocked-contact-item .contact-username {
    color: var(--text-dark-secondary);
}

[data-theme="dark"] .blocked-contact-item .contact-action-btn:hover {
    background: var(--bg-dark-secondary);
}

[data-theme="dark"] #blocked-contacts-modal .modal-content {
    background: var(--bg-dark-secondary);
    border-color: var(--gray-700);
}

[data-theme="dark"] #blocked-contacts-modal .modal-header {
    border-bottom-color: var(--gray-700);
}

[data-theme="dark"] #blocked-contacts-modal .modal-header h3 {
    color: var(--text-dark);
}

/* Add Contact Modal Styles */
#add-contact-modal {
    align-items: flex-start;
    padding-top: 60px;
    background: rgba(0, 0, 0, 0.6) !important;
}

#add-contact-modal .modal-content {
    background: var(--bg-primary) !important;
    opacity: 1 !important;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3) !important;
}

#add-contact-modal .modal-body {
    padding: 20px 24px;
}

#add-contact-modal .form-group {
    margin-bottom: 0;
    padding: 0 4px;
}

#add-contact-modal .form-group label {
    margin-bottom: 8px;
}

#add-contact-modal .form-group input {
    width: 100%;
    box-sizing: border-box;
}

#add-contact-modal .search-results {
    margin-top: 16px;
    padding: 0 4px;
}

/* Dark theme support for add contact modal */
[data-theme="dark"] #add-contact-modal .modal-body {
    background: var(--bg-dark-secondary);
}

[data-theme="dark"] #add-contact-modal .form-group label {
    color: var(--text-dark);
}

/* Cancel button styles for add contact modal */
#add-contact-modal .btn-secondary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 10px 20px;
    background: var(--gray-100);
    color: var(--text-secondary);
    border: 1px solid var(--border-medium);
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    text-decoration: none;
    min-width: 100px;
}

#add-contact-modal .btn-secondary:hover {
    background: var(--gray-200);
    color: var(--text-primary);
    border-color: var(--border-dark);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

#add-contact-modal .btn-secondary:active {
    transform: translateY(0);
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
}

#add-contact-modal .btn-secondary:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(107, 114, 128, 0.2);
}

/* Dark theme support for cancel button */
[data-theme="dark"] #add-contact-modal .btn-secondary {
    background: var(--gray-700);
    color: var(--text-dark-secondary);
    border-color: var(--gray-600);
}

[data-theme="dark"] #add-contact-modal .btn-secondary:hover {
    background: var(--gray-600);
    color: var(--text-dark);
    border-color: var(--gray-500);
}

[data-theme="dark"] #add-contact-modal .btn-secondary:focus {
    box-shadow: 0 0 0 3px rgba(156, 163, 175, 0.2);
}

/* Modal footer alignment */
#add-contact-modal .modal-footer {
    padding: 16px 24px;
    border: none;
    display: flex;
    justify-content: flex-end;
    gap: 12px;
}

[data-theme="dark"] #add-contact-modal .modal-footer {
    border-top-color: var(--gray-700);
}

/* Custom Tooltips for Action Buttons */
.blocked-contact-item .contact-action-btn {
    position: relative;
}

.blocked-contact-item .contact-action-btn::before {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: #333;
    color: white;
    padding: 6px 10px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 500;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
    z-index: 10000;
    pointer-events: none;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.blocked-contact-item .contact-action-btn::after {
    content: '';
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%) translateY(1px);
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 5px solid #333;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
    z-index: 10000;
    pointer-events: none;
}

.blocked-contact-item .contact-action-btn:hover::before,
.blocked-contact-item .contact-action-btn:hover::after {
    opacity: 1;
    visibility: visible;
}

/* Smart positioning for tooltips that might overflow */
.blocked-contact-item .contact-action-btn.tooltip-right::before {
    left: 100%;
    right: auto;
    transform: translateX(-10px);
    bottom: 50%;
    transform: translateY(50%);
}

.blocked-contact-item .contact-action-btn.tooltip-right::after {
    left: 100%;
    right: auto;
    transform: translateX(-6px) translateY(-50%);
    bottom: 50%;
    border-left: 5px solid #333;
    border-top: 5px solid transparent;
    border-bottom: 5px solid transparent;
    border-right: none;
}

.blocked-contact-item .contact-action-btn.tooltip-left::before {
    right: 100%;
    left: auto;
    transform: translateX(10px);
    bottom: 50%;
    transform: translateY(50%);
}

.blocked-contact-item .contact-action-btn.tooltip-left::after {
    right: 100%;
    left: auto;
    transform: translateX(6px) translateY(-50%);
    bottom: 50%;
    border-right: 5px solid #333;
    border-top: 5px solid transparent;
    border-bottom: 5px solid transparent;
    border-left: none;
}

/* Dark theme support for tooltips */
[data-theme="dark"] .blocked-contact-item .contact-action-btn::before {
    background: #f9f9f9;
    color: #333;
}

[data-theme="dark"] .blocked-contact-item .contact-action-btn::after {
    border-top-color: #f9f9f9;
}

[data-theme="dark"] .blocked-contact-item .contact-action-btn.tooltip-right::after {
    border-left-color: #f9f9f9;
    border-top-color: transparent;
}

[data-theme="dark"] .blocked-contact-item .contact-action-btn.tooltip-left::after {
    border-right-color: #f9f9f9;
    border-top-color: transparent;
}

/* Mobile optimizations for blocked contacts */
@media (max-width: 768px) {
    #blocked-contacts-modal .modal-content {
        width: calc(100vw - 40px) !important; /* Full width minus margins on mobile */
        left: 20px !important;
        right: 20px !important;
        max-width: none !important;
    }
    
    .blocked-contact-item {
        padding: 8px 10px !important; /* Reduced padding on mobile */
    }
    
    .blocked-contact-item .contact-avatar-container {
        min-width: 48px !important;
        margin-right: 0 !important;
    }
    
    .blocked-contact-item .contact-avatar {
        width: 48px !important;
        height: 48px !important;
    }
   
    
    .blocked-contact-item .status-indicator.blocked {
        width: 16px;
        height: 16px;
        border-width: 2px;
        bottom: 1px;
        right: 1px;
        font-size: 8px;
    }
    
    .blocked-contact-item .contact-name {
        font-size: 1rem !important;
    }
    
    .blocked-contact-item .contact-username {
        font-size: 0.875rem !important;
    }
    
    .blocked-contact-item .contact-status.blocked-status {
        font-size: 0.6875rem !important;
    }
    
    .blocked-contact-item .contact-action-buttons {
        min-width: 64px !important; /* Smaller button container on mobile */
        gap: 2px !important;
    }
    
    .blocked-contact-item .contact-action-btn {
        width: 28px !important;
        height: 28px !important;
        font-size: 12px;
    }
}

/* Blocked contacts modal positioned as dropdown */
#blocked-contacts-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.3);
    z-index: 9999;
    display: flex;
    align-items: flex-start;
    justify-content: flex-start;
    padding: 0;
}

#blocked-contacts-modal .modal-header h3 {
    font-size: 16px;
    font-weight: 600;
    margin: 0;
    color: var(--text-primary);
}

#blocked-contacts-modal .modal-header {
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-light);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

#blocked-contacts-modal .modal-content {
    position: absolute;
    top: 60px; /* Adjust based on menu position */
    left: 20px; /* Position near the sidebar */
    width: 450px !important; /* Wider to prevent horizontal scroll */
    max-width: 90vw !important;
    max-height: 500px !important;
    background: white;
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    overflow: hidden !important;
    transform: scale(0.95) translateY(-10px);
    transition: all 0.2s ease;
    border: 1px solid var(--border-light);
}

#blocked-contacts-modal .modal-body {
    padding: 12px 16px !important;
    overflow-y: auto !important;
    overflow-x: hidden !important; /* Prevent horizontal scroll */
    max-height: calc(500px - 120px) !important;
    box-sizing: border-box !important;
}

#blocked-contacts-modal.show .modal-content {
    transform: scale(1) translateY(0);
}

/* Comprehensive horizontal scroll prevention for blocked contacts */
.blocked-contacts-list {
    width: 100% !important;
    max-width: 100% !important;
    overflow-x: hidden !important;
    overflow-y: auto !important;
    box-sizing: border-box !important;
}

.blocked-contacts-list * {
    box-sizing: border-box !important;
}

.empty-blocked-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 48px 24px;
    text-align: center;
    color: var(--text-secondary);
}

.empty-blocked-state.hidden {
    display: none;
}

.empty-blocked-state i {
    font-size: 48px;
    color: var(--gray-400);
    margin-bottom: 16px;
}

.empty-blocked-state h4 {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.empty-blocked-state p {
    font-size: 14px;
    color: var(--text-secondary);
}

.loading-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 48px 24px;
    text-align: center;
    color: var(--text-secondary);
}

.loading-state.hidden {
    display: none;
}

.loading-state i {
    font-size: 24px;
    color: var(--primary-color);
    margin-bottom: 16px;
}

.loading-state span {
    font-size: 14px;
}

/* Dark theme support for blocked contacts */
[data-theme="dark"] .blocked-contact-item {
    background: var(--bg-dark-secondary);
    border-color: var(--gray-700);
}

[data-theme="dark"] .blocked-contact-item:hover {
    background: var(--gray-700);
    border-color: var(--gray-600);
}

[data-theme="dark"] .blocked-contact-name {
    color: var(--text-dark);
}

[data-theme="dark"] .blocked-contact-username {
    color: var(--text-dark-secondary);
}

[data-theme="dark"] .blocked-date {
    color: var(--gray-400);
}

[data-theme="dark"] .empty-blocked-state h4 {
    color: var(--text-dark);
}

[data-theme="dark"] .empty-blocked-state p {
    color: var(--text-dark-secondary);
}

/* Custom Confirmation Modal */
#confirmation-modal {
    z-index: 99999 !important;
}

.confirmation-modal-content {
    max-width: 400px;
    padding: 0;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
    z-index: 100000 !important;
}

.confirmation-header {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 24px 24px 16px;
    background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-light) 100%);
}

.confirmation-icon {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--warning-color);
    color: white;
    font-size: 20px;
    flex-shrink: 0;
}

.confirmation-header h3 {
    margin: 0;
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
    line-height: 1.3;
}

.confirmation-body {
    padding: 16px 24px 24px;
    background: var(--bg-primary);
}

.confirmation-body p {
    margin: 0;
    font-size: 14px;
    line-height: 1.5;
    color: var(--text-secondary);
}

.confirmation-details {
    margin-top: 12px;
    padding: 12px;
    background: var(--bg-secondary);
    border-radius: 8px;
    font-size: 13px;
    color: var(--text-tertiary);
}

.confirmation-details.hidden {
    display: none;
}

.confirmation-actions {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    padding: 0 24px 24px;
    background: var(--bg-primary);
}

.confirmation-actions .btn {
    padding: 12px 24px;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    min-width: 100px;
}

.confirmation-actions .btn-secondary {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    border: 1px solid var(--border-color);
}

.confirmation-actions .btn-secondary:hover {
    background: var(--bg-secondary);
    color: var(--text-primary);
    border-color: var(--border-hover);
}

.confirmation-actions .btn-primary {
    background: var(--primary-color);
    color: white;
}

.confirmation-actions .btn-primary:hover {
    background: var(--primary-hover);
    transform: translateY(-1px);
}

.confirmation-actions .btn-danger {
    background: var(--error-color);
    color: white;
}

.confirmation-actions .btn-danger:hover {
    background: var(--error-hover);
    transform: translateY(-1px);
}

.confirmation-actions .btn-warning {
    background: var(--warning-color);
    color: white;
}

.confirmation-actions .btn-warning:hover {
    background: var(--warning-hover);
    transform: translateY(-1px);
}

.confirmation-actions .btn-success {
    background: var(--success-color);
    color: white;
}

.confirmation-actions .btn-success:hover {
    background: var(--success-color); /* Mantener el mismo color */
    color: white;
    transform: none; /* Sin efecto de movimiento */
}

/* Animation for confirmation modal */
#confirmation-modal {
    backdrop-filter: blur(4px);
}

#confirmation-modal .modal-overlay {
    z-index: 99998 !important;
}

#confirmation-modal.show .confirmation-modal-content {
    animation: confirmationSlideIn 0.3s ease-out;
}

@keyframes confirmationSlideIn {
    from {
        opacity: 0;
        transform: translateY(-30px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* Dark theme support for confirmation modal */
[data-theme="dark"] .confirmation-header {
    background: linear-gradient(135deg, var(--bg-dark-secondary) 0%, var(--bg-dark-tertiary) 100%);
}

[data-theme="dark"] .confirmation-header h3 {
    color: var(--text-dark);
}

[data-theme="dark"] .confirmation-body {
    background: var(--bg-dark);
}

[data-theme="dark"] .confirmation-body p {
    color: var(--text-dark-secondary);
}

[data-theme="dark"] .confirmation-details {
    background: var(--bg-dark-secondary);
    color: var(--text-dark-tertiary);
}

[data-theme="dark"] .confirmation-actions {
    background: var(--bg-dark);
}

/* Delete Photo Confirmation Modal - High Z-Index and Button Styles */
#delete-photo-confirmation-modal {
    z-index: 99999 !important;
}

#delete-photo-confirmation-modal .modal-overlay {
    z-index: 99998 !important;
}

/* Enhanced Button Styles for Delete Photo Confirmation */
#cancel-delete-photo {
    padding: 12px 20px;
    border: 2px solid var(--border-medium);
    border-radius: 8px;
    background: var(--bg-secondary);
    color: var(--text-secondary);
    font-weight: 500;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 8px;
}

#cancel-delete-photo:hover {
    background: var(--bg-tertiary);
    border-color: var(--border-hover);
    color: var(--text-primary);
    transform: translateY(-1px);
}

#confirm-delete-photo {
    padding: 12px 20px;
    border: 2px solid var(--error-color);
    border-radius: 8px;
    background: var(--error-color);
    color: white;
    font-weight: 600;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 8px;
}

#confirm-delete-photo:hover {
    background: var(--error-hover);
    border-color: var(--error-hover);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
}

/* Dark theme support for delete photo buttons */
[data-theme="dark"] #cancel-delete-photo {
    background: var(--bg-dark-secondary);
    color: var(--text-dark-secondary);
    border-color: var(--border-dark);
}

[data-theme="dark"] #cancel-delete-photo:hover {
    background: var(--bg-dark-tertiary);
    color: var(--text-dark);
    border-color: var(--border-dark-hover);
}

/* Device Verification Modal */
#device-verification-modal {
    z-index: 99999 !important;
}

#device-verification-modal .modal-overlay {
    z-index: 99998 !important;
    background: rgba(0, 0, 0, 0.8);
}

.device-verification-content {
    max-width: 450px;
    margin: auto;
    background: var(--bg-primary);
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 
        0 25px 50px -12px rgba(0, 0, 0, 0.25), 
        0 10px 25px -5px rgba(0, 0, 0, 0.1);
    border: none;
    border-left: 4px solid var(--primary-color);
}

.verification-header {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 24px 24px 16px;
    background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
}

.verification-icon {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 20px;
    box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
}

.verification-header h3 {
    margin: 0;
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
    line-height: 1.3;
}

.verification-body {
    padding: 24px;
}

.verification-message {
    margin: 0 0 24px 0;
    font-size: 16px;
    line-height: 1.6;
    color: var(--text-secondary);
    text-align: center;
}

#device-verification-form .form-group {
    margin-bottom: 20px;
}

#device-verification-form .form-group label {
    display: block;
    margin-bottom: 8px;
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary);
}

#device-verification-form .form-group {
    position: relative;
}

/* Legacy input styles - now handled by .input-wrapper */

/* Legacy .fas styles - now handled by .input-wrapper .fas */

/* Input wrapper for password toggle */
#device-verification-form .form-group {
    position: relative;
}

#device-verification-form .input-wrapper {
    position: relative; /* Positioning context for icons and toggle */
    display: block;
}

#device-verification-form .input-wrapper input {
    width: 100%;
    padding: 14px 44px 14px 44px; /* Space for both icons */
    border: 2px solid var(--border-light);
    border-radius: 8px;
    font-size: 16px;
    background: var(--bg-secondary);
    color: var(--text-primary);
    transition: all 0.2s ease;
}

#device-verification-form .input-wrapper .fas {
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-tertiary);
    font-size: 16px;
    z-index: 10;
}

#device-verification-form .input-wrapper .password-toggle {
    position: absolute;
    right: 16px;
    top: 50%;
    transform: translateY(-50%);
    background: none !important;
    border: none !important;
    outline: none !important;
    color: var(--text-tertiary);
    cursor: pointer;
    font-size: 16px;
    width: auto;
    height: auto;
    display: inline;
    border-radius: 0;
    transition: all 0.2s ease;
    z-index: 15;
    pointer-events: auto;
}

#device-verification-form .input-wrapper input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
}

#device-verification-form .input-wrapper .password-toggle:hover {
    color: var(--text-secondary);
    background: none !important;
    border: none !important;
}

#device-verification-form .input-wrapper .password-toggle:focus {
    outline: none !important;
    box-shadow: none !important;
}

#device-verification-form .input-wrapper .password-toggle:active {
    transform: translateY(-50%) scale(0.95);
}

.verification-actions {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    padding: 0 24px 24px;
    background: var(--bg-primary);
}

.verification-actions .btn-secondary {
    padding: 12px 20px;
    border: 2px solid var(--border-medium);
    border-radius: 8px;
    background: var(--bg-secondary);
    color: var(--text-secondary);
    font-weight: 500;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 8px;
}

.verification-actions .btn-secondary:hover {
    background: var(--bg-tertiary);
    border-color: var(--border-hover);
    color: var(--text-primary);
    transform: translateY(-1px);
}

.verification-actions .btn-primary {
    padding: 12px 20px;
    border: 2px solid var(--primary-color);
    border-radius: 8px;
    background: var(--primary-color);
    color: white;
    font-weight: 600;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 8px;
}

.verification-actions .btn-primary:hover {
    background: var(--primary-hover);
    border-color: var(--primary-hover);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
}

.verification-actions .btn-primary:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

/* Dark theme support for device verification modal */
[data-theme="dark"] .device-verification-content {
    background: var(--bg-dark);
    border-left-color: var(--primary-color);
}

[data-theme="dark"] .verification-header {
    background: linear-gradient(135deg, var(--bg-dark-secondary) 0%, var(--bg-dark) 100%);
}

[data-theme="dark"] .verification-header h3 {
    color: var(--text-dark);
}

[data-theme="dark"] .verification-message {
    color: var(--text-dark-secondary);
}

[data-theme="dark"] #device-verification-form input {
    background: var(--bg-dark-secondary);
    color: var(--text-dark);
    border-color: var(--border-dark);
}

[data-theme="dark"] #device-verification-form input:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
}

[data-theme="dark"] .verification-actions .btn-secondary {
    background: var(--bg-dark-secondary);
    color: var(--text-dark-secondary);
    border-color: var(--border-dark);
}

[data-theme="dark"] .verification-actions .btn-secondary:hover {
    background: var(--bg-dark-tertiary);
    color: var(--text-dark);
    border-color: var(--border-dark-hover);
}

[data-theme="dark"] .confirmation-actions .btn-secondary {
    background: var(--bg-dark-secondary);
    color: var(--text-dark-secondary);
    border-color: var(--border-dark);
}

[data-theme="dark"] .confirmation-actions .btn-secondary:hover {
    background: var(--bg-dark-tertiary);
    color: var(--text-dark);
    border-color: var(--border-dark-hover);
}

[data-theme="dark"] .confirmation-modal-content {
    background: var(--bg-dark);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
}

[data-theme="dark"] .confirmation-actions .btn-success:hover {
    background: var(--success-color) !important;
    color: white !important;
}

/* Photo Modal Actions */
.photo-modal-actions {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-top: 1rem;
    padding: 1rem;
    border: none;
}

.photo-modal-body {
    display: flex;
    flex-direction: column;
}

.photo-modal-body img {
    flex: 1;
}

.photo-action-link {
    background: none;
    border: none;
    color: var(--primary);
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.5rem 0.75rem;
    border-radius: 0.375rem;
    transition: all 0.2s ease;
}

.photo-action-link:hover {
    background: var(--primary-light);
    color: var(--primary-dark);
    transform: translateY(-1px);
}

.photo-action-link.delete-action {
    color: #dc2626;
}

.photo-action-link.delete-action:hover {
    background: #fef2f2;
    color: #b91c1c;
}

[data-theme="dark"] .photo-action-link {
    color: var(--primary-light);
}

[data-theme="dark"] .photo-action-link:hover {
    background: rgba(59, 130, 246, 0.15);
    color: var(--primary-light);
}

[data-theme="dark"] .photo-action-link.delete-action {
    color: #f87171;
}

[data-theme="dark"] .photo-action-link.delete-action:hover {
    background: rgba(239, 68, 68, 0.15);
    color: #fca5a5;
}

/* Photo update animation */
.profile-img.updating {
    opacity: 0.7;
    transform: scale(0.95);
    transition: all 0.3s ease;
}

.profile-img.updated {
    animation: photoUpdated 0.5s ease;
}

@keyframes photoUpdated {
    0% { transform: scale(0.95); opacity: 0.7; }
    50% { transform: scale(1.05); opacity: 1; }
    100% { transform: scale(1); opacity: 1; }
}

/* Profile Photo Actions in Full Profile Modal */
.profile-photo-actions {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-top: 1rem;
    padding: 0.75rem;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 0.5rem;
    backdrop-filter: blur(10px);
    position: relative;
    z-index: 10;
    min-height: 50px; /* Ensure consistent height */
    align-items: center;
}

.photo-modal-actions {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-top: 1rem;
    padding: 0.75rem;
    min-height: 50px; /* Ensure consistent height */
    align-items: center;
}

/* Ensure buttons stay in position and are always visible for own profile */
.profile-photo-section .profile-photo-actions {
    position: relative;
    z-index: 10;
    /* Force the buttons to stay in place */
    flex-shrink: 0;
}

/* Fixed positioning to prevent movement */
.profile-photo-section {
    position: relative;
    min-height: 200px; /* Minimum height to contain photo and buttons */
}

[data-theme="dark"] .profile-photo-actions {
    background: rgba(0, 0, 0, 0.2);
}

/* ===================================================================
   SIMPLE PHOTO CROP CONTAINER
   =================================================================== */

.photo-crop-container {
    position: fixed;
    top: 50%;
    left: 20px;
    transform: translateY(-50%);
    width: 350px;
    background: white;
    border-radius: 16px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    z-index: 3000;
    opacity: 0;
    transition: all 0.3s ease;
}

.photo-crop-container:not(.hidden) {
    opacity: 1;
}

.photo-crop-container.hidden {
    opacity: 0;
    pointer-events: none;
    transform: translateY(-50%) translateX(-20px);
}

/* Header */
.crop-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.25rem;
    border-bottom: 1px solid #e2e8f0;
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    color: white;
    border-radius: 16px 16px 0 0;
}

.crop-header h3 {
    margin: 0;
    font-size: 1rem;
    font-weight: 600;
}

.close-crop {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    width: 32px;
    height: 32px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
}

.close-crop:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: scale(1.05);
}

/* Content */
.crop-content {
    padding: 1rem;
}

.crop-preview {
    position: relative;
    width: 100%;
    height: 200px;
    border-radius: 12px;
    overflow: hidden;
    background: #f8fafc;
    margin-bottom: 1rem;
    border: 2px dashed #cbd5e1;
}

.crop-canvas-simple {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

.simple-preview {
    text-align: center;
    margin-bottom: 1rem;
}

.preview-canvas-simple {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    border: 2px solid #e2e8f0;
    object-fit: cover;
    margin: 0 auto;
    display: block;
}

.preview-label {
    font-size: 0.75rem;
    color: var(--gray-600);
    margin: 0.5rem 0 0 0;
}

.crop-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
}

.crop-area {
    position: absolute;
    border: 3px solid var(--primary-color);
    box-shadow: 
        0 0 0 99999px rgba(0, 0, 0, 0.4),
        inset 0 0 0 2px rgba(255, 255, 255, 0.8);
    pointer-events: all;
    cursor: move;
    border-radius: 8px;
    transition: all 0.2s ease;
}

.crop-area:hover {
    border-color: var(--secondary-color);
    box-shadow: 
        0 0 0 99999px rgba(0, 0, 0, 0.5),
        inset 0 0 0 2px rgba(255, 255, 255, 0.9);
}

/* Crop Grid */
.crop-grid {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    opacity: 0;
    transition: opacity 0.2s;
}

.crop-area:hover .crop-grid {
    opacity: 0.7;
}

.grid-line {
    position: absolute;
    background: rgba(255, 255, 255, 0.8);
}

.grid-line-v-1, .grid-line-v-2 {
    width: 1px;
    height: 100%;
    top: 0;
}

.grid-line-v-1 { left: 33.33%; }
.grid-line-v-2 { left: 66.66%; }

.grid-line-h-1, .grid-line-h-2 {
    height: 1px;
    width: 100%;
    left: 0;
}

.grid-line-h-1 { top: 33.33%; }
.grid-line-h-2 { top: 66.66%; }

/* Crop Handles */
.crop-handle {
    position: absolute;
    width: 12px;
    height: 12px;
    background: white;
    border: 2px solid var(--primary-color);
    border-radius: 50%;
    cursor: resize;
    transform: translate(-50%, -50%);
    transition: all 0.2s;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.crop-handle:hover {
    transform: translate(-50%, -50%) scale(1.2);
    border-color: var(--secondary-color);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.crop-handle.top-left { top: 0; left: 0; cursor: nw-resize; }
.crop-handle.top-right { top: 0; right: 0; cursor: ne-resize; }
.crop-handle.bottom-left { bottom: 0; left: 0; cursor: sw-resize; }
.crop-handle.bottom-right { bottom: 0; right: 0; cursor: se-resize; }

/* Editor Tips */
.editor-tips {
    position: absolute;
    bottom: 1rem;
    left: 1rem;
    display: flex;
    gap: 1rem;
    z-index: 10;
}

.tip-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 12px;
    font-size: 0.75rem;
    backdrop-filter: blur(10px);
}

.tip-item i {
    opacity: 0.8;
}

/* Sidebar */
.crop-sidebar {
    width: 350px;
    background: white;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
}

.crop-preview-section,
.face-detection-section,
.crop-tools-section {
    padding: 1.5rem;
    border-bottom: 1px solid #e2e8f0;
}

.section-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--gray-700);
    margin: 0 0 1rem 0;
}

.section-title i {
    color: var(--primary-color);
}

/* Preview */
.preview-container {
    position: relative;
    width: 120px;
    height: 120px;
    margin: 0 auto;
    border-radius: 50%;
    overflow: hidden;
    box-shadow: 0 8px 25px -5px rgba(0, 0, 0, 0.1);
    background: #f1f5f9;
}

.preview-canvas {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.preview-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
    color: white;
    text-align: center;
    padding: 0.25rem;
    font-size: 0.625rem;
    font-weight: 500;
}

/* Face Detection Status */
.face-detection-status {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem;
    border-radius: 12px;
    background: var(--gray-50);
    border: none;
    border-left: 4px solid var(--gray-400);
    font-size: 0.875rem;
    transition: all 0.2s;
}

.face-detection-status.success {
    background: #ecfdf5;
    border: none;
    border-left: 4px solid #10b981;
    color: #065f46;
}

.face-detection-status.error {
    background: #fef2f2;
    border: none;
    border-left: 4px solid #ef4444;
    color: #991b1b;
}

.face-detection-status.warning {
    background: #fffbeb;
    border: none;
    border-left: 4px solid #f59e0b;
    color: #92400e;
}

.face-detection-status.detecting {
    background: #eff6ff;
    border: none;
    border-left: 4px solid var(--primary-color);
    color: var(--primary-dark);
}

/* Tools */
.tools-grid {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.tool-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.tool-label {
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--gray-700);
    margin: 0;
}

.tool-label i {
    color: var(--primary-color);
    margin-right: 0.5rem;
}

.tool-value {
    color: var(--primary-color);
    font-weight: 600;
    font-size: 0.75rem;
}

/* Modern Slider */
.modern-slider {
    width: 100%;
    height: 6px;
    border-radius: 3px;
    background: #e2e8f0;
    outline: none;
    opacity: 0.8;
    transition: opacity 0.2s;
    -webkit-appearance: none;
    appearance: none;
}

.modern-slider:hover {
    opacity: 1;
}

.modern-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--primary-color);
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    transition: all 0.2s;
}

.modern-slider::-webkit-slider-thumb:hover {
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.modern-slider::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--primary-color);
    cursor: pointer;
    border: none;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    transition: all 0.2s;
}

/* Auto Center Button */
.auto-center-btn {
    width: 100%;
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    color: white;
    border: none;
    padding: 0.875rem 1rem;
    border-radius: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    margin-top: 1rem;
    box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
}

.auto-center-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 6px 16px rgba(79, 70, 229, 0.4);
}

.auto-center-btn:active {
    transform: translateY(0);
}

.auto-center-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
    background: #9ca3af;
}

.auto-center-btn:disabled:hover {
    transform: none;
    box-shadow: none;
}

/* Footer */
.crop-modal-footer {
    background: white;
    border: none;
    padding: 1.5rem 2rem;
}

.footer-actions {
    display: flex;
    justify-content: flex-end;
    gap: 1rem;
}

/* Footer Buttons */
.btn-crop {
    padding: 0.875rem 2rem;
    border-radius: 12px;
    font-weight: 500;
    font-size: 0.875rem;
    border: none;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    position: relative;
    overflow: hidden;
}

.btn-cancel {
    background: #f1f5f9;
    color: var(--gray-700);
    border: 1px solid #e2e8f0;
}

.btn-cancel:hover {
    background: #e2e8f0;
    transform: translateY(-1px);
}

.btn-save {
    background: linear-gradient(135deg, var(--success-color) 0%, #059669 100%);
    color: white;
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
}

.btn-save:hover {
    transform: translateY(-1px);
    box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
}

.btn-save:active,
.btn-cancel:active {
    transform: translateY(0);
}

/* Responsive Design */
@media (max-width: 1024px) {
    .photo-crop-content {
        width: 95vw;
        height: 95vh;
    }
    
    .crop-workspace {
        flex-direction: column;
    }
    
    .crop-editor-section {
        border-right: none;
        border-bottom: 1px solid #e2e8f0;
    }
    
    .crop-sidebar {
        width: 100%;
        flex-direction: row;
        overflow-x: auto;
        min-height: auto;
    }
    
    .crop-preview-section,
    .face-detection-section,
    .crop-tools-section {
        flex-shrink: 0;
        min-width: 250px;
        border-bottom: none;
        border-right: 1px solid #e2e8f0;
    }
    
    .crop-tools-section:last-child {
        border-right: none;
    }
}

@media (max-width: 768px) {
    .crop-modal-header {
        padding: 1.5rem;
    }
    
    .crop-editor-section {
        padding: 1rem;
    }
    
    .image-preview-container {
        height: 300px;
    }
    
    .footer-actions {
        flex-direction: column;
    }
    
    .btn-crop {
        width: 100%;
        justify-content: center;
    }
}

/* Dark Theme Support */
[data-theme="dark"] .photo-crop-content {
    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
    color: white;
}

[data-theme="dark"] .crop-editor-section {
    background: #0f172a;
    border-color: #334155;
}

[data-theme="dark"] .crop-sidebar {
    background: #1e293b;
}

[data-theme="dark"] .crop-preview-section,
[data-theme="dark"] .face-detection-section,
[data-theme="dark"] .crop-tools-section {
    border-color: #334155;
}

[data-theme="dark"] .crop-modal-footer {
    background: #1e293b;
    border-color: #334155;
}

[data-theme="dark"] .section-title {
    color: #e2e8f0;
}

[data-theme="dark"] .tool-label {
    color: #cbd5e1;
}

[data-theme="dark"] .modern-slider {
    background: #334155;
}

[data-theme="dark"] .face-detection-status {
    background: #334155;
    border: none;
    border-left: 4px solid #475569;
    color: #e2e8f0;
}

[data-theme="dark"] .btn-cancel {
    background: #334155;
    color: #e2e8f0;
    border-color: #475569;
}

[data-theme="dark"] .btn-cancel:hover {
    background: #475569;
}

/* Basic Controls */
.basic-controls {
    margin-bottom: 1rem;
}

.control-row {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
}

.control-row label {
    min-width: 50px;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--gray-700);
}

.simple-slider {
    flex: 1;
    height: 4px;
    border-radius: 2px;
    background: #e2e8f0;
    outline: none;
    -webkit-appearance: none;
    appearance: none;
}

.simple-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: var(--primary-color);
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.simple-slider::-moz-range-thumb {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: var(--primary-color);
    cursor: pointer;
    border: none;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.control-row span {
    min-width: 45px;
    font-size: 0.75rem;
    color: var(--primary-color);
    font-weight: 600;
    text-align: right;
}

/* Crop Overlay (keeping existing styles) */
.crop-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
}

.crop-area {
    position: absolute;
    border: 2px solid var(--primary-color);
    box-shadow: 
        0 0 0 99999px rgba(0, 0, 0, 0.4),
        inset 0 0 0 1px rgba(255, 255, 255, 0.8);
    pointer-events: all;
    cursor: move;
    border-radius: 4px;
    transition: all 0.2s ease;
}

.crop-area:hover {
    border-color: var(--secondary-color);
}

.crop-handle {
    position: absolute;
    width: 10px;
    height: 10px;
    background: white;
    border: 2px solid var(--primary-color);
    border-radius: 50%;
    cursor: resize;
    transform: translate(-50%, -50%);
    transition: all 0.2s;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
}

.crop-handle:hover {
    transform: translate(-50%, -50%) scale(1.2);
    border-color: var(--secondary-color);
}

.crop-handle.top-left { top: 0; left: 0; cursor: nw-resize; }
.crop-handle.top-right { top: 0; right: 0; cursor: ne-resize; }
.crop-handle.bottom-left { bottom: 0; left: 0; cursor: sw-resize; }
.crop-handle.bottom-right { bottom: 0; right: 0; cursor: se-resize; }

/* Action Buttons */
.crop-actions {
    display: flex;
    gap: 0.75rem;
    padding: 1rem;
    border: none;
}

.btn-simple {
    flex: 1;
    padding: 0.75rem 1rem;
    border: none;
    border-radius: 8px;
    font-weight: 500;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
}

.btn-auto {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    color: white;
    box-shadow: 0 2px 8px rgba(79, 70, 229, 0.3);
}

.btn-auto:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(79, 70, 229, 0.4);
}

.btn-save {
    background: linear-gradient(135deg, var(--success-color) 0%, #059669 100%);
    color: white;
    box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
}

.btn-save:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
}

/* Photo actions are now in the preview modal */

/* Responsive adjustments */
@media (max-width: 768px) {
    .photo-crop-container {
        left: 10px;
        width: 320px;
    }
    
    .crop-preview {
        height: 180px;
    }
}

/* Dark theme support */
[data-theme="dark"] .photo-crop-container {
    background: #1e293b;
}

[data-theme="dark"] .crop-header {
    border-color: #334155;
}

[data-theme="dark"] .crop-preview {
    background: #0f172a;
    border-color: #334155;
}

[data-theme="dark"] .preview-canvas-simple {
    border-color: #334155;
}

[data-theme="dark"] .control-row label {
    color: #e2e8f0;
}

[data-theme="dark"] .simple-slider {
    background: #334155;
}

[data-theme="dark"] .crop-actions {
    border-color: #334155;
}

/* Photo action buttons are now in the preview modal */

/* Enhanced Photo Modal Actions */
.photo-modal-actions-enhanced {
    display: flex;
    justify-content: center;
    gap: 1rem;
    padding: 1rem;
    width: 100%;
}

.photo-action-btn-enhanced {
    flex: 1;
    max-width: 140px;
    padding: 0.75rem 1rem; /* Altura reducida */
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    font-size: 0.875rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: row; /* Cambio a horizontal */
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    color: var(--gray-700);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    min-height: 48px; /* Altura reducida */
}

.photo-action-btn-enhanced i {
    font-size: 1rem; /* √çcono m√°s peque√±o */
    margin: 0; /* Sin margin */
}

.photo-action-btn-enhanced span {
    font-size: 0.875rem; /* Texto un poco m√°s grande */
    text-align: center;
}

.photo-action-btn-enhanced:hover {
    background: #f8fafc;
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    border-color: var(--primary-color);
}

.photo-action-btn-enhanced:active {
    transform: translateY(0);
}

.photo-action-btn-enhanced.delete-action {
    color: var(--error-color);
    border-color: rgba(239, 68, 68, 0.3);
}

.photo-action-btn-enhanced.delete-action:hover {
    background: #fef2f2;
    border-color: var(--error-color);
    color: #dc2626;
}

/* Dark theme support for enhanced buttons */
[data-theme="dark"] .photo-action-btn-enhanced {
    background: #334155;
    border-color: #475569;
    color: #e2e8f0;
}

[data-theme="dark"] .photo-action-btn-enhanced:hover {
    background: #475569;
    border-color: var(--primary-color);
}

[data-theme="dark"] .photo-action-btn-enhanced.delete-action {
    color: #fca5a5;
    border-color: rgba(248, 113, 113, 0.3);
}

[data-theme="dark"] .photo-action-btn-enhanced.delete-action:hover {
    background: #450a0a;
    border-color: #ef4444;
    color: #fca5a5;
}

/* Delete Photo Confirmation Modal Styles */
.delete-icon {
    background-color: #fef2f2;
    color: var(--error-color);
}

[data-theme="dark"] .delete-icon {
    background-color: #450a0a;
    color: #fca5a5;
}

/* ===== USER PROFILE SETTINGS MODAL STYLES ===== */

.user-profile-modal {
    z-index: 99998 !important;
}

.user-profile-modal-content {
    position: fixed;
    left: 20px;
    top: 20px;
    bottom: 20px;
    width: 420px;
    max-width: calc(100vw - 40px);
    background: var(--bg-primary);
    border-radius: 16px;
    box-shadow: 
        0 25px 50px -12px rgba(0, 0, 0, 0.25), 
        0 10px 25px -5px rgba(0, 0, 0, 0.1);
    border: none;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    transform: translateX(-100%) scale(0.9);
    transition: transform 0.3s ease;
}

.user-profile-modal.show .user-profile-modal-content {
    transform: translateX(0) scale(1);
}

.user-profile-modal-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 20px 24px;
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    color: white;
    flex-shrink: 0;
}

.profile-header-icon {
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
}

.user-profile-modal-header h3 {
    flex: 1;
    margin: 0;
    font-size: 18px;
    font-weight: 600;
}

.close-user-profile-modal {
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: white;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
}

.close-user-profile-modal:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: scale(1.1);
}

.user-profile-modal-body {
    flex: 1;
    overflow-y: auto;
    padding: 0;
}

/* Profile Photo Section */
.profile-photo-section {
    padding: 24px;
    text-align: center;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-light);
}

.profile-photo-display {
    position: relative;
    display: inline-block;
    cursor: pointer;
}

.profile-avatar {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    border: 3px solid var(--primary-color);
    object-fit: cover;
    transition: all 0.3s ease;
}

.avatar-overlay {
    position: absolute;
    bottom: 8px;
    right: 8px;
    width: 32px;
    height: 32px;
    background: var(--primary-color);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: all 0.3s ease;
    color: white;
    font-size: 14px;
    border: 2px solid white;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.profile-photo-display:hover .avatar-overlay {
    opacity: 1;
}

.profile-photo-display:hover .profile-avatar {
    transform: scale(1.05);
}

/* Profile Information */
.profile-information {
    padding: 0;
}

.profile-field-editable,
.profile-field-readonly {
    padding: 16px 24px;
    border-bottom: 1px solid var(--border-light);
    transition: background-color 0.2s ease;
}

.profile-field-editable:hover {
    background: var(--bg-secondary);
}

.field-label {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
    color: var(--text-secondary);
    font-size: 12px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.field-label i {
    font-size: 14px;
    color: var(--primary-color);
}

.field-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
}

.field-value {
    flex: 1;
    color: var(--text-primary);
    font-size: 14px;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 8px;
}

.edit-field-btn {
    background: transparent;
    border: 1px solid var(--border-light);
    color: var(--text-tertiary);
    width: 28px;
    height: 28px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 11px;
}

.edit-field-btn:hover {
    background: var(--primary-color);
    border-color: var(--primary-color);
    color: white;
    transform: scale(1.1);
}

/* Field Editing */
.field-edit {
    margin-top: 8px;
    display: flex;
    align-items: center;
    gap: 8px;
    animation: slideDown 0.3s ease-out;
}

.field-edit.hidden {
    display: none;
}

.field-input {
    flex: 1;
    padding: 8px 12px;
    border: 2px solid var(--border-light);
    border-radius: 8px;
    background: var(--bg-primary);
    color: var(--text-primary);
    font-size: 14px;
    transition: all 0.2s ease;
}

.field-input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
}

.field-actions {
    display: flex;
    gap: 4px;
}

.save-field-btn,
.cancel-field-btn {
    width: 28px;
    height: 28px;
    border-radius: 6px;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 11px;
    transition: all 0.2s ease;
}

.save-field-btn {
    background: var(--success-color);
    color: white;
}

.save-field-btn:hover {
    background: #16a34a;
    transform: scale(1.1);
}

.cancel-field-btn {
    background: var(--error-color);
    color: white;
}

.cancel-field-btn:hover {
    background: #dc2626;
    transform: scale(1.1);
}

/* Modal Footer */
.user-profile-modal-footer {
    padding: 20px 24px;
    background: var(--bg-secondary);
    display: flex;
    justify-content: center;
    flex-shrink: 0;
}

.btn-secondary {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-light);
    border-radius: 8px;
    color: var(--text-secondary);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-secondary:hover {
    background: var(--bg-primary);
    border-color: var(--primary-color);
    color: var(--primary-color);
}

/* Dark Theme Styles */
[data-theme="dark"] .user-profile-modal-content {
    background: var(--bg-dark);
}

[data-theme="dark"] .avatar-overlay {
    border-color: var(--bg-dark);
}

[data-theme="dark"] .profile-photo-section {
    background: var(--bg-dark-secondary);
}

[data-theme="dark"] .field-input {
    background: var(--bg-dark);
    color: var(--text-dark);
    border-color: var(--border-dark);
}

[data-theme="dark"] .field-input:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2);
}

[data-theme="dark"] .user-profile-modal-footer {
    background: var(--bg-dark-secondary);
}

[data-theme="dark"] .btn-secondary {
    background: var(--bg-dark-tertiary);
    border-color: var(--border-dark);
    color: var(--text-dark-secondary);
}

[data-theme="dark"] .btn-secondary:hover {
    background: var(--bg-dark);
    border-color: var(--primary-color);
    color: var(--primary-color);
}

/* Responsive Design */
@media (max-width: 768px) {
    .user-profile-modal-content {
        left: 10px;
        right: 10px;
        width: calc(100% - 20px);
        transform: translateY(-100%) scale(0.9);
    }

    .user-profile-modal.show .user-profile-modal-content {
        transform: translateY(0) scale(1);
    }
    
    .profile-field-editable,
    .profile-field-readonly {
        padding: 12px 16px;
    }
    
    .user-profile-modal-header,
    .user-profile-modal-footer {
        padding: 16px;
    }
    
    .profile-photo-section {
        padding: 16px;
    }
}

@media (max-width: 480px) {
    .user-profile-modal-content {
        left: 5px;
        right: 5px;
        width: calc(100% - 10px);
        top: 10px;
        bottom: 10px;
    }
}

/* ===== INACTIVITY WARNING MODAL STYLES ===== */

.inactivity-warning-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 99999;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.inactivity-warning-modal.show {
    opacity: 1;
    visibility: visible;
}

.inactivity-warning-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(8px);
}

.inactivity-warning-content {
    position: relative;
    background: var(--bg-primary);
    border-radius: 20px;
    padding: 40px 30px;
    max-width: 480px;
    width: 90%;
    text-align: center;
    box-shadow: 
        0 25px 50px -12px rgba(0, 0, 0, 0.5),
        0 10px 25px -5px rgba(0, 0, 0, 0.3);
    border: 2px solid #f59e0b;
    transform: scale(0.8) translateY(20px);
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.inactivity-warning-modal.show .inactivity-warning-content {
    transform: scale(1) translateY(0);
}

.inactivity-warning-icon {
    width: 80px;
    height: 80px;
    background: linear-gradient(135deg, #f59e0b 0%, #f97316 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    font-size: 32px;
    color: white;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

.inactivity-warning-content h3 {
    font-size: 24px;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 16px 0;
}

.inactivity-warning-content p {
    font-size: 16px;
    color: var(--text-secondary);
    margin: 0 0 30px 0;
    line-height: 1.5;
}

.countdown {
    font-weight: 700;
    font-size: 20px;
    color: #f59e0b;
    background: rgba(245, 158, 11, 0.1);
    padding: 2px 8px;
    border-radius: 6px;
    display: inline-block;
    min-width: 40px;
}

.inactivity-warning-actions {
    display: flex;
    gap: 16px;
    justify-content: center;
}

.btn-keep-session {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    color: white;
    border: none;
    padding: 14px 32px;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(79, 70, 229, 0.3);
    display: flex;
    align-items: center;
    gap: 8px;
}

.btn-keep-session:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(79, 70, 229, 0.4);
}

.btn-keep-session:active {
    transform: translateY(0);
}

/* Dark Theme Styles */
[data-theme="dark"] .inactivity-warning-content {
    background: var(--bg-dark);
    border-color: #f59e0b;
}

[data-theme="dark"] .inactivity-warning-content h3 {
    color: var(--text-dark);
}

[data-theme="dark"] .inactivity-warning-content p {
    color: var(--text-dark-secondary);
}

/* Responsive Design */
@media (max-width: 640px) {
    .inactivity-warning-content {
        padding: 30px 20px;
        margin: 20px;
        width: calc(100% - 40px);
    }
    
    .inactivity-warning-icon {
        width: 60px;
        height: 60px;
        font-size: 24px;
    }
    
    .inactivity-warning-content h3 {
        font-size: 20px;
    }
    
    .inactivity-warning-content p {
        font-size: 14px;
    }
    
    .btn-keep-session {
        padding: 12px 24px;
        font-size: 14px;
    }
}

/* Ultra-Fast Message Status Indicators */
.message {
    position: relative;
}

.message.sending .message-content {
    /* No opacity or background changes - appears completely normal */
    opacity: 1;
    background: inherit;
    animation: none;
}

.message.sent .message-status i {
    color: #9ca3af !important;
    animation: statusPop 0.2s ease-out;
}

.message.sent .message-status .checkmark {
    color: #9ca3af !important;
    animation: statusPop 0.2s ease-out;
}

.message.delivered .message-status i {
    color: #9ca3af !important;
    animation: statusPop 0.2s ease-out;
}

.message.delivered .message-status .checkmark {
    color: #9ca3af !important;
    animation: statusPop 0.2s ease-out;
}

.message.read .message-status i {
    color: #00bfff !important;
    animation: statusPop 0.2s ease-out;
}

.message.read .message-status .checkmark {
    color: #00bfff !important;
    animation: statusPop 0.2s ease-out;
}

.message.error .message-content {
    background-color: #fee2e2;
    border-left: 3px solid #ef4444;
}

.message.queued .message-content {
    background-color: #fef3c7;
    border-left: 3px solid #f59e0b;
}

/* Performance Indicators */
.perf-indicator {
    position: absolute;
    top: -5px;
    right: -5px;
    width: 20px;
    height: 20px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    animation: perfIndicatorPop 0.3s ease-out;
    z-index: 10;
}

.perf-indicator:hover {
    transform: scale(1.2);
    z-index: 20;
}

/* Connection Quality Indicators */
.connection-status {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-md);
    font-size: 0.75rem;
    font-weight: 500;
}

.connection-status.connected {
    background-color: #dcfce7;
    color: #166534;
}

.connection-status.disconnected {
    background-color: #fee2e2;
    color: #991b1b;
}

.connection-status.quality-excellent {
    background-color: #dcfce7;
    color: #166534;
}

.connection-status.quality-good {
    background-color: #dbeafe;
    color: #1e40af;
}

.connection-status.quality-poor {
    background-color: #fef3c7;
    color: #92400e;
}

.connection-status.quality-critical {
    background-color: #fee2e2;
    color: #991b1b;
}

.connection-quality {
    font-size: 0.7rem;
    opacity: 0.8;
    margin-left: 0.25rem;
}

/* Instant Message Animations */
@keyframes sendingShimmer {
    0% {
        background-position: -200% 0;
    }
    100% {
        background-position: 200% 0;
    }
}

@keyframes statusPop {
    0% {
        transform: scale(0.8);
        opacity: 0.5;
    }
    50% {
        transform: scale(1.2);
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

@keyframes perfIndicatorPop {
    0% {
        transform: scale(0);
        opacity: 0;
    }
    50% {
        transform: scale(1.2);
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

/* Ultra-fast message delivery feedback */
.message-instant-delivery {
    position: relative;
    overflow: hidden;
}

.message-instant-delivery::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(79, 70, 229, 0.3), transparent);
    animation: deliveryFlash 0.6s ease-out;
}

@keyframes deliveryFlash {
    0% {
        left: -100%;
    }
    100% {
        left: 100%;
    }
}

/* Message status transitions */
.message-status {
    transition: all 0.2s ease-out;
}

.message-status i {
    transition: all 0.3s ease-out;
}

/* Speed indicators for ultra-fast messages */
.ultra-fast-indicator {
    display: inline-block;
    animation: lightning 0.5s ease-out;
}

@keyframes lightning {
    0%, 100% {
        opacity: 1;
        transform: scale(1);
    }
    50% {
        opacity: 0.7;
        transform: scale(1.2) rotate(10deg);
    }
}

/* Message delivery confirmation */
.delivery-confirmation {
    position: absolute;
    bottom: -20px;
    right: 0;
    background: rgba(16, 185, 129, 0.9);
    color: white;
    padding: 2px 6px;
    border-radius: var(--radius-sm);
    font-size: 10px;
    animation: confirmationSlideUp 0.3s ease-out;
    z-index: 15;
}

@keyframes confirmationSlideUp {
    0% {
        transform: translateY(10px);
        opacity: 0;
    }
    100% {
        transform: translateY(0);
        opacity: 1;
    }
}

/* Mobile responsive adjustments for performance indicators */
@media (max-width: 768px) {
    .perf-indicator {
        width: 16px;
        height: 16px;
        font-size: 8px;
    }
}

/* ============ MULTI-SELECTION STYLES ============ */

/* Selection mode styles for messages */
.message.selection-mode {
    cursor: pointer;
    transition: all 0.2s ease;
    border: 2px solid transparent;
    border-radius: 12px;
    position: relative;
}

.message.selection-mode:hover {
    background-color: rgba(0, 191, 255, 0.05);
    border-color: rgba(0, 191, 255, 0.2);
}

.message.selected {
    background-color: rgba(0, 191, 255, 0.1) !important;
    border-color: #00bfff !important;
    box-shadow: 0 0 0 1px rgba(0, 191, 255, 0.3);
}

/* Selection indicator styles */
.selection-indicator {
    transition: all 0.2s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.selection-indicator:hover {
    transform: scale(1.1);
}

/* Selection toolbar styles */
.selection-toolbar {
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.selection-toolbar .btn-icon {
    padding: 8px;
    border-radius: 50%;
    transition: background-color 0.2s ease;
    cursor: pointer;
}

.selection-toolbar .btn-icon:hover {
    background-color: rgba(255, 255, 255, 0.2);
}

.selection-toolbar .btn-icon:active {
    transform: scale(0.95);
}

.selection-count {
    font-weight: 600;
    font-size: 16px;
}

/* Animation for selection mode */
@keyframes selectionPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.message.selection-mode.selected {
    animation: selectionPulse 0.3s ease-in-out;
}

/* Adjust message positioning for selection indicators */
.message.selection-mode .message-content {
    margin-left: 32px;
}

.message.selection-mode.sent .message-content {
    margin-left: 0;
    margin-right: 32px;
}

/* Selection indicator positioning for sent messages */
.message.selection-mode.sent .selection-indicator {
    left: auto;
    right: 8px;
}

/* Prevent text selection in selection mode */
.message.selection-mode * {
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
}

/* Mobile responsive adjustments for selection */
@media (max-width: 768px) {
    .selection-toolbar {
        height: 56px;
        padding: 0 12px;
    }
    
    .selection-toolbar .btn-icon {
        font-size: 14px;
        margin: 0 4px;
    }
    
    .selection-count {
        font-size: 14px;
    }
    
    .selection-indicator {
        width: 20px;
        height: 20px;
        font-size: 12px;
    }
    
    .message.selection-mode .message-content {
        margin-left: 28px;
    }
    
    .message.selection-mode.sent .message-content {
        margin-left: 0;
        margin-right: 28px;
    }
}

/* Forwarded Message Styles - Unified Design */
.message.forwarded .message-content {
    border-left: 4px solid #20B2AA;
    position: relative;
    /* Background will inherit from .message.received or .message.sent */
}

.message.forwarded.sent .message-content {
    border-left: 4px solid #20B2AA;
    border-right: none;
    /* Background will inherit from .message.sent */
}

.message.forwarded.received .message-content {
    border-left: 4px solid #20B2AA;
    /* Background will inherit from .message.received */
}

.forwarded-container {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.forwarded-image {
    max-width: 200px;
    max-height: 150px;
    border-radius: 8px;
    margin-top: 8px;
    cursor: pointer;
    object-fit: cover;
    border: 1px solid var(--border-light);
}

.forwarded-header {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.7rem;
    color: var(--primary-color);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    opacity: 0.8;
}

.forwarded-header i {
    font-size: 0.65rem;
}

.forwarded-original-quote {
    background: rgba(0, 0, 0, 0.03);
    border-radius: 8px;
    padding: 10px 12px;
    border-left: 3px solid var(--primary-color);
    margin: 0;
    position: relative;
}

.forwarded-original-sender {
    font-weight: 600;
    color: var(--primary-color);
    font-size: 0.8rem;
    margin-bottom: 4px;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
}

.forwarded-original-content {
    color: var(--text-secondary);
    font-size: 0.85rem;
    line-height: 1.3;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    /* Standard property for line clamping (keep vendor-prefixed -webkit-line-clamp for WebKit-based browsers) */
    line-clamp: 2;
    overflow: hidden;
    text-overflow: ellipsis;
}

.forwarded-reply-text {
    font-size: 0.95rem;
    line-height: 1.4;
    color: var(--text-primary);
    margin-top: 4px;
}

/* Sent message styles */
.message.forwarded.sent .forwarded-original-quote {
    background: rgba(255, 255, 255, 0.15);
    border-left: 4px solid #20B2AA;
    border-right: none;
}

.message.forwarded.sent .forwarded-header {
    color: rgba(255, 255, 255, 0.8);
}

.message.forwarded.sent .forwarded-original-sender {
    color: rgba(255, 255, 255, 0.9);
}

.message.forwarded.sent .forwarded-original-content {
    color: rgba(255, 255, 255, 0.75);
}

.message.forwarded.sent .forwarded-reply-text {
    color: white;
}

/* ========== REPLY MESSAGE STYLES ========== */
.message.reply .message-content {
    background: linear-gradient(145deg, #f8fafc, #f1f5f9);
    border: 1px solid #e2e8f0;
}

.message.reply.sent .message-content {
    background: linear-gradient(145deg, #4f46e5, #6366f1);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.reply-container {
    display: flex;
    flex-direction: column;
    gap: 8px;
    width: 100%;
}

.reply-quote {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    margin-bottom: 6px;
    padding: 8px 12px;
    background: rgba(79, 70, 229, 0.05);
    border-radius: 8px;
    border-left: 3px solid #4f46e5;
}

.message.reply.sent .reply-quote {
    background: rgba(255, 255, 255, 0.1);
    border-left: 3px solid rgba(255, 255, 255, 0.6);
}

.reply-quote-border {
    width: 3px;
    min-height: 40px;
    background: #4f46e5;
    border-radius: 2px;
    margin-right: 2px;
}

.message.reply.sent .reply-quote-border {
    background: rgba(255, 255, 255, 0.8);
}

.reply-quote-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.reply-original-sender {
    font-size: 0.75rem;
    font-weight: 600;
    color: #4f46e5;
    margin-bottom: 2px;
}

.message.reply.sent .reply-original-sender {
    color: rgba(255, 255, 255, 0.9);
}

.reply-original-text {
    font-size: 0.8rem;
    color: #64748b;
    line-height: 1.3;
    font-style: italic;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    /* Standard line-clamp for non-WebKit browsers */
    line-clamp: 2;
}

.message.reply.sent .reply-original-text {
    color: rgba(255, 255, 255, 0.75);
}

.reply-text {
    font-size: 0.9rem;
    line-height: 1.4;
    color: #1f2937;
    word-wrap: break-word;
}

.message.reply.sent .reply-text {
    color: white;
}

/* ========== FORWARD MODAL IMPROVEMENTS ========== */

/* Search Header with Select All */
.search-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
}

.select-all-section {
    display: flex;
    align-items: center;
}

.select-all-checkbox {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    font-size: 0.9rem;
    color: var(--primary-color);
    user-select: none;
}

.select-all-checkbox input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--primary-color);
}

.select-all-text {
    font-weight: 500;
}

/* Contact Item with Checkbox */
.forward-contact-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 6px 6px 8px 20px;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.2s ease;
    border: 2px solid transparent;
}

.forward-contact-item:hover {
    background: var(--bg-hover);
}

.forward-contact-item.selected {
    background: rgba(79, 70, 229, 0.1);
    border-color: var(--primary-color);
}

/* Checkbox styles removed - now using only round selection status */

.contact-action .selection-status {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.85rem;
    color: var(--text-secondary);
    font-weight: 500;
}

.contact-action .selection-status.selected {
    color: var(--primary-color);
}

.contact-action .selection-status i {
    font-size: 1.1rem;
}

/* Additional Message Section in Forward Modal */
.forward-additional-message {
    margin-top: 16px;
    padding: 16px;
    background: var(--bg-secondary);
    border-radius: 12px;
    border: 1px solid var(--border-light);
    margin-bottom: 16px;
}

.additional-message-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 12px;
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.9rem;
}

.additional-message-header i {
    color: var(--primary-color);
    font-size: 0.85rem;
}

.additional-message-input-container {
    position: relative;
}

.additional-message-input {
    width: 100%;
    padding: 12px;
    border: 2px solid var(--border-light);
    border-radius: 8px;
    font-family: inherit;
    font-size: 0.9rem;
    resize: vertical;
    min-height: 80px;
    max-height: 150px;
    background: white;
    color: var(--text-primary);
    transition: border-color 0.2s ease;
}

.additional-message-input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
}

.additional-message-input::placeholder {
    color: var(--text-tertiary);
}

.character-count {
    position: absolute;
    bottom: 8px;
    right: 12px;
    font-size: 0.75rem;
    color: var(--text-tertiary);
    background: rgba(255, 255, 255, 0.9);
    padding: 2px 6px;
    border-radius: 4px;
    pointer-events: none;
}

.character-count.warning {
    color: #f59e0b;
}

.character-count.error {
    color: #ef4444;
}

/* Forward Message Modal Styles */
.forward-modal {
    max-width: 500px;
    width: 90vw;
    max-height: 85vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.forward-modal .modal-body {
    flex: 1;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 16px;
    padding: 16px;
    max-height: 60vh;
}

/* Modal Footer */
.forward-modal .modal-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px;
    border-top: 1px solid var(--border-light);
    background: var(--bg-secondary);
}

/* Message Preview */
.forward-message-preview {
    padding: 16px;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-light);
}

.preview-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 12px;
    color: var(--text-secondary);
    font-size: 14px;
    font-weight: 600;
}

.preview-header i {
    color: var(--primary-color);
}

.message-preview-item {
    background: white;
    border-radius: 12px;
    padding: 12px;
    border: 1px solid var(--border-light);
}

.preview-sender {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
}

.sender-avatar {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    object-fit: cover;
}

.sender-name {
    font-weight: 600;
    font-size: 13px;
    color: var(--text-primary);
}

.preview-text {
    color: var(--text-secondary);
    font-size: 14px;
    line-height: 1.4;
}

/* Contact Search Section */
.contact-search-section {
    padding: 0 16px;
}

.search-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 12px;
    color: var(--text-primary);
    font-weight: 600;
    font-size: 15px;
}

.search-header i {
    color: var(--primary-color);
}

.search-input-container {
    position: relative;
}

.search-input-container input {
    width: 100%;
    padding: 12px 40px 12px 16px;
    border: 2px solid var(--border-light);
    border-radius: 8px;
    background: white;
    font-size: 14px;
    transition: all 0.2s ease;
}

.search-input-container input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
}

.search-input-container input::placeholder {
    color: var(--text-tertiary);
    opacity: 1;
}

.search-icon {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-tertiary);
    font-size: 14px;
}

/* Contacts Container */
.forward-contacts-container {
    flex: 1;
    overflow: visible;
    padding: 0;
    margin-bottom: 16px;
    display: block;
}

.forward-contacts-list {
    max-height: 250px;
    overflow-y: auto;
    border: 1px solid var(--border-light);
    border-radius: 8px;
    background: white;
    min-height: 150px;
    display: block;
    visibility: visible;
}

/* Ensure contacts are visible when loaded */
.forward-contacts-list:not(:empty) {
    padding: 8px 0;
}

.forward-contacts-list:empty {
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-tertiary);
    font-style: italic;
}

.forward-contacts-list:empty::before {
    content: "Cargando contactos...";
}

/* No contacts state */
.no-contacts {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 32px 16px;
    text-align: center;
    color: var(--text-secondary);
}

.no-contacts i {
    font-size: 48px;
    margin-bottom: 16px;
    opacity: 0.5;
}

.no-contacts p {
    margin: 0 0 8px 0;
    font-size: 16px;
    font-weight: 500;
}

.no-contacts small {
    font-size: 14px;
    opacity: 0.7;
}

.forward-contact-item {
    display: flex !important;
    align-items: center;
    padding: 6px 6px 8px 20px;
    cursor: pointer;
    transition: all 0.2s ease;
    background: white;
    margin: 0 0 2px 0;
    width: 100%;
    box-sizing: border-box;
}

.forward-contact-item:last-child {
    margin-bottom: 0;
}

.forward-contact-item:hover {
    background: var(--bg-secondary);
}

.forward-contact-item.selected {
    background: rgba(79, 70, 229, 0.1);
}

.contact-avatar-wrapper {
    position: relative;
    margin-right: 12px;
}

.contact-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid var(--border-light);
}

.status-indicator {
    position: absolute;
    bottom: -2px;
    right: -2px;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    border: 2px solid white;
}

.status-indicator.online {
    background: var(--success-color);
}

.status-indicator.offline {
    background: var(--gray-400);
}

.contact-info {
    flex: 1;
    min-width: 0;
}

.contact-name {
    font-weight: 500 !important;
    font-size: 1rem !important;
    color: var(--text-primary);
    margin-bottom: 2px;
    word-wrap: break-word;
}

.contact-username {
    font-size: 12px;
    color: var(--text-secondary);
    padding: 4px 0;
    border-radius: 4px;
    display: inline-block;
}

.contact-action {
    margin-left: 12px;
}

.share-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    border: 2px solid var(--primary-color);
    background: white;
    color: var(--primary-color);
    border-radius: 6px;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    min-width: 90px;
    justify-content: center;
}

.share-btn:hover {
    background: var(--primary-color);
    color: white;
}

.share-btn.selected {
    background: var(--success-color);
    border-color: var(--success-color);
    color: white;
}

.share-btn.selected:hover {
    background: #059669;
    border-color: #059669;
}

.no-contacts {
    text-align: center;
    padding: 32px 16px;
    color: var(--text-secondary);
}

.no-contacts i {
    font-size: 32px;
    margin-bottom: 12px;
    opacity: 0.5;
}

.no-contacts p {
    margin: 0;
    font-size: 14px;
}

/* Selected Contacts Section */
.selected-contacts-section {
    padding: 16px 0;
    border-top: 1px solid var(--border-light);
    margin-top: 16px;
}


.selected-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 12px;
}

.selected-header span {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 14px;
}

.clear-selection {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 6px 10px;
    background: var(--error-color);
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.clear-selection:hover {
    background: #dc2626;
}

.selected-contacts-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.selected-contact-item {
    display: flex;
    align-items: center;
    gap: 6px;
    background: var(--primary-light);
    border: 1px solid var(--primary-color);
    border-radius: 20px;
    padding: 6px 6px 8px 20px;
    font-size: 12px;
}

.selected-avatar {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    object-fit: cover;
}

.selected-name {
    font-weight: 500;
    color: var(--primary-color);
    max-width: 80px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.remove-selected {
    background: none;
    border: none;
    color: var(--primary-color);
    cursor: pointer;
    padding: 2px;
    border-radius: 50%;
    width: 16px;
    height: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    transition: all 0.2s ease;
}

.remove-selected:hover {
    background: var(--primary-color);
    color: white;
}

/* Modal Footer */
.forward-modal .modal-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px;
    border-top: 1px solid var(--border-light);
    background: var(--bg-secondary);
}

.btn-secondary {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 16px;
    background: white;
    border: 2px solid var(--border-medium);
    color: var(--text-secondary);
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-secondary:hover {
    background: var(--bg-tertiary);
    border-color: var(--text-secondary);
}

.btn-primary {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 16px;
    background: var(--primary-color);
    border: 2px solid var(--primary-color);
    color: white;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-primary:hover:not(:disabled) {
    background: var(--primary-dark);
    border-color: var(--primary-dark);
}

.btn-primary:disabled {
    background: var(--gray-300);
    border-color: var(--gray-300);
    cursor: not-allowed;
    opacity: 0.7;
}

.forward-count {
    background: rgba(255, 255, 255, 0.2);
    padding: 2px 6px;
    border-radius: 10px;
    font-size: 11px;
    font-weight: 700;
}

/* Reply Preview Animation */
@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Responsive Design */
@media (max-width: 480px) {
    .forward-modal {
        width: 95vw;
        max-height: 85vh;
    }
    
    .forward-contact-item {
        padding: 6px 6px 8px 20px;
    }
    
    .contact-avatar {
        width: 36px;
        height: 36px;
    }
    
    .share-btn {
        padding: 6px 10px;
        font-size: 11px;
        min-width: 80px;
    }
    
    .selected-contacts-list {
        gap: 6px;
    }
    
    .selected-contact-item {
        padding: 3px 10px 3px 3px;
        font-size: 11px;
    }
    
    .forward-modal .modal-footer {
        flex-direction: column;
        gap: 12px;
    }
    
    .btn-secondary,
    .btn-primary {
        width: 100%;
        justify-content: center;
    }
}

/* Desktop styles for attachment modal and buttons */
@media (min-width: 769px) {
    /* Attachment button for desktop */
    .attach-btn {
        width: 36px !important;
        height: 36px !important;
        margin-left: -20px !important;
        background: none !important;
        border: none !important;
        color: var(--primary-color) !important;
        border-radius: 50% !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        font-size: 1.1rem !important;
        cursor: pointer !important;
        transition: all 0.2s ease !important;
        flex-shrink: 0 !important;
    }
    
    .attach-btn:hover {
        background: var(--bg-tertiary) !important;
        transform: scale(1.05) !important;
    }
    
/* Desktop attachment modal - Enhanced styling */
@media (min-width: 769px) {
    .attachment-modal {
        position: fixed;
        bottom: auto;
        top: auto;
        left: auto;
        right: auto;
        background: var(--bg-primary);
        border: 1px solid var(--border-light);
        border-radius: 12px;
        padding: 0.75rem;
        transform: translateY(-10px) scale(0.95);
        transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        min-width: 240px;
        max-width: 280px;
        width: auto;
        margin: 0;
        z-index: 1050;
        box-shadow: 0 12px 35px rgba(0, 0, 0, 0.1), 
                    0 4px 15px rgba(0, 0, 0, 0.06);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        opacity: 0;
        visibility: hidden;
    }
    
    .attachment-modal.show {
        transform: translateY(0) scale(1);
        opacity: 1;
        visibility: visible;
    }
    
    .attachment-modal::before {
        content: '';
        position: absolute;
        bottom: -6px;
        left: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 0;
        border-left: 6px solid transparent;
        border-right: 6px solid transparent;
        border-top: 6px solid var(--bg-primary);
        filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.08));
    }
    
    /* When modal is positioned below the button */
    .attachment-modal.modal-below::before {
        bottom: auto;
        top: -6px;
        border-top: none;
        border-bottom: 6px solid var(--bg-primary);
        filter: drop-shadow(0 -1px 2px rgba(0, 0, 0, 0.08));
    }
    
    /* Desktop grid layout for attachment options */
    .attachment-options {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 0.5rem;
        margin: 0;
    }
    
    .attachment-option {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 0.6rem 0.4rem;
        background: var(--bg-secondary);
        border: 1px solid transparent;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        min-height: 60px;
    }
    
    .attachment-option::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, transparent 0%, rgba(255, 255, 255, 0.1) 100%);
        opacity: 0;
        transition: opacity 0.2s ease;
    }
    
    .attachment-option:hover {
        background: var(--bg-tertiary);
        border-color: var(--primary-color);
        transform: translateY(-2px) scale(1.02);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08),
                    0 2px 8px rgba(79, 70, 229, 0.1);
    }
    
    .attachment-option:hover::before {
        opacity: 1;
    }
    
    .attachment-option:active {
        transform: translateY(-1px) scale(1.02);
        transition: all 0.1s ease;
    }
    
    .attachment-option i {
        font-size: 1.2rem;
        margin-bottom: 0.3rem;
        color: var(--primary-color);
        transition: all 0.2s ease;
        position: relative;
        z-index: 2;
    }
    
    .attachment-option:hover i {
        transform: scale(1.05);
        filter: brightness(1.05);
    }
    
    .attachment-option span {
        font-size: 0.65rem;
        color: var(--text-secondary);
        font-weight: 600;
        text-align: center;
        position: relative;
        z-index: 2;
        transition: color 0.2s ease;
    }
    
    .attachment-option:hover span {
        color: var(--text-primary);
    }
    
    /* Individual icon colors with enhanced effects */
    .attachment-option.emoji i {
        color: #ffd93d;
    }
    
    .attachment-option.emoji:hover {
        border-color: #ffd93d;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08),
                    0 2px 8px rgba(255, 217, 61, 0.15);
    }
    
    .attachment-option.camera i {
        color: #ff6b6b;
    }
    
    .attachment-option.camera:hover {
        border-color: #ff6b6b;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08),
                    0 2px 8px rgba(255, 107, 107, 0.15);
    }
    
    .attachment-option.gallery i {
        color: #4ecdc4;
    }
    
    .attachment-option.gallery:hover {
        border-color: #4ecdc4;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08),
                    0 2px 8px rgba(78, 205, 196, 0.15);
    }
    
    .attachment-option.location i {
        color: #45b7d1;
    }
    
    .attachment-option.location:hover {
        border-color: #45b7d1;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08),
                    0 2px 8px rgba(69, 183, 209, 0.15);
    }
    
    .attachment-option.document i {
        color: #96ceb4;
    }
    
    .attachment-option.document:hover {
        border-color: #96ceb4;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08),
                    0 2px 8px rgba(150, 206, 180, 0.15);
    }
    
    /* Desktop modal overlay - subtle backdrop */
    .attachment-modal-overlay {
        background: transparent;
        backdrop-filter: none;
        -webkit-backdrop-filter: none;
        pointer-events: none;
    }
    
    .attachment-modal-overlay.show {
        background: rgba(0, 0, 0, 0.05);
        backdrop-filter: blur(2px);
        -webkit-backdrop-filter: blur(2px);
        pointer-events: auto;
    }
    
    /* Animation keyframes for desktop */
    @keyframes modalAppear {
        0% {
            opacity: 0;
            transform: translateY(-15px) scale(0.9);
        }
        100% {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }
    
    @keyframes modalDisappear {
        0% {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
        100% {
            opacity: 0;
            transform: translateY(-15px) scale(0.9);
        }
    }
    
    /* Responsive adjustments for larger screens */
    @media (min-width: 1200px) {
        .attachment-modal {
            min-width: 260px;
            max-width: 300px;
            padding: 0.875rem;
        }
        
        .attachment-options {
            gap: 0.6rem;
        }
        
        .attachment-option {
            padding: 0.7rem 0.5rem;
            min-height: 65px;
        }
        
        .attachment-option i {
            font-size: 1.3rem;
            margin-bottom: 0.35rem;
        }
        
        .attachment-option span {
            font-size: 0.7rem;
        }
    }
    
    /* Dark theme adjustments */
    [data-theme="dark"] .attachment-modal {
        background: rgba(30, 30, 30, 0.95);
        border-color: rgba(255, 255, 255, 0.1);
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3), 
                    0 8px 25px rgba(0, 0, 0, 0.2),
                    0 0 0 1px rgba(255, 255, 255, 0.1);
    }
    
    [data-theme="dark"] .attachment-modal::before {
        border-top-color: rgba(30, 30, 30, 0.95);
    }
    
    [data-theme="dark"] .attachment-modal.modal-below::before {
        border-bottom-color: rgba(30, 30, 30, 0.95);
    }
    
    [data-theme="dark"] .attachment-option {
        background: rgba(255, 255, 255, 0.05);
    }
    
    [data-theme="dark"] .attachment-option:hover {
        background: rgba(255, 255, 255, 0.1);
    }
}
    
    /* Remove background from chat header buttons */
    .chat-header .contact-menu-btn,
    .chat-header .icon-btn,
    .chat-header button {
        background: none !important;
        border: none !important;
        color: var(--text-secondary) !important;
        transition: all 0.2s ease !important;
    }
    
    .chat-header .contact-menu-btn:hover,
    .chat-header .icon-btn:hover,
    .chat-header button:hover {
        background: var(--bg-tertiary) !important;
        color: var(--primary-color) !important;
        transform: scale(1.05) !important;
    }

}

/* Message Status Indicators (Check Marks) */
.message-status {
    display: inline-flex;
    align-items: center;
    margin-left: 0.1rem !important;
    font-size: 0.9rem;
    line-height: 1;
    position: relative;
    min-width: 20px;
    height: 20px;
}

.message-status i {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    transition: all 0.2s ease;
}

/* Single check mark - Sent (Gray) */
.message-status.sent {
    color: #9ca3af;
    font-size: 14px;
    font-weight: normal;
}

/* Double check mark - Delivered (Gray) */
.message-status.delivered {
    color: #9ca3af;
    font-size: 14px;
    font-weight: normal;
}

/* Double check mark - Read (Verde Azul/Celeste) */
.message-status.read {
    color: #00bfff;
    font-size: 14px;
    font-weight: normal;
    animation: readCheckAnimation 0.3s ease-out;
}

/* Animation for read status */
@keyframes readCheckAnimation {
    0% {
        transform: scale(1);
        color: #9ca3af;
    }
    50% {
        transform: scale(1.2);
        color: #00a8e8;
    }
    100% {
        transform: scale(1);
        color: #00bfff;
    }
}

/* Message bubble adjustments for status indicators */
.message-bubble {
    position: relative;
    display: flex;
    align-items: flex-end;
    gap: 0.5rem;
}

.message-content {
    flex: 1;
}

.message-meta {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.7rem;
    color: var(--text-tertiary);
    margin-top: 0.25rem;
    justify-content: flex-end;
}

.message-time {
    white-space: nowrap;
}

/* Sent messages (own messages) */
.message.sent .message-status {
    opacity: 1;
}

/* Received messages (hide status indicators) */
.message.received .message-status {
    display: none;
}

/* Mobile specific adjustments */
@media (max-width: 768px) {
    .message-status {
        font-size: 0.85rem;
        min-width: 18px;
        height: 18px;
        margin-left: 0.3rem;
    }
    
    
    .message-meta {
        font-size: 0.65rem;
        gap: 0.2rem;
    }
}

/* Desktop specific adjustments */
@media (min-width: 769px) {
    .message-status {
        font-size: 0.95rem;
        min-width: 22px;
        height: 22px;
    }
    
    .message-meta {
        font-size: 0.75rem;
    }
}

/* Dark theme adjustments for status indicators */
[data-theme="dark"] .message-status.sent,
[data-theme="dark"] .message-status.delivered {
    color: #6b7280;
}

[data-theme="dark"] .message-status.read {
    color: #00bfff;
}

/* Loading/pending state */
.message-status.pending {
    color: #d1d5db;
    animation: pendingPulse 1.5s infinite;
}

@keyframes pendingPulse {
    0%, 100% { opacity: 0.5; }
    50% { opacity: 1; }
}

/* Error state */
.message-status.error {
    color: #ef4444;
}

.message-status.error i::before {
    content: "\f071"; /* Exclamation triangle */
}

/* Hover effects for desktop */
@media (min-width: 769px) {
    .message-bubble:hover .message-status {
        opacity: 1;
        transform: scale(1.05);
    }
}

/* Status tooltip */
.message-status[title] {
    cursor: help;
}

/* Compact view for group messages */
.message-compact .message-status {
    font-size: 0.75rem;
    min-width: 16px;
    height: 16px;
    margin-left: 0.25rem;
}


/* High contrast mode support */
@media (prefers-contrast: high) {
    .message-status.sent,
    .message-status.delivered {
        color: #374151;
    }
    
    .message-status.read {
        color: #0066cc;
    }
    
    [data-theme="dark"] .message-status.sent,
    [data-theme="dark"] .message-status.delivered {
        color: #9ca3af;
    }
    
    [data-theme="dark"] .message-status.read {
        color: #00bfff;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    .message-status,
    .message-status i {
        transition: none;
        animation: none;
    }
    
    @keyframes readCheckAnimation {
        0%, 100% { 
            transform: scale(1);
            color: #00bfff;
        }
    }
}

/* Status indicator positioning within message bubble */
.message-bubble.own {
    flex-direction: row-reverse;
}

.message-bubble.own .message-content {
    text-align: right;
}

.message-bubble.own .message-meta {
    justify-content: flex-start;
    flex-direction: row-reverse;
}

.message-bubble.other .message-meta {
    justify-content: flex-end;
}

.message-bubble.other .message-status {
    display: none; /* Never show status on received messages */
}

/* Video Preview Styles */
.video-preview-container {
    margin-bottom: 12px;
    padding: 12px;
    background: var(--bg-secondary);
    border-radius: 12px;
    border: 1px solid var(--border-color);
}

.video-preview-wrapper {
    position: relative;
    display: inline-block;
    border-radius: 8px;
    overflow: hidden;
}

.video-preview {
    display: block;
    border-radius: 8px;
    background: #000;
}

.remove-video-btn {
    position: absolute;
    top: 8px;
    right: 8px;
    background: rgba(0, 0, 0, 0.6);
    color: white;
    border: none;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 12px;
    transition: background-color 0.2s ease;
}

.remove-video-btn:hover {
    background: rgba(0, 0, 0, 0.8);
}

.video-info {
    margin-top: 8px;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    color: var(--text-secondary);
}

.video-info i {
    color: var(--primary-color);
}

.video-name {
    font-weight: 500;
    color: var(--text-primary);
}

.video-size {
    color: var(--text-secondary);
}

/* Forgot Password Success State */
.forgot-password-success {
    text-align: center;
    padding: 2rem 1rem;
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.05), rgba(16, 185, 129, 0.15));
    border: 2px solid rgba(16, 185, 129, 0.2);
    border-radius: 16px;
    margin-top: 1.5rem;
}

.success-checkmark {
    margin-bottom: 1rem;
}

.success-checkmark i {
    font-size: 3.5rem;
    color: var(--success-color);
    background: #ffffff;
    border-radius: 50%;
    padding: 1rem;
    width: 80px;
    height: 80px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    animation: successPulse 1.5s ease-in-out;
}

@keyframes successPulse {
    0% {
        transform: scale(0.8);
        opacity: 0;
    }
    50% {
        transform: scale(1.1);
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

.forgot-password-success h3 {
    color: var(--success-color);
    font-weight: 600;
    font-size: 1.5rem;
    margin-bottom: 0.75rem;
}

.forgot-password-success p {
    color: var(--text-secondary);
    margin-bottom: 1rem;
    line-height: 1.6;
}

.forgot-password-success .email-sent-to {
    background: rgba(16, 185, 129, 0.1);
    padding: 0.75rem 1rem;
    border-radius: 8px;
    margin-bottom: 2rem;
    font-size: 0.9rem;
}

.forgot-password-success .email-sent-to strong {
    color: var(--success-color);
    font-weight: 600;
}

.forgot-password-success .return-login-btn {
    margin-top: 1rem;
    background: var(--primary-color);
    transition: all 0.3s ease;
}

.forgot-password-success .return-login-btn:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(79, 70, 229, 0.4);
}

.forgot-password-success .return-login-btn i {
    margin-left: 8px;
}

/* Mobile responsive adjustments */
@media (max-width: 480px) {
    .forgot-password-success {
        padding: 1.5rem 1rem;
        margin-top: 1rem;
    }
    
    .success-checkmark i {
        font-size: 3rem;
        width: 70px;
        height: 70px;
    }
    
    .forgot-password-success h3 {
        font-size: 1.3rem;
    }
}

/* Alternative Authentication Methods */
.auth-alternatives {
    margin: 1.5rem 0;
}

.divider {
    display: flex;
    align-items: center;
    margin: 1.5rem 0 1rem 0;
    position: relative;
}

.divider::before {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border-light);
}

.divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border-light);
}

.divider span {
    padding: 0 1rem;
    color: var(--text-secondary);
    font-size: 0.9rem;
    background: var(--bg-primary);
}

.alt-auth-buttons {
    display: flex;
    gap: 0.75rem;
    justify-content: space-between;
}

.alt-auth-btn {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem 1rem;
    border: 2px solid var(--border-light);
    border-radius: 12px;
    background: var(--bg-primary);
    color: var(--text-primary);
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.alt-auth-btn:hover {
    border-color: var(--primary-color);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(79, 70, 229, 0.15);
}

.alt-auth-btn:active {
    transform: translateY(0);
}

.alt-auth-btn i {
    font-size: 1.1rem;
}

/* Google Auth Button */
.google-auth-btn:hover {
    border-color: #db4437;
    box-shadow: 0 4px 12px rgba(219, 68, 55, 0.15);
}

.google-auth-btn i {
    color: #db4437;
}

/* Magic Link Button */
.magic-link-btn:hover {
    border-color: #9333ea;
    box-shadow: 0 4px 12px rgba(147, 51, 234, 0.15);
}

.magic-link-btn i {
    color: #9333ea;
    animation: magicPulse 2s infinite;
}

@keyframes magicPulse {
    0%, 100% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.1);
        opacity: 0.8;
    }
}

/* Hover effects */
.alt-auth-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
}

.alt-auth-btn:hover::before {
    left: 100%;
}

/* Mobile responsive adjustments for alt buttons */
@media (max-width: 480px) {
    .alt-auth-buttons {
        flex-direction: column;
        gap: 0.5rem;
    }
    
    .alt-auth-btn {
        padding: 0.875rem 1rem;
        font-size: 0.95rem;
    }
    
    .divider {
        margin: 1rem 0;
    }
}

/* vigichat Style Audio Message */
.whatsapp-audio-message {
    display: flex;
    align-items: center;
    gap: 8px;
    max-width: 280px;
    margin: 4px 0;
    padding: 8px 12px;
    background: #857ff7;
    border-radius: 18px;
    color: white;
}

.whatsapp-play-btn {
    width: 32px;
    height: 32px;
    border: none;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.15);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 14px;
    flex-shrink: 0;
}

.whatsapp-play-btn:hover {
    background: rgba(255, 255, 255, 0.25);
    transform: scale(1.05);
}

.whatsapp-audio-content {
    flex: 1;
    min-width: 0;
}

.whatsapp-waveform {
    position: relative;
    height: 20px;
    margin-bottom: 4px;
}

.freq-dots-container {
    display: flex;
    align-items: end;
    gap: 2px;
    height: 20px;
}

.freq-dot {
    width: 3px;
    background: rgba(255, 255, 255, 0.7);
    border-radius: 2px;
    transition: all 0.1s ease;
}

.audio-progress-bar {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 2px;
    width: 0%;
    transition: width 0.1s ease;
    pointer-events: none;
}

.whatsapp-audio-duration {
    font-family: 'Courier New', monospace;
    font-size: 11px;
    color: rgba(255, 255, 255, 0.9);
    font-weight: 500;
}

/* Received message audio styles */
.message.received .whatsapp-audio-message {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

.message.received .whatsapp-play-btn {
    background: rgba(0, 0, 0, 0.08);
    color: var(--primary-color);
}

.message.received .whatsapp-play-btn:hover {
    background: rgba(0, 0, 0, 0.12);
}

.message.received .freq-dot {
    background: rgba(133, 127, 247, 0.7);
}

.message.received .audio-progress-bar {
    background: rgba(133, 127, 247, 0.3);
}

.message.received .whatsapp-audio-duration {
    color: var(--text-secondary);
}

/* Audio Message Styles (Legacy) */
.message-audio {
    max-width: 280px;
    margin: 4px 0;
}

.audio-player-container {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 18px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    transition: all 0.2s ease;
}

.audio-player-container:hover {
    background: rgba(255, 255, 255, 0.08);
    transform: translateY(-1px);
}

.audio-play-btn {
    width: 36px;
    height: 36px;
    border: none;
    border-radius: 50%;
    background: var(--primary-color);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 14px;
    flex-shrink: 0;
}

.audio-play-btn:hover {
    background: var(--primary-dark);
    transform: scale(1.05);
}

.audio-play-btn:active {
    transform: scale(0.95);
}

.audio-waveform {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 8px;
}

.frequency-bars-static {
    display: flex;
    align-items: end;
    gap: 2px;
    height: 20px;
}

.frequency-bar-static {
    width: 3px;
    background: var(--primary-color);
    border-radius: 2px;
    transition: all 0.1s ease;
    opacity: 0.6;
}

.audio-duration {
    font-family: 'Courier New', monospace;
    font-size: 12px;
    color: var(--text-secondary);
    font-weight: 500;
    min-width: 35px;
    text-align: right;
    flex-shrink: 0;
}

/* Sent message audio styles */
.message.sent .audio-player-container {
    background: rgba(133, 127, 247, 0.1);
    border-color: rgba(133, 127, 247, 0.2);
}

.message.sent .audio-play-btn {
    background: white;
    color: var(--primary-color);
}

.message.sent .audio-play-btn:hover {
    background: #f8f9ff;
}

.message.sent .frequency-bar-static {
    background: white;
    opacity: 0.8;
}

.message.sent .audio-duration {
    color: rgba(255, 255, 255, 0.9);
}

/* Dark theme compatibility */
[data-theme="dark"] .audio-player-container {
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.1);
}

[data-theme="dark"] .message.sent .audio-player-container {
    background: rgba(133, 127, 247, 0.15);
    border-color: rgba(133, 127, 247, 0.25);
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .message-audio {
        max-width: 250px;
    }
    
    .audio-player-container {
        gap: 10px;
        padding: 10px 14px;
    }
    
    .audio-play-btn {
        width: 32px;
        height: 32px;
        font-size: 12px;
    }
    
    .frequency-bars-static {
        height: 18px;
    }
}

@media (max-width: 480px) {
    .message-audio {
        max-width: 220px;
    }
    
    .audio-player-container {
        gap: 8px;
        padding: 8px 12px;
    }
    
    .audio-play-btn {
        width: 30px;
        height: 30px;
        font-size: 11px;
    }
    
    .frequency-bars-static {
        height: 16px;
        gap: 1px;
    }
    
    .frequency-bar-static {
        width: 2px;
    }
    
    .audio-duration {
        font-size: 11px;
        min-width: 30px;
    }
}

/* =============================================================================
   NUEVO DISE√ëO DE AUDIO COMPLETO ESTILO WHATSAPP
   ============================================================================= */

.audio-message-whatsapp-complete {
    display: flex;
    align-items: center;
    width: 100%;
    max-width: 500px;
    padding: 10px 15px;
    gap: 10px;
    background: transparent;
}

/* Foto de perfil del remitente */
.audio-profile-pic {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    overflow: hidden;
    flex-shrink: 0;
}

.audio-profile-pic img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Bot√≥n de play/pause */
.audio-play-btn-complete {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: #047857;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.audio-play-btn-complete:hover {
    background: #065f46;
    transform: scale(1.05);
}

/* Tri√°ngulo de play */
.play-triangle {
    width: 0;
    height: 0;
    border-left: 12px solid white;
    border-top: 7px solid transparent;
    border-bottom: 7px solid transparent;
    margin-left: 2px; /* Centrar visualmente el tri√°ngulo */
}

/* Contenedor de progreso completo */
.audio-progress-container-complete {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 10px;
    margin-right: 10px;
}

/* Tiempos */
.audio-current-time,
.audio-total-time {
    font-size: 12px;
    color: white;
    font-weight: 400;
    min-width: 35px;
    text-align: center;
}

/* Para mensajes recibidos, cambiar color del texto */
.message.received .audio-current-time,
.message.received .audio-total-time {
    color: rgba(0, 0, 0, 0.7);
}

/* Contenedor de la barra de progreso */
.audio-progress-bar-container {
    flex: 1;
    height: 3px;
    position: relative;
}

/* Barra de progreso base */
.audio-progress-bar-complete {
    width: 100%;
    height: 3px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 2px;
    position: relative;
    cursor: pointer;
}

/* Para mensajes recibidos */
.message.received .audio-progress-bar-complete {
    background: rgba(0, 0, 0, 0.15);
}

/* Relleno de progreso */
.audio-progress-fill {
    height: 100%;
    width: 0%;
    background: white;
    border-radius: 2px;
    transition: width 0.1s linear;
}

/* Para mensajes recibidos */
.message.received .audio-progress-fill {
    background: #047857;
}

/* Bot√≥n de play para mensajes recibidos */
.message.received .audio-play-btn-complete {
    background: #e0e0e0;
}

.message.received .audio-play-btn-complete:hover {
    background: #d0d0d0;
}

.message.received .play-triangle {
    border-left-color: #666;
}

/* Responsive para m√≥viles */
@media (max-width: 768px) {
    .audio-message-whatsapp-complete {
        max-width: 420px;
        padding: 8px 12px;
        gap: 8px;
    }
    
    .audio-profile-pic {
        width: 35px;
        height: 35px;
    }
    
    .audio-play-btn-complete {
        width: 35px;
        height: 35px;
    }
    
    .play-triangle {
        border-left-width: 10px;
        border-top-width: 6px;
        border-bottom-width: 6px;
    }
    
    .audio-progress-container-complete {
        gap: 8px;
    }
    
    .audio-current-time,
    .audio-total-time {
        font-size: 11px;
        min-width: 30px;
    }
}

@media (max-width: 480px) {
    .audio-message-whatsapp-complete {
        max-width: 320px;
        padding: 6px 10px;
        gap: 6px;
    }
    
    .audio-profile-pic {
        width: 32px;
        height: 32px;
    }
    
    .audio-play-btn-complete {
        width: 32px;
        height: 32px;
    }
    
    .play-triangle {
        border-left-width: 9px;
        border-top-width: 5px;
        border-bottom-width: 5px;
    }
    
    .audio-progress-container-complete {
        gap: 6px;
        margin-right: 6px;
    }
    
    .audio-current-time,
    .audio-total-time {
        font-size: 10px;
        min-width: 28px;
    }
}

/* =============================================================================
   ESTILOS PARA PREVIEW DE AUDIO COMPLETO ESTILO WHATSAPP
   ============================================================================= */

.audio-preview-container-whatsapp {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    background: #f8f9fa;
    border-radius: 20px;
    margin: 8px 0;
    border: 1px solid #e3e8ef;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.preview-delete-btn {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: #dc3545;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.preview-delete-btn:hover {
    background: #c82333;
    transform: scale(1.05);
}

.preview-delete-btn i {
    color: white;
    font-size: 14px;
}

/* Componente de audio completo para preview */
.audio-preview-whatsapp-complete {
    display: flex;
    align-items: center;
    flex: 1;
    background: var(--message-sent);
    border-radius: 16px;
    padding: 12px 16px;
    gap: 10px;
    min-width: 0;
}

/* Bot√≥n de play para preview */
.audio-play-btn-complete-preview {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: #047857;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.audio-play-btn-complete-preview:hover {
    background: #065f46;
    transform: scale(1.05);
}

/* Tri√°ngulo de play para preview */
.play-triangle-preview {
    width: 0;
    height: 0;
    border-left: 12px solid white;
    border-top: 7px solid transparent;
    border-bottom: 7px solid transparent;
    margin-left: 2px;
}

/* Contenedor de progreso para preview */
.audio-progress-container-complete-preview {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 10px;
}

/* Tiempos para preview */
.audio-current-time-preview,
.audio-total-time-preview {
    font-size: 12px;
    color: rgba(255, 255, 255, 0.9);
    font-weight: 400;
    min-width: 35px;
    text-align: center;
}

/* Contenedor de la barra para preview */
.audio-progress-bar-container-preview {
    flex: 1;
    height: 3px;
    position: relative;
}

/* Barra de progreso para preview */
.audio-progress-bar-complete-preview {
    width: 100%;
    height: 3px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 2px;
    position: relative;
    cursor: pointer;
}

/* Relleno de progreso para preview */
.audio-progress-fill-preview {
    height: 100%;
    width: 0%;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 2px;
    transition: width 0.1s linear;
}

/* Bot√≥n enviar */
.preview-send-btn {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: var(--message-sent);
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.preview-send-btn:hover {
    transform: scale(1.05);
    background: #7c76f4;
}

.preview-send-btn i {
    color: white;
    font-size: 14px;
}

/* Responsive para m√≥viles */
@media (max-width: 768px) {
    .audio-preview-container-whatsapp {
        gap: 10px;
        padding: 10px 12px;
        margin: 6px 0;
    }
    
    .preview-delete-btn,
    .preview-send-btn {
        width: 32px;
        height: 32px;
    }
    
    .audio-preview-whatsapp-complete {
        padding: 10px 14px;
        gap: 8px;
    }
    
    .audio-play-btn-complete-preview {
        width: 35px;
        height: 35px;
    }
    
    .play-triangle-preview {
        border-left-width: 10px;
        border-top-width: 6px;
        border-bottom-width: 6px;
    }
    
    .audio-progress-container-complete-preview {
        gap: 8px;
    }
    
    .audio-current-time-preview,
    .audio-total-time-preview {
        font-size: 11px;
        min-width: 30px;
    }
}

@media (max-width: 480px) {
    .audio-preview-container-whatsapp {
        gap: 8px;
        padding: 8px 10px;
    }
    
    .preview-delete-btn,
    .preview-send-btn {
        width: 30px;
        height: 30px;
    }
    
    .audio-preview-whatsapp-complete {
        padding: 8px 12px;
        gap: 6px;
    }
    
    .audio-play-btn-complete-preview {
        width: 32px;
        height: 32px;
    }
    
    .play-triangle-preview {
        border-left-width: 9px;
        border-top-width: 5px;
        border-bottom-width: 5px;
    }
    
    .audio-progress-container-complete-preview {
        gap: 6px;
    }
    
    .audio-current-time-preview,
    .audio-total-time-preview {
        font-size: 10px;
        min-width: 28px;
    }
}