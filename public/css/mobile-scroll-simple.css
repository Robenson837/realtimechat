/**
 * MOBILE SCROLL SIMPLE - Direct Working Implementation
 * Simple, proven patterns that work on ALL mobile devices
 * No complex layers, just what works
 */

/* CRITICAL: Basic scrolling foundation */
.messages-container,
.messages-scroll,
#messages-scroll {
    /* FUNDAMENTAL: Must have these for mobile scroll to work */
    overflow-y: scroll !important;
    overflow-x: hidden !important;
    
    /* MOBILE: Enable touch scrolling */
    -webkit-overflow-scrolling: touch !important;
    
    /* HEIGHT: Must have defined height */
    height: 100% !important;
    max-height: 100vh !important;
    
    /* TOUCH: Allow vertical touch scrolling */
    touch-action: pan-y !important;
    
    /* PERFORMANCE: Basic hardware acceleration */
    transform: translateZ(0) !important;
    
    /* BEHAVIOR: Manual control */
    scroll-behavior: auto !important;
}

/* MOBILE SPECIFIC: Override everything else on mobile */
@media (max-width: 768px), (pointer: coarse) {
    .messages-container,
    .messages-scroll,
    #messages-scroll {
        /* FORCE: These properties for mobile */
        overflow-y: scroll !important;
        overflow-x: hidden !important;
        -webkit-overflow-scrolling: touch !important;
        touch-action: pan-y !important;
        overscroll-behavior: auto !important;
        
        /* SIMPLE: Minimal transforms */
        transform: translateZ(0) !important;
        -webkit-transform: translateZ(0) !important;
        
        /* CLEAR: Remove conflicting properties */
        scroll-snap-type: none !important;
        scroll-behavior: auto !important;
        
        /* HEIGHT: Ensure scrollable */
        min-height: 300px !important;
        height: 100% !important;
    }
    
    /* HIDE: Scrollbar on mobile */
    .messages-container::-webkit-scrollbar,
    .messages-scroll::-webkit-scrollbar,
    #messages-scroll::-webkit-scrollbar {
        display: none !important;
        width: 0 !important;
    }
    
    /* REMOVE: Scrollbar width */
    .messages-container,
    .messages-scroll,
    #messages-scroll {
        scrollbar-width: none !important;
        -ms-overflow-style: none !important;
    }
}

/* CONTAINER: Proper parent setup */
.chat-container,
.main-content {
    /* HEIGHT: Full screen */
    height: 100vh !important;
    height: 100svh !important;
    
    /* LAYOUT: Flex column */
    display: flex !important;
    flex-direction: column !important;
    
    /* OVERFLOW: Don't scroll parent */
    overflow: hidden !important;
}

/* MESSAGES AREA: Make it flexible */
.messages-area {
    /* FLEX: Take available space */
    flex: 1 !important;
    
    /* MINIMUM: Ensure it can shrink */
    min-height: 0 !important;
    
    /* POSITION: For contained scrolling */
    position: relative !important;
}

/* INPUT: Fixed at bottom */
.message-input-container,
.chat-input-container {
    /* FIXED: At bottom */
    flex-shrink: 0 !important;
    
    /* POSITION: Stick to bottom */
    position: sticky !important;
    bottom: 0 !important;
    
    /* LAYER: Above content */
    z-index: 100 !important;
}

/* RESET: Clear any interfering styles */
.messages-container *,
.messages-scroll *,
#messages-scroll * {
    /* CLEAR: Box sizing */
    box-sizing: border-box;
}

/* BODY: Prevent page scroll issues */
@media (max-width: 768px) {
    body {
        /* FIXED: Height */
        height: 100vh !important;
        height: 100svh !important;
        
        /* NO: Horizontal scroll */
        overflow-x: hidden !important;
        
        /* PREVENT: Pull to refresh */
        overscroll-behavior-y: contain !important;
    }
    
    html {
        /* FIXED: Height */
        height: 100% !important;
        
        /* NO: Scroll on html */
        overflow-x: hidden !important;
    }
}

/* DEBUG: Visual helper (remove in production) */
.mobile-scroll-debug {
    border: 2px solid red !important;
    background: rgba(255, 0, 0, 0.1) !important;
}

.mobile-scroll-debug::before {
    content: "MOBILE SCROLL CONTAINER";
    position: absolute;
    top: 0;
    left: 0;
    background: red;
    color: white;
    padding: 2px 5px;
    font-size: 10px;
    z-index: 9999;
}