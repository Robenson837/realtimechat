/* Mobile-Specific Loading Optimizations */

/* Touch-friendly mobile optimizations */
@media (max-width: 768px) {
    /* Faster animations on mobile for better performance */
    .contact-skeleton,
    .conversation-skeleton {
        animation-duration: 0.3s;
    }
    
    .skeleton-shimmer {
        animation-duration: 1.5s; /* Slightly faster on mobile */
    }
    
    /* Reduced skeleton items on mobile to prevent lag */
    .contacts-loading-container.smooth-loading .contact-skeleton:nth-child(n+5) {
        display: none;
    }
    
    .conversations-loading-container .conversation-skeleton:nth-child(n+4) {
        display: none;
    }
    
    /* Optimized contact item transitions */
    .contact-item {
        transition: all 0.2s ease; /* Faster transitions */
    }
    
    /* Reduced motion for users who prefer it */
    @media (prefers-reduced-motion: reduce) {
        .skeleton-shimmer,
        .contact-skeleton,
        .conversation-skeleton {
            animation: none;
        }
        
        .contact-item,
        .conversation-item {
            transition: none;
        }
        
        .contacts-loading-container.smooth-loading,
        .conversations-loading-container {
            animation: none;
            opacity: 1;
        }
    }
    
    /* Improved touch targets */
    .contact-item,
    .conversation-item {
        min-height: 60px;
        padding: 12px 16px;
    }
    
    /* Prevent text selection on skeleton items */
    .contact-skeleton,
    .conversation-skeleton {
        user-select: none;
        -webkit-user-select: none;
        -webkit-touch-callout: none;
    }
    
    /* Optimize for better scrolling on mobile */
    .contacts-list,
    .conversations-list {
        -webkit-overflow-scrolling: touch;
        scroll-behavior: smooth;
        transform: translateZ(0); /* Enable hardware acceleration */
    }
    
    /* Loading state optimizations */
    .contacts-list.loading,
    .conversations-list.loading {
        overscroll-behavior: contain;
        touch-action: pan-y;
    }
    
    /* Better cache warnings on mobile */
    .cache-warning {
        top: 60px !important;
        right: 10px !important;
        left: 10px !important;
        max-width: calc(100% - 20px) !important;
        font-size: 11px !important;
        text-align: center;
        transform: translateX(0) !important;
    }
    
    /* Mobile-specific skeleton sizing */
    .contact-avatar.skeleton-shimmer {
        width: 44px;
        height: 44px;
    }
    
    .conversation-avatar.skeleton-shimmer {
        width: 46px;
        height: 46px;
    }
    
    /* Improved loading indicators for mobile */
    .message-loading-container {
        padding: 12px;
    }
    
    .loading-bubble.left,
    .loading-bubble.right {
        max-width: 70%; /* Better sizing for mobile */
    }
    
    /* Progressive enhancement for modern mobile browsers */
    @supports (backdrop-filter: blur(10px)) {
        .cache-warning {
            backdrop-filter: blur(10px);
            background: rgba(255, 193, 7, 0.8) !important;
        }
        
        .cache-warning.conversations-cache {
            background: rgba(59, 130, 246, 0.8) !important;
        }
    }
}

/* High DPI displays optimizations */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .skeleton-shimmer {
        background-size: 400% 100%; /* Higher resolution shimmer */
    }
}

/* Dark mode mobile optimizations */
@media (max-width: 768px) and (prefers-color-scheme: dark) {
    .contact-skeleton,
    .conversation-skeleton {
        background: rgba(255, 255, 255, 0.03);
    }
    
    .cache-warning {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }
}

/* Ultra-wide mobile screens */
@media (max-width: 480px) {
    .contact-skeleton,
    .conversation-skeleton {
        padding: 10px 12px;
        margin-bottom: 3px;
    }
    
    .contacts-loading-container.smooth-loading,
    .conversations-loading-container {
        padding: 6px;
    }
    
    /* Even smaller skeleton items for very small screens */
    .contact-avatar.skeleton-shimmer {
        width: 40px;
        height: 40px;
    }
    
    .conversation-avatar.skeleton-shimmer {
        width: 42px;
        height: 42px;
    }
}