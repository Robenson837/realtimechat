/**
 * Natural Scroll Override - Forces completely manual scroll behavior
 * Disables ALL automatic scroll behaviors that cause snapping
 */

/* GLOBAL OVERRIDE - Apply to ALL scrollable elements */
* {
    /* Force manual scroll behavior globally */
    scroll-behavior: auto !important;
    
    /* Disable scroll snap globally */
    scroll-snap-type: none !important;
    scroll-snap-align: none !important;
    
    /* Natural overscroll behavior */
    overscroll-behavior: auto !important;
    overscroll-behavior-x: auto !important;
    overscroll-behavior-y: auto !important;
}

/* CONVERSATION CONTAINERS - Force natural scrolling */
.messages-container,
.messages-scroll,
#messages-scroll,
.chat-container .messages-container,
div[class*="message"] {
    /* CRITICAL: Disable ALL automatic behaviors */
    -webkit-overflow-scrolling: auto !important;
    scroll-behavior: auto !important;
    scroll-snap-type: none !important;
    scroll-snap-align: none !important;
    
    /* Natural touch behavior */
    touch-action: pan-y !important;
    
    /* Remove transforms that cause snapping */
    transform: none !important;
    -webkit-transform: none !important;
    
    /* Natural performance settings */
    will-change: auto !important;
    
    /* Natural overscroll */
    overscroll-behavior: auto !important;
    overscroll-behavior-y: auto !important;
}

/* MESSAGE ELEMENTS - Remove snap behavior */
.message,
.message-wrapper,
.message-container,
div[class*="message-"] {
    /* DISABLE scroll snap alignment */
    scroll-snap-align: none !important;
    scroll-snap-stop: normal !important;
    
    /* Remove GPU acceleration that might cause snapping */
    transform: none !important;
    -webkit-transform: none !important;
    will-change: auto !important;
}

/* MOBILE SPECIFIC - Enable touch scrolling but disable auto-snap */
@media (max-width: 768px) {
    .messages-container,
    .messages-scroll,
    #messages-scroll {
        /* ENABLE momentum scrolling for touch responsiveness */
        -webkit-overflow-scrolling: touch !important;
        
        /* But DISABLE automatic scroll behavior */
        scroll-behavior: auto !important;
        
        /* DISABLE any snap behavior - this is key */
        scroll-snap-type: none !important;
        
        /* Allow natural overscroll but contained */
        overscroll-behavior: contain !important;
        
        /* Minimal transforms for performance but no snapping */
        transform: translateZ(0) !important;
        -webkit-transform: translateZ(0) !important;
        
        /* Controlled performance optimization */
        will-change: scroll-position !important;
        
        /* Ensure touch works properly */
        touch-action: pan-y !important;
        -webkit-touch-callout: none !important;
    }
}

/* iOS SPECIFIC - Override iOS momentum scrolling */
@supports (-webkit-overflow-scrolling: touch) {
    .messages-container,
    .messages-scroll,
    #messages-scroll {
        /* FORCE disable iOS momentum scrolling */
        -webkit-overflow-scrolling: auto !important;
    }
}

/* DEBUGGING - Visual indicator when debug mode is on */
.debug-scroll-natural {
    border: 2px dashed #10b981 !important;
}

.debug-scroll-natural::before {
    content: "ðŸŽ¯ NATURAL SCROLL ACTIVE";
    position: absolute;
    top: -25px;
    left: 10px;
    background: #10b981;
    color: white;
    padding: 2px 8px;
    font-size: 10px;
    font-weight: bold;
    border-radius: 4px;
    z-index: 9999;
}

/* EMERGENCY OVERRIDE - Use only if other methods fail */
.force-natural-scroll {
    scroll-behavior: auto !important;
    -webkit-overflow-scrolling: auto !important;
    scroll-snap-type: none !important;
    overscroll-behavior: auto !important;
    transform: none !important;
    will-change: auto !important;
}

.force-natural-scroll * {
    scroll-behavior: auto !important;
    scroll-snap-align: none !important;
    transform: none !important;
}